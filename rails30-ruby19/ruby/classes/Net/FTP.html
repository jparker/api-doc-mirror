<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::FTP</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::FTP 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/net/ftp_rb.html">lib/net/ftp.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This class implements the <a href="../File.html">File</a> Transfer
Protocol. If you have used a command-line <a href="FTP.html">FTP</a>
program, and are familiar with the commands, you will be able to use this
class easily. Some extra features are included to take advantage of
Ruby&#8217;s style and strengths.
</p>
<h2>Example</h2>
<pre>
  require 'net/ftp'
</pre>
<h3>Example 1</h3>
<pre>
  ftp = Net::FTP.new('ftp.netlab.co.jp')
  ftp.login
  files = ftp.chdir('pub/lang/ruby/contrib')
  files = ftp.list('n*')
  ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  ftp.close
</pre>
<h3>Example 2</h3>
<pre>
  Net::FTP.open('ftp.netlab.co.jp') do |ftp|
    ftp.login
    files = ftp.chdir('pub/lang/ruby/contrib')
    files = ftp.list('n*')
    ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  end
</pre>
<h2>Major Methods</h2>
<p>
The following are the methods most likely to be useful to users:
</p>
<ul>
<li><a href="FTP.html#M004201">FTP.open</a>

</li>
<li><a href="FTP.html#M004228">getbinaryfile</a>

</li>
<li><a href="FTP.html#M004229">gettextfile</a>

</li>
<li><a href="FTP.html#M004231">putbinaryfile</a>

</li>
<li><a href="FTP.html#M004232">puttextfile</a>

</li>
<li><a href="FTP.html#M004241">chdir</a>

</li>
<li><a href="FTP.html#M004235">nlst</a>

</li>
<li><a href="FTP.html#M004242">size</a>

</li>
<li><a href="FTP.html#M004239">rename</a>

</li>
<li><a href="FTP.html#M004240">delete</a>

</li>
</ul>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M004249">abort</a>,</li>
                
                <li><a href="#M004234">acct</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M004203">binary=</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M004241">chdir</a>,</li>
                
                <li><a href="#M004256">close</a>,</li>
                
                <li><a href="#M004257">closed?</a>,</li>
                
                <li><a href="#M004209">connect</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M004240">delete</a>,</li>
                
                <li><a href="#M004238">dir</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M004230">get</a>,</li>
                
                <li><a href="#M004228">getbinaryfile</a>,</li>
                
                <li><a href="#M004247">getdir</a>,</li>
                
                <li><a href="#M004213">getline</a>,</li>
                
                <li><a href="#M004214">getmultiline</a>,</li>
                
                <li><a href="#M004215">getresp</a>,</li>
                
                <li><a href="#M004229">gettextfile</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M004252">help</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M004236">list</a>,</li>
                
                <li><a href="#M004223">login</a>,</li>
                
                <li><a href="#M004237">ls</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M004221">makepasv</a>,</li>
                
                <li><a href="#M004220">makeport</a>,</li>
                
                <li><a href="#M004251">mdtm</a>,</li>
                
                <li><a href="#M004244">mkdir</a>,</li>
                
                <li><a href="#M004243">mtime</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M004202">new</a>,</li>
                
                <li><a href="#M004235">nlst</a>,</li>
                
                <li><a href="#M004254">noop</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M004201">open</a>,</li>
                
                <li><a href="#M004208">open_socket</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M004258">parse227</a>,</li>
                
                <li><a href="#M004259">parse228</a>,</li>
                
                <li><a href="#M004260">parse229</a>,</li>
                
                <li><a href="#M004261">parse257</a>,</li>
                
                <li><a href="#M004233">put</a>,</li>
                
                <li><a href="#M004231">putbinaryfile</a>,</li>
                
                <li><a href="#M004212">putline</a>,</li>
                
                <li><a href="#M004232">puttextfile</a>,</li>
                
                <li><a href="#M004246">pwd</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M004253">quit</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M004239">rename</a>,</li>
                
                <li><a href="#M004224">retrbinary</a>,</li>
                
                <li><a href="#M004225">retrlines</a>,</li>
                
                <li><a href="#M004206">return_code</a>,</li>
                
                <li><a href="#M004207">return_code=</a>,</li>
                
                <li><a href="#M004245">rmdir</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M004211">sanitize</a>,</li>
                
                <li><a href="#M004204">send_type_command</a>,</li>
                
                <li><a href="#M004217">sendcmd</a>,</li>
                
                <li><a href="#M004219">sendport</a>,</li>
                
                <li><a href="#M004210">set_socket</a>,</li>
                
                <li><a href="#M004255">site</a>,</li>
                
                <li><a href="#M004242">size</a>,</li>
                
                <li><a href="#M004250">status</a>,</li>
                
                <li><a href="#M004226">storbinary</a>,</li>
                
                <li><a href="#M004227">storlines</a>,</li>
                
                <li><a href="#M004248">system</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M004222">transfercmd</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M004218">voidcmd</a>,</li>
                
                <li><a href="#M004216">voidresp</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M004205">with_binary</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Kernel.html">Kernel</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>binary</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, transfers are performed in binary mode. Default:
<tt>true</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>passive</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, the connection is in passive mode. Default:
<tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>debug_mode</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, all traffic to and from the server is written to
+$stdout+. Default: <tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>resume</td>
            <td class='attr-desc'><p>
Sets or retrieves the <tt>resume</tt> status, which decides whether
incomplete transfers are resumed or restarted. Default: <tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>welcome</td>
            <td class='attr-desc'><p>
The server&#8217;s welcome message.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>last_response_code</td>
            <td class='attr-desc'><p>
The server&#8217;s last response code.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>last_response</td>
            <td class='attr-desc'><p>
The server&#8217;s last response.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M004202">
                    
                    <a name="M004202"></a><b>new</b>(host = nil, user = nil, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Creates and returns a new <tt>FTP</tt> object. If a <tt>host</tt> is given,
a connection is made. Additionally, if the <tt>user</tt> is given, the
given user name, password, and (optionally) account are used to log in. See
<a href="FTP.html#M004223">login</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004202_source')" id="l_M004202_source">show</a>
                        
                    </p>
                    <div id="M004202_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 130</span>
130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
131:       <span class="ruby-keyword kw">super</span>()
132:       <span class="ruby-ivar">@binary</span> = <span class="ruby-keyword kw">true</span>
133:       <span class="ruby-ivar">@passive</span> = <span class="ruby-keyword kw">false</span>
134:       <span class="ruby-ivar">@debug_mode</span> = <span class="ruby-keyword kw">false</span>
135:       <span class="ruby-ivar">@resume</span> = <span class="ruby-keyword kw">false</span>
136:       <span class="ruby-ivar">@sock</span> = <span class="ruby-constant">NullSocket</span>.<span class="ruby-identifier">new</span>
137:       <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword kw">false</span>
138:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host</span>
139:         <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>)
140:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span>
141:           <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
142:         <span class="ruby-keyword kw">end</span>
143:       <span class="ruby-keyword kw">end</span>
144:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004201">
                    
                    <a name="M004201"></a><b>open</b>(host, user = nil, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="../A.html">A</a> synonym for <tt><a
href="FTP.html#M004202">FTP.new</a></tt>, but with a mandatory host
parameter.
</p>
<p>
If a block is given, it is passed the <tt>FTP</tt> object, which will be
closed when the block finishes, or when an exception is raised.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004201_source')" id="l_M004201_source">show</a>
                        
                    </p>
                    <div id="M004201_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FTP</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
113:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
114:         <span class="ruby-identifier">ftp</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
115:         <span class="ruby-keyword kw">begin</span>
116:           <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">ftp</span>
117:         <span class="ruby-keyword kw">ensure</span>
118:           <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">close</span>
119:         <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-keyword kw">else</span>
121:         <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
122:       <span class="ruby-keyword kw">end</span>
123:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M004249">
                    
                    <a name="M004249"></a><b>abort</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Aborts the previous command (ABOR command).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004249_source')" id="l_M004249_source">show</a>
                        
                    </p>
                    <div id="M004249_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 797</span>
797:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abort</span>
798:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;ABOR&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
799:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: ABOR\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
800:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
801:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getmultiline</span>
802:       <span class="ruby-keyword kw">unless</span> [<span class="ruby-value str">&quot;426&quot;</span>, <span class="ruby-value str">&quot;226&quot;</span>, <span class="ruby-value str">&quot;225&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>])
803:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
804:       <span class="ruby-keyword kw">end</span>
805:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>
806:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004234">
                    
                    <a name="M004234"></a><b>acct</b>(account)
                    
                </div>
                
                <div class="description">
                  <p>
Sends the ACCT command. TODO: more info.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004234_source')" id="l_M004234_source">show</a>
                        
                    </p>
                    <div id="M004234_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 649</span>
649:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">acct</span>(<span class="ruby-identifier">account</span>)
650:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;ACCT &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">account</span>
651:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
652:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004203">
                    
                    <a name="M004203"></a><b>binary=</b>(newmode)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004203_source')" id="l_M004203_source">show</a>
                        
                    </p>
                    <div id="M004203_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 146</span>
146:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">binary=</span>(<span class="ruby-identifier">newmode</span>)
147:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">newmode</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@binary</span>
148:         <span class="ruby-ivar">@binary</span> = <span class="ruby-identifier">newmode</span>
149:         <span class="ruby-identifier">send_type_command</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@logged_in</span>
150:       <span class="ruby-keyword kw">end</span>
151:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004241">
                    
                    <a name="M004241"></a><b>chdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Changes the (remote) directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004241_source')" id="l_M004241_source">show</a>
                        
                    </p>
                    <div id="M004241_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 719</span>
719:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dirname</span>)
720:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dirname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;..&quot;</span>
721:         <span class="ruby-keyword kw">begin</span>
722:           <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;CDUP&quot;</span>)
723:           <span class="ruby-keyword kw">return</span>
724:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">FTPPermError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
725:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;500&quot;</span>
726:             <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
727:           <span class="ruby-keyword kw">end</span>
728:         <span class="ruby-keyword kw">end</span>
729:       <span class="ruby-keyword kw">end</span>
730:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;CWD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>
731:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
732:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004256">
                    
                    <a name="M004256"></a><b>close</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Closes the connection. Further operations are impossible until you open a
new connection with <a href="FTP.html#M004209">connect</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004256_source')" id="l_M004256_source">show</a>
                        
                    </p>
                    <div id="M004256_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 865</span>
865:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
866:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@sock</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
867:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004257">
                    
                    <a name="M004257"></a><b>closed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> iff the connection is closed.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004257_source')" id="l_M004257_source">show</a>
                        
                    </p>
                    <div id="M004257_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 872</span>
872:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>
873:       <span class="ruby-ivar">@sock</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
874:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004209">
                    
                    <a name="M004209"></a><b>connect</b>(host, port = FTP_PORT)
                    
                </div>
                
                <div class="description">
                  <p>
Establishes an <a href="FTP.html">FTP</a> connection to host, optionally
overriding the default port. If the environment variable
<tt>SOCKS_SERVER</tt> is set, sets up the connection through a SOCKS proxy.
Raises an exception (typically <tt>Errno::ECONNREFUSED</tt>) if the
connection cannot be established.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004209_source')" id="l_M004209_source">show</a>
                        
                    </p>
                    <div id="M004209_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-constant">FTP_PORT</span>)
201:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
202:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;connect: &quot;</span>, <span class="ruby-identifier">host</span>, <span class="ruby-value str">&quot;, &quot;</span>, <span class="ruby-identifier">port</span>, <span class="ruby-value str">&quot;\n&quot;</span>
203:       <span class="ruby-keyword kw">end</span>
204:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
205:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
206:         <span class="ruby-identifier">voidresp</span>
207:       <span class="ruby-keyword kw">end</span>
208:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004240">
                    
                    <a name="M004240"></a><b>delete</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Deletes a file on the server.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004240_source')" id="l_M004240_source">show</a>
                        
                    </p>
                    <div id="M004240_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 705</span>
705:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">filename</span>)
706:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;DELE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
707:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;250&quot;</span>
708:         <span class="ruby-keyword kw">return</span>
709:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?5</span>
710:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-identifier">resp</span>
711:       <span class="ruby-keyword kw">else</span>
712:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
713:       <span class="ruby-keyword kw">end</span>
714:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004238">
                    
                    <a name="M004238"></a><b>dir</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M004236">list</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M004230">
                    
                    <a name="M004230"></a><b>get</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in whatever mode the session is set (text or
binary). See <a href="FTP.html#M004229">gettextfile</a> and <a
href="FTP.html#M004228">getbinaryfile</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004230_source')" id="l_M004230_source">show</a>
                        
                    </p>
                    <div id="M004230_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 581</span>
581:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
582:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
583:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@binary</span>
584:         <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
585:       <span class="ruby-keyword kw">else</span>
586:         <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
587:       <span class="ruby-keyword kw">end</span>
588:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004228">
                    
                    <a name="M004228"></a><b>getbinaryfile</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in binary mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data in
<tt>blocksize</tt> chunks.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004228_source')" id="l_M004228_source">show</a>
                        
                    </p>
                    <div id="M004228_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 523</span>
523:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
524:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>) <span class="ruby-comment cmt"># :yield: data</span>
525:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
526:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
527:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
528:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">size?</span>(<span class="ruby-identifier">localfile</span>)
529:           <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;a&quot;</span>)
530:         <span class="ruby-keyword kw">else</span>
531:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
532:           <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
533:         <span class="ruby-keyword kw">end</span>
534:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
535:         <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&quot;</span>
536:       <span class="ruby-keyword kw">end</span>
537:       <span class="ruby-keyword kw">begin</span>
538:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
539:         <span class="ruby-identifier">retrbinary</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
540:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
541:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
542:           <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>
543:         <span class="ruby-keyword kw">end</span>
544:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
545:       <span class="ruby-keyword kw">ensure</span>
546:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
547:       <span class="ruby-keyword kw">end</span>
548:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004247">
                    
                    <a name="M004247"></a><b>getdir</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M004246">pwd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M004229">
                    
                    <a name="M004229"></a><b>gettextfile</b>(remotefile, localfile = File.basename(remotefile))
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in ASCII (text) mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data one line at a time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004229_source')" id="l_M004229_source">show</a>
                        
                    </p>
                    <div id="M004229_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 557</span>
557:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>)) <span class="ruby-comment cmt"># :yield: line</span>
558:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
559:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
560:         <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
561:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
562:         <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&quot;</span>
563:       <span class="ruby-keyword kw">end</span>
564:       <span class="ruby-keyword kw">begin</span>
565:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span><span class="ruby-operator">|</span>
566:           <span class="ruby-identifier">l</span> = <span class="ruby-identifier">newline</span> <span class="ruby-value">? </span><span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
567:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
568:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
569:           <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>
570:         <span class="ruby-keyword kw">end</span>
571:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
572:       <span class="ruby-keyword kw">ensure</span>
573:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
574:       <span class="ruby-keyword kw">end</span>
575:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004252">
                    
                    <a name="M004252"></a><b>help</b>(arg = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Issues the HELP command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004252_source')" id="l_M004252_source">show</a>
                        
                    </p>
                    <div id="M004252_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 831</span>
831:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>(<span class="ruby-identifier">arg</span> = <span class="ruby-keyword kw">nil</span>)
832:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;HELP&quot;</span>
833:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>
834:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
835:       <span class="ruby-keyword kw">end</span>
836:       <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
837:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004236">
                    
                    <a name="M004236"></a><b>list</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of file information in the directory (the output is like
`ls -l`). If a block is given, it iterates through the listing.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FTP.html#M004237">ls</a>
                    
                    <a href="FTP.html#M004238">dir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004236_source')" id="l_M004236_source">show</a>
                        
                    </p>
                    <div id="M004236_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 673</span>
673:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
674:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;LIST&quot;</span>
675:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
676:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
677:       <span class="ruby-keyword kw">end</span>
678:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
679:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
680:       <span class="ruby-keyword kw">else</span>
681:         <span class="ruby-identifier">lines</span> = []
682:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
683:           <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
684:         <span class="ruby-keyword kw">end</span>
685:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">lines</span>
686:       <span class="ruby-keyword kw">end</span>
687:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004223">
                    
                    <a name="M004223"></a><b>login</b>(user = &quot;anonymous&quot;, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Logs in to the remote host. The session must have been previously
connected. If <tt>user</tt> is the string &#8220;anonymous&#8221; and the
<tt>password</tt> is <tt>nil</tt>, a password of <tt>user@host</tt> is
synthesized. If the <tt>acct</tt> parameter is not <tt>nil</tt>, an <a
href="FTP.html">FTP</a> ACCT command is sent following the successful
login. Raises an exception on error (typically <tt>Net::FTPPermError</tt>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004223_source')" id="l_M004223_source">show</a>
                        
                    </p>
                    <div id="M004223_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 386</span>
386:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span> = <span class="ruby-value str">&quot;anonymous&quot;</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
387:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;anonymous&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">passwd</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
388:         <span class="ruby-identifier">passwd</span> = <span class="ruby-value str">&quot;anonymous@&quot;</span>
389:       <span class="ruby-keyword kw">end</span>
390: 
391:       <span class="ruby-identifier">resp</span> = <span class="ruby-value str">&quot;&quot;</span>
392:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
393:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'USER '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user</span>)
394:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
395:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">passwd</span>.<span class="ruby-identifier">nil?</span>
396:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'PASS '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">passwd</span>)
397:         <span class="ruby-keyword kw">end</span>
398:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
399:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">acct</span>.<span class="ruby-identifier">nil?</span>
400:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'ACCT '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">acct</span>)
401:         <span class="ruby-keyword kw">end</span>
402:       <span class="ruby-keyword kw">end</span>
403:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?2</span>
404:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
405:       <span class="ruby-keyword kw">end</span>
406:       <span class="ruby-ivar">@welcome</span> = <span class="ruby-identifier">resp</span>
407:       <span class="ruby-identifier">send_type_command</span>
408:       <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword kw">true</span>
409:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004237">
                    
                    <a name="M004237"></a><b>ls</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M004236">list</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M004251">
                    
                    <a name="M004251"></a><b>mdtm</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Issues the MDTM command. TODO: more info.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004251_source')" id="l_M004251_source">show</a>
                        
                    </p>
                    <div id="M004251_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 821</span>
821:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
822:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MDTM &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
823:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;213&quot;</span>
824:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>
825:       <span class="ruby-keyword kw">end</span>
826:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004244">
                    
                    <a name="M004244"></a><b>mkdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004244_source')" id="l_M004244_source">show</a>
                        
                    </p>
                    <div id="M004244_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 762</span>
762:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">dirname</span>)
763:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MKD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
764:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
765:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004243">
                    
                    <a name="M004243"></a><b>mtime</b>(filename, local = false)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the last modification time of the (remote) file. If <tt>local</tt>
is <tt>true</tt>, it is returned as a local time, otherwise it&#8217;s a
UTC time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004243_source')" id="l_M004243_source">show</a>
                        
                    </p>
                    <div id="M004243_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 753</span>
753:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">local</span> = <span class="ruby-keyword kw">false</span>)
754:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
755:       <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MDTM_REGEXP</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>}
756:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">local</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">gm</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>)
757:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004235">
                    
                    <a name="M004235"></a><b>nlst</b>(dir = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of filenames in the remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004235_source')" id="l_M004235_source">show</a>
                        
                    </p>
                    <div id="M004235_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 657</span>
657:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nlst</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-keyword kw">nil</span>)
658:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;NLST&quot;</span>
659:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>
660:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dir</span>
661:       <span class="ruby-keyword kw">end</span>
662:       <span class="ruby-identifier">files</span> = []
663:       <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
664:         <span class="ruby-identifier">files</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
665:       <span class="ruby-keyword kw">end</span>
666:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">files</span>
667:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004254">
                    
                    <a name="M004254"></a><b>noop</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Issues a NOOP command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004254_source')" id="l_M004254_source">show</a>
                        
                    </p>
                    <div id="M004254_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 849</span>
849:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noop</span>
850:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;NOOP&quot;</span>)
851:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004233">
                    
                    <a name="M004233"></a><b>put</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in whatever mode the session is
set (text or binary). See <a href="FTP.html#M004232">puttextfile</a> and <a
href="FTP.html#M004231">putbinaryfile</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004233_source')" id="l_M004233_source">show</a>
                        
                    </p>
                    <div id="M004233_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 637</span>
637:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">put</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
638:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
639:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@binary</span>
640:         <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
641:       <span class="ruby-keyword kw">else</span>
642:         <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
643:       <span class="ruby-keyword kw">end</span>
644:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004231">
                    
                    <a name="M004231"></a><b>putbinaryfile</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in binary mode, storing the
result in <tt>remotefile</tt>. If a block is supplied, calls it, passing in
the transmitted data in <tt>blocksize</tt> chunks.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004231_source')" id="l_M004231_source">show</a>
                        
                    </p>
                    <div id="M004231_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 595</span>
595:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
596:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
597:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
598:         <span class="ruby-keyword kw">begin</span>
599:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-identifier">size</span>(<span class="ruby-identifier">remotefile</span>)
600:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">FTPPermError</span>
601:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
602:         <span class="ruby-keyword kw">end</span>
603:       <span class="ruby-keyword kw">else</span>
604:         <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
605:       <span class="ruby-keyword kw">end</span>
606:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
607:       <span class="ruby-keyword kw">begin</span>
608:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span>
609:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest_offset</span>
610:           <span class="ruby-identifier">storbinary</span>(<span class="ruby-value str">&quot;APPE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
611:         <span class="ruby-keyword kw">else</span>
612:           <span class="ruby-identifier">storbinary</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
613:         <span class="ruby-keyword kw">end</span>
614:       <span class="ruby-keyword kw">ensure</span>
615:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
616:       <span class="ruby-keyword kw">end</span>
617:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004232">
                    
                    <a name="M004232"></a><b>puttextfile</b>(localfile, remotefile = File.basename(localfile))
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in ASCII (text) mode, storing
the result in <tt>remotefile</tt>. If callback or an associated block is
supplied, calls it, passing in the transmitted data one line at a time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004232_source')" id="l_M004232_source">show</a>
                        
                    </p>
                    <div id="M004232_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 624</span>
624:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
625:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
626:       <span class="ruby-keyword kw">begin</span>
627:         <span class="ruby-identifier">storlines</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
628:       <span class="ruby-keyword kw">ensure</span>
629:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
630:       <span class="ruby-keyword kw">end</span>
631:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004246">
                    
                    <a name="M004246"></a><b>pwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current remote directory.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FTP.html#M004247">getdir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004246_source')" id="l_M004246_source">show</a>
                        
                    </p>
                    <div id="M004246_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 777</span>
777:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
778:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;PWD&quot;</span>)
779:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
780:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004253">
                    
                    <a name="M004253"></a><b>quit</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Exits the <a href="FTP.html">FTP</a> session.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004253_source')" id="l_M004253_source">show</a>
                        
                    </p>
                    <div id="M004253_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 842</span>
842:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quit</span>
843:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;QUIT&quot;</span>)
844:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004239">
                    
                    <a name="M004239"></a><b>rename</b>(fromname, toname)
                    
                </div>
                
                <div class="description">
                  <p>
Renames a file on the server.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004239_source')" id="l_M004239_source">show</a>
                        
                    </p>
                    <div id="M004239_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 694</span>
694:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">fromname</span>, <span class="ruby-identifier">toname</span>)
695:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;RNFR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">fromname</span>)
696:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?3</span>
697:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
698:       <span class="ruby-keyword kw">end</span>
699:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RNTO &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">toname</span>)
700:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004224">
                    
                    <a name="M004224"></a><b>retrbinary</b>(cmd, blocksize, rest_offset = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<tt>blocksize</tt> characters. Note that <tt>cmd</tt> is a server command
(such as &#8220;RETR myfile&#8221;).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004224_source')" id="l_M004224_source">show</a>
                        
                    </p>
                    <div id="M004224_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 417</span>
417:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>) <span class="ruby-comment cmt"># :yield: data</span>
418:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
419:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
420:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span>)
421:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
422:             <span class="ruby-identifier">data</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
423:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
424:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>)
425:           <span class="ruby-keyword kw">end</span>
426:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
427:           <span class="ruby-identifier">voidresp</span>
428:         <span class="ruby-keyword kw">end</span>
429:       <span class="ruby-keyword kw">end</span>
430:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004225">
                    
                    <a name="M004225"></a><b>retrlines</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block. If
no block is given, prints the lines. Note that <tt>cmd</tt> is a server
command (such as &#8220;RETR myfile&#8221;).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004225_source')" id="l_M004225_source">show</a>
                        
                    </p>
                    <div id="M004225_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 438</span>
438:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-comment cmt"># :yield: line</span>
439:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
440:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">do</span>
441:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
442:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
443:             <span class="ruby-identifier">line</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">gets</span>
444:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
445:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\r?\n\z/</span>, <span class="ruby-value str">&quot;&quot;</span>), <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/\n\z/</span>).<span class="ruby-identifier">nil?</span>)
446:           <span class="ruby-keyword kw">end</span>
447:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
448:           <span class="ruby-identifier">voidresp</span>
449:         <span class="ruby-keyword kw">end</span>
450:       <span class="ruby-keyword kw">end</span>
451:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004206">
                    
                    <a name="M004206"></a><b>return_code</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Obsolete
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004206_source')" id="l_M004206_source">show</a>
                        
                    </p>
                    <div id="M004206_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">return_code</span>
175:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-value str">&quot;warning: Net::FTP#return_code is obsolete and do nothing&quot;</span>)
176:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;\n&quot;</span>
177:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004207">
                    
                    <a name="M004207"></a><b>return_code=</b>(s)
                    
                </div>
                
                <div class="description">
                  <p>
Obsolete
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004207_source')" id="l_M004207_source">show</a>
                        
                    </p>
                    <div id="M004207_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 180</span>
180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">return_code=</span>(<span class="ruby-identifier">s</span>)
181:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-value str">&quot;warning: Net::FTP#return_code= is obsolete and do nothing&quot;</span>)
182:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004245">
                    
                    <a name="M004245"></a><b>rmdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004245_source')" id="l_M004245_source">show</a>
                        
                    </p>
                    <div id="M004245_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 770</span>
770:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dirname</span>)
771:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RMD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
772:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004217">
                    
                    <a name="M004217"></a><b>sendcmd</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Sends a command and returns the response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004217_source')" id="l_M004217_source">show</a>
                        
                    </p>
                    <div id="M004217_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 291</span>
291:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
292:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
293:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
294:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
295:       <span class="ruby-keyword kw">end</span>
296:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004210">
                    
                    <a name="M004210"></a><b>set_socket</b>(sock, get_greeting = true)
                    
                </div>
                
                <div class="description">
                  <p>
WRITEME or make private
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004210_source')" id="l_M004210_source">show</a>
                        
                    </p>
                    <div id="M004210_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 213</span>
213:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_socket</span>(<span class="ruby-identifier">sock</span>, <span class="ruby-identifier">get_greeting</span> = <span class="ruby-keyword kw">true</span>)
214:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
215:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">sock</span>
216:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_greeting</span>
217:           <span class="ruby-identifier">voidresp</span>
218:         <span class="ruby-keyword kw">end</span>
219:       <span class="ruby-keyword kw">end</span>
220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004255">
                    
                    <a name="M004255"></a><b>site</b>(arg)
                    
                </div>
                
                <div class="description">
                  <p>
Issues a SITE command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004255_source')" id="l_M004255_source">show</a>
                        
                    </p>
                    <div id="M004255_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 856</span>
856:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>(<span class="ruby-identifier">arg</span>)
857:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;SITE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
858:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
859:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004242">
                    
                    <a name="M004242"></a><b>size</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the given (remote) filename.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004242_source')" id="l_M004242_source">show</a>
                        
                    </p>
                    <div id="M004242_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 737</span>
737:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>(<span class="ruby-identifier">filename</span>)
738:       <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
739:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SIZE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
740:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;213&quot;</span>
741:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
742:         <span class="ruby-keyword kw">end</span>
743:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">to_i</span>
744:       <span class="ruby-keyword kw">end</span>
745:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004250">
                    
                    <a name="M004250"></a><b>status</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status (STAT command).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004250_source')" id="l_M004250_source">show</a>
                        
                    </p>
                    <div id="M004250_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 811</span>
811:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">status</span>
812:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;STAT&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
813:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: STAT\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
814:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
815:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
816:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004226">
                    
                    <a name="M004226"></a><b>storbinary</b>(cmd, file, blocksize, rest_offset = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into binary (image) mode, issues the given server-side
command (such as &#8220;STOR myfile&#8221;), and sends the contents of the
file named <tt>file</tt> to the server. If the optional block is given, it
also passes it the data, in chunks of <tt>blocksize</tt> characters.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004226_source')" id="l_M004226_source">show</a>
                        
                    </p>
                    <div id="M004226_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 459</span>
459:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
460:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest_offset</span>
461:         <span class="ruby-identifier">file</span>.<span class="ruby-identifier">seek</span>(<span class="ruby-identifier">rest_offset</span>, <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">SEEK_SET</span>)
462:       <span class="ruby-keyword kw">end</span>
463:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
464:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
465:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
466:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
467:             <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
468:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
469:             <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
470:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
471:           <span class="ruby-keyword kw">end</span>
472:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
473:           <span class="ruby-identifier">voidresp</span>
474:         <span class="ruby-keyword kw">end</span>
475:       <span class="ruby-keyword kw">end</span>
476:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
477:       <span class="ruby-comment cmt"># EPIPE, in this case, means that the data connection was unexpectedly</span>
478:       <span class="ruby-comment cmt"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
479:       <span class="ruby-comment cmt"># response on the control connection.  If getresp doesn't raise a more</span>
480:       <span class="ruby-comment cmt"># appropriate exception, re-raise the original exception.</span>
481:       <span class="ruby-identifier">getresp</span>
482:       <span class="ruby-identifier">raise</span>
483:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004227">
                    
                    <a name="M004227"></a><b>storlines</b>(cmd, file)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into ASCII (text) mode, issues the given server-side
command (such as &#8220;STOR myfile&#8221;), and sends the contents of the
file named <tt>file</tt> to the server, one line at a time. If the optional
block is given, it also passes it the lines.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004227_source')" id="l_M004227_source">show</a>
                        
                    </p>
                    <div id="M004227_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 491</span>
491:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
492:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
493:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">do</span>
494:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
495:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
496:             <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>
497:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
498:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span>[<span class="ruby-value">-2</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">CRLF</span>
499:               <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
500:             <span class="ruby-keyword kw">end</span>
501:             <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
502:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
503:           <span class="ruby-keyword kw">end</span>
504:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
505:           <span class="ruby-identifier">voidresp</span>
506:         <span class="ruby-keyword kw">end</span>
507:       <span class="ruby-keyword kw">end</span>
508:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
509:       <span class="ruby-comment cmt"># EPIPE, in this case, means that the data connection was unexpectedly</span>
510:       <span class="ruby-comment cmt"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
511:       <span class="ruby-comment cmt"># response on the control connection.  If getresp doesn't raise a more</span>
512:       <span class="ruby-comment cmt"># appropriate exception, re-raise the original exception.</span>
513:       <span class="ruby-identifier">getresp</span>
514:       <span class="ruby-identifier">raise</span>
515:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004248">
                    
                    <a name="M004248"></a><b>system</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns system information.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004248_source')" id="l_M004248_source">show</a>
                        
                    </p>
                    <div id="M004248_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 786</span>
786:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">system</span>
787:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SYST&quot;</span>)
788:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;215&quot;</span>
789:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
790:       <span class="ruby-keyword kw">end</span>
791:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">4</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>]
792:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004218">
                    
                    <a name="M004218"></a><b>voidcmd</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Sends a command and expect a response beginning with &#8216;2&#8217;.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004218_source')" id="l_M004218_source">show</a>
                        
                    </p>
                    <div id="M004218_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 301</span>
301:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
302:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
303:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
304:         <span class="ruby-identifier">voidresp</span>
305:       <span class="ruby-keyword kw">end</span>
306:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M004213">
                    
                    <a name="M004213"></a><b>getline</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004213_source')" id="l_M004213_source">show</a>
                        
                    </p>
                    <div id="M004213_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 240</span>
240:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getline</span>
241:       <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">readline</span> <span class="ruby-comment cmt"># if get EOF, raise EOFError</span>
242:       <span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)\z/n</span>, <span class="ruby-value str">&quot;&quot;</span>)
243:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
244:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;get: &quot;</span>, <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">line</span>), <span class="ruby-value str">&quot;\n&quot;</span>
245:       <span class="ruby-keyword kw">end</span>
246:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">line</span>
247:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004214">
                    
                    <a name="M004214"></a><b>getmultiline</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004214_source')" id="l_M004214_source">show</a>
                        
                    </p>
                    <div id="M004214_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 250</span>
250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getmultiline</span>
251:       <span class="ruby-identifier">line</span> = <span class="ruby-identifier">getline</span>
252:       <span class="ruby-identifier">buff</span> = <span class="ruby-identifier">line</span>
253:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?-</span>
254:           <span class="ruby-identifier">code</span> = <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>]
255:         <span class="ruby-keyword kw">begin</span>
256:           <span class="ruby-identifier">line</span> = <span class="ruby-identifier">getline</span>
257:           <span class="ruby-identifier">buff</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
258:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">code</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?-</span>
259:       <span class="ruby-keyword kw">end</span>
260:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">buff</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
261:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004215">
                    
                    <a name="M004215"></a><b>getresp</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004215_source')" id="l_M004215_source">show</a>
                        
                    </p>
                    <div id="M004215_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 264</span>
264:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getresp</span>
265:       <span class="ruby-ivar">@last_response</span> = <span class="ruby-identifier">getmultiline</span>
266:       <span class="ruby-ivar">@last_response_code</span> = <span class="ruby-ivar">@last_response</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>]
267:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@last_response_code</span>
268:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\A[123]/</span>
269:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@last_response</span>
270:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\A4/</span>
271:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPTempError</span>, <span class="ruby-ivar">@last_response</span>
272:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\A5/</span>
273:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-ivar">@last_response</span>
274:       <span class="ruby-keyword kw">else</span>
275:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-ivar">@last_response</span>
276:       <span class="ruby-keyword kw">end</span>
277:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004221">
                    
                    <a name="M004221"></a><b>makepasv</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004221_source')" id="l_M004221_source">show</a>
                        
                    </p>
                    <div id="M004221_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 330</span>
330:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">makepasv</span>
331:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">peeraddr</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;AF_INET&quot;</span>
332:         <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-identifier">parse227</span>(<span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;PASV&quot;</span>))
333:       <span class="ruby-keyword kw">else</span>
334:         <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-identifier">parse229</span>(<span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;EPSV&quot;</span>))
335:         <span class="ruby-comment cmt">#     host, port = parse228(sendcmd(&quot;LPSV&quot;))</span>
336:       <span class="ruby-keyword kw">end</span>
337:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>
338:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004220">
                    
                    <a name="M004220"></a><b>makeport</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004220_source')" id="l_M004220_source">show</a>
                        
                    </p>
                    <div id="M004220_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 321</span>
321:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">makeport</span>
322:       <span class="ruby-identifier">sock</span> = <span class="ruby-constant">TCPServer</span>.<span class="ruby-identifier">open</span>(<span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">addr</span>[<span class="ruby-value">3</span>], <span class="ruby-value">0</span>)
323:       <span class="ruby-identifier">port</span> = <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">addr</span>[<span class="ruby-value">1</span>]
324:       <span class="ruby-identifier">host</span> = <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">addr</span>[<span class="ruby-value">3</span>]
325:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendport</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
326:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sock</span>
327:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004208">
                    
                    <a name="M004208"></a><b>open_socket</b>(host, port)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004208_source')" id="l_M004208_source">show</a>
                        
                    </p>
                    <div id="M004208_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 184</span>
184:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
185:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">SOCKSSocket</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">&quot;SOCKS_SERVER&quot;</span>]
186:         <span class="ruby-ivar">@passive</span> = <span class="ruby-keyword kw">true</span>
187:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">SOCKSSocket</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
188:       <span class="ruby-keyword kw">else</span>
189:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">TCPSocket</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
190:       <span class="ruby-keyword kw">end</span>
191:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004258">
                    
                    <a name="M004258"></a><b>parse227</b>(resp)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004258_source')" id="l_M004258_source">show</a>
                        
                    </p>
                    <div id="M004258_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 876</span>
876:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse227</span>(<span class="ruby-identifier">resp</span>)
877:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;227&quot;</span>
878:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
879:       <span class="ruby-keyword kw">end</span>
880:       <span class="ruby-identifier">left</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;(&quot;</span>)
881:       <span class="ruby-identifier">right</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;)&quot;</span>)
882:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">left</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
883:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
884:       <span class="ruby-keyword kw">end</span>
885:       <span class="ruby-identifier">numbers</span> = <span class="ruby-identifier">resp</span>[<span class="ruby-identifier">left</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>)
886:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">numbers</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">6</span>
887:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
888:       <span class="ruby-keyword kw">end</span>
889:       <span class="ruby-identifier">host</span> = <span class="ruby-identifier">numbers</span>[<span class="ruby-value">0</span>, <span class="ruby-value">4</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;.&quot;</span>)
890:       <span class="ruby-identifier">port</span> = (<span class="ruby-identifier">numbers</span>[<span class="ruby-value">4</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">5</span>].<span class="ruby-identifier">to_i</span>
891:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>
892:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004259">
                    
                    <a name="M004259"></a><b>parse228</b>(resp)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004259_source')" id="l_M004259_source">show</a>
                        
                    </p>
                    <div id="M004259_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 895</span>
895:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse228</span>(<span class="ruby-identifier">resp</span>)
896:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;228&quot;</span>
897:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
898:       <span class="ruby-keyword kw">end</span>
899:       <span class="ruby-identifier">left</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;(&quot;</span>)
900:       <span class="ruby-identifier">right</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;)&quot;</span>)
901:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">left</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
902:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
903:       <span class="ruby-keyword kw">end</span>
904:       <span class="ruby-identifier">numbers</span> = <span class="ruby-identifier">resp</span>[<span class="ruby-identifier">left</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>)
905:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;4&quot;</span>
906:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">numbers</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">9</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;4&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">2</span> <span class="ruby-operator">+</span> <span class="ruby-value">4</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;2&quot;</span>
907:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
908:         <span class="ruby-keyword kw">end</span>
909:         <span class="ruby-identifier">host</span> = <span class="ruby-identifier">numbers</span>[<span class="ruby-value">2</span>, <span class="ruby-value">4</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;.&quot;</span>)
910:         <span class="ruby-identifier">port</span> = (<span class="ruby-identifier">numbers</span>[<span class="ruby-value">7</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">8</span>].<span class="ruby-identifier">to_i</span>
911:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;6&quot;</span>
912:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">numbers</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">21</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;16&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">2</span> <span class="ruby-operator">+</span> <span class="ruby-value">16</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;2&quot;</span>
913:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
914:         <span class="ruby-keyword kw">end</span>
915:         <span class="ruby-identifier">v6</span> = [<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>]
916:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span> <span class="ruby-operator">..</span> <span class="ruby-value">7</span>
917:           <span class="ruby-identifier">v6</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%02x%02x&quot;</span>, <span class="ruby-identifier">numbers</span>[(<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-operator">+</span> <span class="ruby-value">2</span>].<span class="ruby-identifier">to_i</span>,
918:                           <span class="ruby-identifier">numbers</span>[(<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-operator">+</span> <span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>)
919:         <span class="ruby-keyword kw">end</span>
920:         <span class="ruby-identifier">host</span> = <span class="ruby-identifier">v6</span>[<span class="ruby-value">0</span>, <span class="ruby-value">8</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;:&quot;</span>)
921:         <span class="ruby-identifier">port</span> = (<span class="ruby-identifier">numbers</span>[<span class="ruby-value">19</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">numbers</span>[<span class="ruby-value">20</span>].<span class="ruby-identifier">to_i</span>
922:       <span class="ruby-keyword kw">end</span>
923:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>
924:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004260">
                    
                    <a name="M004260"></a><b>parse229</b>(resp)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004260_source')" id="l_M004260_source">show</a>
                        
                    </p>
                    <div id="M004260_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 927</span>
927:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse229</span>(<span class="ruby-identifier">resp</span>)
928:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;229&quot;</span>
929:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
930:       <span class="ruby-keyword kw">end</span>
931:       <span class="ruby-identifier">left</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;(&quot;</span>)
932:       <span class="ruby-identifier">right</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;)&quot;</span>)
933:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">left</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
934:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
935:       <span class="ruby-keyword kw">end</span>
936:       <span class="ruby-identifier">numbers</span> = <span class="ruby-identifier">resp</span>[<span class="ruby-identifier">left</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-identifier">right</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-identifier">left</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>])
937:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">numbers</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">4</span>
938:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
939:       <span class="ruby-keyword kw">end</span>
940:       <span class="ruby-identifier">port</span> = <span class="ruby-identifier">numbers</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>
941:       <span class="ruby-identifier">host</span> = (<span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">peeraddr</span>())[<span class="ruby-value">3</span>]
942:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>
943:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004261">
                    
                    <a name="M004261"></a><b>parse257</b>(resp)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004261_source')" id="l_M004261_source">show</a>
                        
                    </p>
                    <div id="M004261_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 946</span>
946:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
947:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;257&quot;</span>
948:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
949:       <span class="ruby-keyword kw">end</span>
950:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">' &quot;'</span>
951:         <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
952:       <span class="ruby-keyword kw">end</span>
953:       <span class="ruby-identifier">dirname</span> = <span class="ruby-value str">&quot;&quot;</span>
954:       <span class="ruby-identifier">i</span> = <span class="ruby-value">5</span>
955:       <span class="ruby-identifier">n</span> = <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">length</span>
956:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">n</span>
957:         <span class="ruby-identifier">c</span> = <span class="ruby-identifier">resp</span>[<span class="ruby-identifier">i</span>, <span class="ruby-value">1</span>]
958:         <span class="ruby-identifier">i</span> = <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
959:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'&quot;'</span>
960:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">n</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">resp</span>[<span class="ruby-identifier">i</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">'&quot;'</span>
961:             <span class="ruby-keyword kw">break</span>
962:           <span class="ruby-keyword kw">end</span>
963:           <span class="ruby-identifier">i</span> = <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
964:         <span class="ruby-keyword kw">end</span>
965:         <span class="ruby-identifier">dirname</span> = <span class="ruby-identifier">dirname</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>
966:       <span class="ruby-keyword kw">end</span>
967:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">dirname</span>
968:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004212">
                    
                    <a name="M004212"></a><b>putline</b>(line)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004212_source')" id="l_M004212_source">show</a>
                        
                    </p>
                    <div id="M004212_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 231</span>
231:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">line</span>)
232:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
233:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: &quot;</span>, <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">line</span>), <span class="ruby-value str">&quot;\n&quot;</span>
234:       <span class="ruby-keyword kw">end</span>
235:       <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
236:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">line</span>)
237:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004211">
                    
                    <a name="M004211"></a><b>sanitize</b>(s)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004211_source')" id="l_M004211_source">show</a>
                        
                    </p>
                    <div id="M004211_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 222</span>
222:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">s</span>)
223:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^PASS /i</span>
224:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>[<span class="ruby-value">0</span>, <span class="ruby-value">5</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;*&quot;</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">5</span>)
225:       <span class="ruby-keyword kw">else</span>
226:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>
227:       <span class="ruby-keyword kw">end</span>
228:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004204">
                    
                    <a name="M004204"></a><b>send_type_command</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004204_source')" id="l_M004204_source">show</a>
                        
                    </p>
                    <div id="M004204_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_type_command</span>
154:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@binary</span>
155:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE I&quot;</span>)
156:       <span class="ruby-keyword kw">else</span>
157:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE A&quot;</span>)
158:       <span class="ruby-keyword kw">end</span>
159:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004219">
                    
                    <a name="M004219"></a><b>sendport</b>(host, port)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004219_source')" id="l_M004219_source">show</a>
                        
                    </p>
                    <div id="M004219_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 308</span>
308:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sendport</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
309:       <span class="ruby-identifier">af</span> = (<span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">peeraddr</span>)[<span class="ruby-value">0</span>]
310:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">af</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;AF_INET&quot;</span>
311:         <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;PORT &quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">host</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;.&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">port</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-value">256</span>)).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)
312:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">af</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;AF_INET6&quot;</span>
313:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;EPRT |2|%s|%d|&quot;</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
314:       <span class="ruby-keyword kw">else</span>
315:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">host</span>
316:       <span class="ruby-keyword kw">end</span>
317:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
318:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004222">
                    
                    <a name="M004222"></a><b>transfercmd</b>(cmd, rest_offset = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004222_source')" id="l_M004222_source">show</a>
                        
                    </p>
                    <div id="M004222_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 341</span>
341:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>)
342:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@passive</span>
343:         <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-identifier">makepasv</span>
344:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
345:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">rest_offset</span>
346:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;REST &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rest_offset</span>.<span class="ruby-identifier">to_s</span>)
347:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?3</span>
348:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
349:           <span class="ruby-keyword kw">end</span>
350:         <span class="ruby-keyword kw">end</span>
351:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
352:         <span class="ruby-comment cmt"># skip 2XX for some ftp servers</span>
353:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getresp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?2</span>
354:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?1</span>
355:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
356:         <span class="ruby-keyword kw">end</span>
357:       <span class="ruby-keyword kw">else</span>
358:         <span class="ruby-identifier">sock</span> = <span class="ruby-identifier">makeport</span>
359:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">rest_offset</span>
360:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;REST &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rest_offset</span>.<span class="ruby-identifier">to_s</span>)
361:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?3</span>
362:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
363:           <span class="ruby-keyword kw">end</span>
364:         <span class="ruby-keyword kw">end</span>
365:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
366:         <span class="ruby-comment cmt"># skip 2XX for some ftp servers</span>
367:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getresp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?2</span>
368:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?1</span>
369:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
370:         <span class="ruby-keyword kw">end</span>
371:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">accept</span>
372:         <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">close</span>
373:       <span class="ruby-keyword kw">end</span>
374:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">conn</span>
375:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004216">
                    
                    <a name="M004216"></a><b>voidresp</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004216_source')" id="l_M004216_source">show</a>
                        
                    </p>
                    <div id="M004216_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">voidresp</span>
281:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getresp</span>
282:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?2</span>
283:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
284:       <span class="ruby-keyword kw">end</span>
285:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004205">
                    
                    <a name="M004205"></a><b>with_binary</b>(newmode)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004205_source')" id="l_M004205_source">show</a>
                        
                    </p>
                    <div id="M004205_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 162</span>
162:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_binary</span>(<span class="ruby-identifier">newmode</span>)
163:       <span class="ruby-identifier">oldmode</span> = <span class="ruby-identifier">binary</span>
164:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">binary</span> = <span class="ruby-identifier">newmode</span>
165:       <span class="ruby-keyword kw">begin</span>
166:         <span class="ruby-keyword kw">yield</span>
167:       <span class="ruby-keyword kw">ensure</span>
168:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">binary</span> = <span class="ruby-identifier">oldmode</span>
169:       <span class="ruby-keyword kw">end</span>
170:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    