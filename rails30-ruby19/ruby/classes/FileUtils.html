<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>FileUtils</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            FileUtils 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/fileutils_rb.html">lib/fileutils.rb</a></li>
            
            <li><a href="../files/lib/un_rb.html">lib/un.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1>fileutils.rb</h1>
<p>
Copyright &#169; 2000-2007 Minero Aoki
</p>
<p>
This program is free software. You can distribute/modify this program under
the same terms of ruby.
</p>
<h2>module <a href="FileUtils.html">FileUtils</a></h2>
<p>
Namespace for several file utility methods for copying, moving, removing,
etc.
</p>
<h3><a href="Module.html">Module</a> Functions</h3>
<pre>
  cd(dir, options)
  cd(dir, options) {|dir| .... }
  pwd()
  mkdir(dir, options)
  mkdir(list, options)
  mkdir_p(dir, options)
  mkdir_p(list, options)
  rmdir(dir, options)
  rmdir(list, options)
  ln(old, new, options)
  ln(list, destdir, options)
  ln_s(old, new, options)
  ln_s(list, destdir, options)
  ln_sf(src, dest, options)
  cp(src, dest, options)
  cp(list, dir, options)
  cp_r(src, dest, options)
  cp_r(list, dir, options)
  mv(src, dest, options)
  mv(list, dir, options)
  rm(list, options)
  rm_r(list, options)
  rm_rf(list, options)
  install(src, dest, mode = &lt;src's&gt;, options)
  chmod(mode, list, options)
  chmod_R(mode, list, options)
  chown(user, group, list, options)
  chown_R(user, group, list, options)
  touch(list, options)
</pre>
<p>
The <tt>options</tt> parameter is a hash of options, taken from the list
<tt>:force</tt>, <tt>:noop</tt>, <tt>:preserve</tt>, and <tt>:verbose</tt>.
<tt>:noop</tt> means that no changes are made. The other two are obvious.
Each method documents the options that it honours.
</p>
<p>
All methods that have the concept of a &#8220;source&#8221; file or
directory can take either one file or a list of files in that argument. See
the method documentation for examples.
</p>
<p>
There are some `low level&#8217; methods, which do not accept any option:
</p>
<pre>
  copy_entry(src, dest, preserve = false, dereference = false)
  copy_file(src, dest, preserve = false, dereference = true)
  copy_stream(srcstream, deststream)
  remove_entry(path, force = false)
  remove_entry_secure(path, force = false)
  remove_file(path, force = false)
  compare_file(path_a, path_b)
  compare_stream(stream_a, stream_b)
  uptodate?(file, cmp_list)
</pre>
<h2>module <a href="FileUtils/Verbose.html">FileUtils::Verbose</a></h2>
<p>
This module has all methods of <a href="FileUtils.html">FileUtils</a>
module, but it outputs messages before acting. This equates to passing the
<tt>:verbose</tt> flag to methods in <a
href="FileUtils.html">FileUtils</a>.
</p>
<h2>module <a href="FileUtils/NoWrite.html">FileUtils::NoWrite</a></h2>
<p>
This module has all methods of <a href="FileUtils.html">FileUtils</a>
module, but never changes files/directories. This equates to passing the
<tt>:noop</tt> flag to methods in <a href="FileUtils.html">FileUtils</a>.
</p>
<h2>module <a href="FileUtils/DryRun.html">FileUtils::DryRun</a></h2>
<p>
This module has all methods of <a href="FileUtils.html">FileUtils</a>
module, but never changes files/directories. This equates to passing the
<tt>:noop</tt> and <tt>:verbose</tt> flags to methods in <a
href="FileUtils.html">FileUtils</a>.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M002038">cd</a>,</li>
                
                <li><a href="#M002038">cd</a>,</li>
                
                <li><a href="#M002039">chdir</a>,</li>
                
                <li><a href="#M002039">chdir</a>,</li>
                
                <li><a href="#M002087">chmod</a>,</li>
                
                <li><a href="#M002087">chmod</a>,</li>
                
                <li><a href="#M002088">chmod_R</a>,</li>
                
                <li><a href="#M002088">chmod_R</a>,</li>
                
                <li><a href="#M002089">chown</a>,</li>
                
                <li><a href="#M002089">chown</a>,</li>
                
                <li><a href="#M002090">chown_R</a>,</li>
                
                <li><a href="#M002090">chown_R</a>,</li>
                
                <li><a href="#M002076">cmp</a>,</li>
                
                <li><a href="#M002076">cmp</a>,</li>
                
                <li><a href="#M002112">collect_method</a>,</li>
                
                <li><a href="#M002108">commands</a>,</li>
                
                <li><a href="#M002074">compare_file</a>,</li>
                
                <li><a href="#M002074">compare_file</a>,</li>
                
                <li><a href="#M002077">compare_stream</a>,</li>
                
                <li><a href="#M002077">compare_stream</a>,</li>
                
                <li><a href="#M002053">copy</a>,</li>
                
                <li><a href="#M002053">copy</a>,</li>
                
                <li><a href="#M002055">copy_entry</a>,</li>
                
                <li><a href="#M002055">copy_entry</a>,</li>
                
                <li><a href="#M002056">copy_file</a>,</li>
                
                <li><a href="#M002056">copy_file</a>,</li>
                
                <li><a href="#M002057">copy_stream</a>,</li>
                
                <li><a href="#M002057">copy_stream</a>,</li>
                
                <li><a href="#M002052">cp</a>,</li>
                
                <li><a href="#M002052">cp</a>,</li>
                
                <li><a href="#M002054">cp_r</a>,</li>
                
                <li><a href="#M002054">cp_r</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M002069">fu_have_symlink?</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M002037">getwd</a>,</li>
                
                <li><a href="#M002037">getwd</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M002110">have_option?</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M002075">identical?</a>,</li>
                
                <li><a href="#M002075">identical?</a>,</li>
                
                <li><a href="#M002078">install</a>,</li>
                
                <li><a href="#M002078">install</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M002048">link</a>,</li>
                
                <li><a href="#M002048">link</a>,</li>
                
                <li><a href="#M002047">ln</a>,</li>
                
                <li><a href="#M002047">ln</a>,</li>
                
                <li><a href="#M002049">ln_s</a>,</li>
                
                <li><a href="#M002049">ln_s</a>,</li>
                
                <li><a href="#M002051">ln_sf</a>,</li>
                
                <li><a href="#M002051">ln_sf</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M002044">makedirs</a>,</li>
                
                <li><a href="#M002044">makedirs</a>,</li>
                
                <li><a href="#M002041">mkdir</a>,</li>
                
                <li><a href="#M002041">mkdir</a>,</li>
                
                <li><a href="#M002042">mkdir_p</a>,</li>
                
                <li><a href="#M002042">mkdir_p</a>,</li>
                
                <li><a href="#M002043">mkpath</a>,</li>
                
                <li><a href="#M002043">mkpath</a>,</li>
                
                <li><a href="#M002059">move</a>,</li>
                
                <li><a href="#M002059">move</a>,</li>
                
                <li><a href="#M002058">mv</a>,</li>
                
                <li><a href="#M002058">mv</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M002109">options</a>,</li>
                
                <li><a href="#M002111">options_of</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M002036">pwd</a>,</li>
                
                <li><a href="#M002036">pwd</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002062">remove</a>,</li>
                
                <li><a href="#M002062">remove</a>,</li>
                
                <li><a href="#M002073">remove_dir</a>,</li>
                
                <li><a href="#M002073">remove_dir</a>,</li>
                
                <li><a href="#M002071">remove_entry</a>,</li>
                
                <li><a href="#M002071">remove_entry</a>,</li>
                
                <li><a href="#M002068">remove_entry_secure</a>,</li>
                
                <li><a href="#M002068">remove_entry_secure</a>,</li>
                
                <li><a href="#M002072">remove_file</a>,</li>
                
                <li><a href="#M002072">remove_file</a>,</li>
                
                <li><a href="#M002061">rm</a>,</li>
                
                <li><a href="#M002061">rm</a>,</li>
                
                <li><a href="#M002063">rm_f</a>,</li>
                
                <li><a href="#M002063">rm_f</a>,</li>
                
                <li><a href="#M002065">rm_r</a>,</li>
                
                <li><a href="#M002065">rm_r</a>,</li>
                
                <li><a href="#M002066">rm_rf</a>,</li>
                
                <li><a href="#M002066">rm_rf</a>,</li>
                
                <li><a href="#M002046">rmdir</a>,</li>
                
                <li><a href="#M002046">rmdir</a>,</li>
                
                <li><a href="#M002067">rmtree</a>,</li>
                
                <li><a href="#M002067">rmtree</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002064">safe_unlink</a>,</li>
                
                <li><a href="#M002064">safe_unlink</a>,</li>
                
                <li><a href="#M002050">symlink</a>,</li>
                
                <li><a href="#M002050">symlink</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M002095">touch</a>,</li>
                
                <li><a href="#M002095">touch</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M002040">uptodate?</a>,</li>
                
                <li><a href="#M002040">uptodate?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="FileUtils.html">FileUtils</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/DryRun.html">FileUtils::DryRun</a></li>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/NoWrite.html">FileUtils::NoWrite</a></li>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/StreamUtils_.html">FileUtils::StreamUtils_</a></li>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/Verbose.html">FileUtils::Verbose</a></li>
        
        <li><span class="type">CLASS</span> <a href="FileUtils/Entry_.html">FileUtils::Entry_</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">METHODS</td>
            <td>=</td>
            <td class="attr-value">singleton_methods() - [:private_module_function,       :commands, :options, :have_option?, :options_of, :collect_method]</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002038">
                    
                    <a name="M002038"></a><b>cd</b>(dir, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: verbose
</p>
<p>
Changes the current directory to the directory <tt>dir</tt>.
</p>
<p>
If this method is called with block, resumes to the old working directory
after the block execution finished.
</p>
<pre>
  FileUtils.cd('/', :verbose =&gt; true)   # chdir and report it
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002039">chdir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002038_source')" id="l_M002038_source">show</a>
                        
                    </p>
                    <div id="M002038_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: dir</span>
119:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cd'</span>]
120:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
121:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
122:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-value str">'cd -'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">block</span>
123:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002039">
                    
                    <a name="M002039"></a><b>chdir</b>(dir, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002038">cd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002087">
                    
                    <a name="M002087"></a><b>chmod</b>(mode, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod 0755, 'somecommand'
  FileUtils.chmod 0644, %w(my.rb your.rb his.rb her.rb)
  FileUtils.chmod 0755, '/usr/bin/ruby', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002087_source')" id="l_M002087_source">show</a>
                        
                    </p>
                    <div id="M002087_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 868</span>
868:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
869:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod'</span>]
870:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
871:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod %o %s'</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
872:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
873:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
874:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
875:     <span class="ruby-keyword kw">end</span>
876:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002088">
                    
                    <a name="M002088"></a><b>chmod_R</b>(mode, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose force
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod_R 0700, &quot;/tmp/app.#{$$}&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002088_source')" id="l_M002088_source">show</a>
                        
                    </p>
                    <div id="M002088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 889</span>
889:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
890:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod_R'</span>]
891:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
892:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod -R%s %o %s'</span>,
893:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
894:                               <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
895:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
896:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
897:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
898:         <span class="ruby-keyword kw">begin</span>
899:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
900:         <span class="ruby-keyword kw">rescue</span>
901:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
902:         <span class="ruby-keyword kw">end</span>
903:       <span class="ruby-keyword kw">end</span>
904:     <span class="ruby-keyword kw">end</span>
905:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002089">
                    
                    <a name="M002089"></a><b>chown</b>(user, group, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt>. <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (<a
href="String.html">String</a>). If <tt>user</tt> or <tt>group</tt> is nil,
this method does not change the attribute.
</p>
<pre>
  FileUtils.chown 'root', 'staff', '/usr/local/bin/ruby'
  FileUtils.chown nil, 'bin', Dir.glob('/usr/bin/*'), :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002089_source')" id="l_M002089_source">show</a>
                        
                    </p>
                    <div id="M002089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 922</span>
922:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
923:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown'</span>]
924:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
925:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown %s%s'</span>,
926:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
927:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
928:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
929:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
930:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
931:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
932:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
933:     <span class="ruby-keyword kw">end</span>
934:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002090">
                    
                    <a name="M002090"></a><b>chown_R</b>(user, group, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose force
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt> recursively. <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (<a
href="String.html">String</a>). If <tt>user</tt> or <tt>group</tt> is nil,
this method does not change the attribute.
</p>
<pre>
  FileUtils.chown_R 'www', 'www', '/var/www/htdocs'
  FileUtils.chown_R 'cvs', 'cvs', '/var/cvs', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002090_source')" id="l_M002090_source">show</a>
                        
                    </p>
                    <div id="M002090_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 951</span>
951:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
952:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown_R'</span>]
953:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
954:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown -R%s %s%s'</span>,
955:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
956:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
957:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
958:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
959:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
960:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
961:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">gid</span>
962:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
963:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
964:         <span class="ruby-keyword kw">begin</span>
965:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
966:         <span class="ruby-keyword kw">rescue</span>
967:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
968:         <span class="ruby-keyword kw">end</span>
969:       <span class="ruby-keyword kw">end</span>
970:     <span class="ruby-keyword kw">end</span>
971:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002076">
                    
                    <a name="M002076"></a><b>cmp</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002074">compare_file</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002074">
                    
                    <a name="M002074"></a><b>compare_file</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the contents of a file <a href="A.html">A</a> and a file B
are identical.
</p>
<pre>
  FileUtils.compare_file('somefile', 'somefile')  #=&gt; true
  FileUtils.compare_file('/bin/cp', '/bin/mv')    #=&gt; maybe false
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002075">identical?</a>
                    
                    <a href="FileUtils.html#M002076">cmp</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002074_source')" id="l_M002074_source">show</a>
                        
                    </p>
                    <div id="M002074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 797</span>
797:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
798:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
799:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
800:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
801:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
802:       }
803:     }
804:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002077">
                    
                    <a name="M002077"></a><b>compare_stream</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the contents of a stream <tt>a</tt> and <tt>b</tt> are
identical.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002077_source')" id="l_M002077_source">show</a>
                        
                    </p>
                    <div id="M002077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 815</span>
815:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
816:     <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
817:     <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">sb</span> = <span class="ruby-keyword kw">nil</span>
818:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
819:       <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
820:       <span class="ruby-identifier">sb</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
821:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">sa</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>
822:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">nil?</span>
823:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
824:         <span class="ruby-keyword kw">end</span>
825:       <span class="ruby-keyword kw">end</span>
826:     <span class="ruby-keyword kw">end</span>
827:     <span class="ruby-keyword kw">false</span>
828:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002053">
                    
                    <a name="M002053"></a><b>copy</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002052">cp</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002055">
                    
                    <a name="M002055"></a><b>copy_entry</b>(src, dest, preserve = false, dereference_root = false, remove_destination = false)
                    
                </div>
                
                <div class="description">
                  <p>
Copies a file system entry <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt>
is a directory, this method copies its contents recursively. This method
preserves file types, c.f. symlink, directory... (FIFO, device files and
etc. are not supported yet)
</p>
<p>
Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.
</p>
<p>
If <tt>preserve</tt> is true, this method preserves owner, group,
permissions and modified time.
</p>
<p>
If <tt>dereference_root</tt> is true, this method dereference tree root.
</p>
<p>
If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002055_source')" id="l_M002055_source">show</a>
                        
                    </p>
                    <div id="M002055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 457</span>
457:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword kw">false</span>)
458:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
459:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword kw">false</span>)
460:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
461:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
462:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
463:     <span class="ruby-keyword kw">end</span>
464:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002056">
                    
                    <a name="M002056"></a><b>copy_file</b>(src, dest, preserve = false, dereference = true)
                    
                </div>
                
                <div class="description">
                  <p>
Copies file contents of <tt>src</tt> to <tt>dest</tt>. Both of <tt>src</tt>
and <tt>dest</tt> must be a path name.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002056_source')" id="l_M002056_source">show</a>
                        
                    </p>
                    <div id="M002056_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 471</span>
471:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword kw">true</span>)
472:     <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference</span>)
473:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
474:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
475:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002057">
                    
                    <a name="M002057"></a><b>copy_stream</b>(src, dest)
                    
                </div>
                
                <div class="description">
                  <p>
Copies stream <tt>src</tt> to <tt>dest</tt>. <tt>src</tt> must respond to
read(n) and <tt>dest</tt> must respond to write(str).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002057_source')" id="l_M002057_source">show</a>
                        
                    </p>
                    <div id="M002057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 483</span>
483:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
484:     <span class="ruby-constant">IO</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
485:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002052">
                    
                    <a name="M002052"></a><b>cp</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: preserve noop verbose
</p>
<p>
Copies a file content <tt>src</tt> to <tt>dest</tt>. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
If <tt>src</tt> is a list of files, then <tt>dest</tt> must be a directory.
</p>
<pre>
  FileUtils.cp 'eval.c', 'eval.c.org'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6', :verbose =&gt; true
  FileUtils.cp 'symlink', 'dest'   # copy content, &quot;dest&quot; is not a symlink
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002053">copy</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002052_source')" id="l_M002052_source">show</a>
                        
                    </p>
                    <div id="M002052_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
388:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp'</span>]
389:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{options[:preserve] ? ' -p' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
390:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
391:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
392:       <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
393:     <span class="ruby-keyword kw">end</span>
394:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002054">
                    
                    <a name="M002054"></a><b>cp_r</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: preserve noop verbose dereference_root remove_destination
</p>
<p>
Copies <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory, this
method copies all its contents recursively. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
<tt>src</tt> can be a list of files.
</p>
<pre>
  # Installing ruby library &quot;mylib&quot; under the site_ruby
  FileUtils.rm_r site_ruby + '/mylib', :force
  FileUtils.cp_r 'lib/', site_ruby + '/mylib'

  # Examples of copying several files to target directory.
  FileUtils.cp_r %w(mail.rb field.rb debug/), site_ruby + '/tmail'
  FileUtils.cp_r Dir.glob('*.rb'), '/home/aamine/lib/ruby', :noop =&gt; true, :verbose =&gt; true

  # If you want to copy all contents of a directory instead of the
  # directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
  # use following code.
  FileUtils.cp_r 'src/.', 'dest'     # cp_r('src', 'dest') makes src/dest,
                                     # but this doesn't.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002054_source')" id="l_M002054_source">show</a>
                        
                    </p>
                    <div id="M002054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 426</span>
426:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
427:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp_r'</span>]
428:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
429:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
430:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
431:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:dereference_root</span>)
432:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
433:       <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:remove_destination</span>]
434:     <span class="ruby-keyword kw">end</span>
435:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002037">
                    
                    <a name="M002037"></a><b>getwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002036">pwd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002075">
                    
                    <a name="M002075"></a><b>identical?</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002074">compare_file</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002078">
                    
                    <a name="M002078"></a><b>install</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode preserve noop verbose
</p>
<p>
If <tt>src</tt> is not same as <tt>dest</tt>, copies it and changes the
permission mode to <tt>mode</tt>. If <tt>dest</tt> is a directory,
destination is <tt>dest</tt>/<tt>src</tt>. This method removes destination
before copy.
</p>
<pre>
  FileUtils.install 'ruby', '/usr/local/bin/ruby', :mode =&gt; 0755, :verbose =&gt; true
  FileUtils.install 'lib.rb', '/usr/local/lib/ruby/site_ruby', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002078_source')" id="l_M002078_source">show</a>
                        
                    </p>
                    <div id="M002078_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 841</span>
841:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
842:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'install'</span>]
843:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;install -c#{options[:preserve] &amp;&amp; ' -p'}#{options[:mode] ? (' -m 0%o' % options[:mode]) : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
844:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
845:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">st</span><span class="ruby-operator">|</span>
846:       <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
847:         <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
848:         <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
849:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
850:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>], <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
851:       <span class="ruby-keyword kw">end</span>
852:     <span class="ruby-keyword kw">end</span>
853:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002048">
                    
                    <a name="M002048"></a><b>link</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002047">ln</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002047">
                    
                    <a name="M002047"></a><b>ln</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
<b><tt>ln(old, new, options = {})</tt></b>
</p>
<p>
Creates a hard link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a link
<tt>new/old</tt>. If <tt>new</tt> already exists and it is not a directory,
raises Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln 'gcc', 'cc', :verbose =&gt; true
  FileUtils.ln '/usr/bin/emacs21', '/usr/bin/emacs'
</pre>
<p>
<b><tt>ln(list, destdir, options = {})</tt></b>
</p>
<p>
Creates several hard links in a directory, with each one pointing to the
item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<pre>
  include FileUtils
  cd '/sbin'
  FileUtils.ln %w(cp mv mkdir), '/bin'   # Now /sbin/cp and /bin/cp are linked.
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002048">link</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002047_source')" id="l_M002047_source">show</a>
                        
                    </p>
                    <div id="M002047_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 302</span>
302:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
303:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln'</span>]
304:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
305:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
306:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
307:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
308:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
309:     <span class="ruby-keyword kw">end</span>
310:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002049">
                    
                    <a name="M002049"></a><b>ln_s</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
<b><tt><a href="FileUtils.html#M002049">ln_s</a>(old, new, options =
{})</tt></b>
</p>
<p>
Creates a symbolic link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a symbolic link
<tt>new/old</tt>. If <tt>new</tt> already exists and it is not a directory,
raises Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln_s '/usr/bin/ruby', '/usr/local/bin/ruby'
  FileUtils.ln_s 'verylongsourcefilename.c', 'c', :force =&gt; true
</pre>
<p>
<b><tt><a href="FileUtils.html#M002049">ln_s</a>(list, destdir, options =
{})</tt></b>
</p>
<p>
Creates several symbolic links in a directory, with each one pointing to
the item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<p>
If <tt>destdir</tt> is not a directory, raises Errno::ENOTDIR.
</p>
<pre>
  FileUtils.ln_s Dir.glob('bin/*.rb'), '/home/aamine/bin'
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002050">symlink</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002049_source')" id="l_M002049_source">show</a>
                        
                    </p>
                    <div id="M002049_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 341</span>
341:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
342:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_s'</span>]
343:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{options[:force] ? 'f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
344:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
345:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
346:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
347:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
348:     <span class="ruby-keyword kw">end</span>
349:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002051">
                    
                    <a name="M002051"></a><b>ln_sf</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Same as
</p>
<pre>
  #ln_s(src, dest, :force)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002051_source')" id="l_M002051_source">show</a>
                        
                    </p>
                    <div id="M002051_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 364</span>
364:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
365:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_sf'</span>]
366:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
367:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
368:     <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span>
369:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002044">
                    
                    <a name="M002044"></a><b>makedirs</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002042">mkdir_p</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002041">
                    
                    <a name="M002041"></a><b>mkdir</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode noop verbose
</p>
<p>
Creates one or more directories.
</p>
<pre>
  FileUtils.mkdir 'test'
  FileUtils.mkdir %w( tmp data )
  FileUtils.mkdir 'notexist', :noop =&gt; true  # Does not really create.
  FileUtils.mkdir 'tmp', :mode =&gt; 0700
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002041_source')" id="l_M002041_source">show</a>
                        
                    </p>
                    <div id="M002041_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
166:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir'</span>]
167:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
168:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
169:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
170: 
171:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
172:       <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
173:     <span class="ruby-keyword kw">end</span>
174:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002042">
                    
                    <a name="M002042"></a><b>mkdir_p</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode noop verbose
</p>
<p>
Creates a directory and all its parent directories. For example,
</p>
<pre>
  FileUtils.mkdir_p '/usr/local/lib/ruby'
</pre>
<p>
causes to make following directories, if it does not exist.
</p>
<pre>
    * /usr
    * /usr/local
    * /usr/local/lib
    * /usr/local/lib/ruby
</pre>
<p>
You can pass several directories at a time in a list.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002043">mkpath</a>
                    
                    <a href="FileUtils.html#M002044">makedirs</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002042_source')" id="l_M002042_source">show</a>
                        
                    </p>
                    <div id="M002042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
196:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir_p'</span>]
197:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
198:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
199:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
200: 
201:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
202:       <span class="ruby-comment cmt"># optimize for the most common case</span>
203:       <span class="ruby-keyword kw">begin</span>
204:         <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
205:         <span class="ruby-keyword kw">next</span>
206:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
207:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
208:       <span class="ruby-keyword kw">end</span>
209: 
210:       <span class="ruby-identifier">stack</span> = []
211:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">last</span>   <span class="ruby-comment cmt"># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;</span>
212:         <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
213:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
214:       <span class="ruby-keyword kw">end</span>
215:       <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
216:         <span class="ruby-keyword kw">begin</span>
217:           <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
218:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
219:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
220:         <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-keyword kw">end</span>
222:     <span class="ruby-keyword kw">end</span>
223: 
224:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
225:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002043">
                    
                    <a name="M002043"></a><b>mkpath</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002042">mkdir_p</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002059">
                    
                    <a name="M002059"></a><b>move</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002058">mv</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002058">
                    
                    <a name="M002058"></a><b>mv</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
Moves file(s) <tt>src</tt> to <tt>dest</tt>. If <tt>file</tt> and
<tt>dest</tt> exist on the different disk partition, the file is copied
then the original file is removed.
</p>
<pre>
  FileUtils.mv 'badname.rb', 'goodname.rb'
  FileUtils.mv 'stuff.rb', '/notexist/lib/ruby', :force =&gt; true  # no error

  FileUtils.mv %w(junk.txt dust.txt), '/home/aamine/.trash/'
  FileUtils.mv Dir.glob('test*.rb'), 'test', :noop =&gt; true, :verbose =&gt; true
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002059">move</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002058_source')" id="l_M002058_source">show</a>
                        
                    </p>
                    <div id="M002058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 500</span>
500:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
501:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mv'</span>]
502:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
503:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
504:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
505:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>)
506:       <span class="ruby-keyword kw">begin</span>
507:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
508:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
509:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">dest</span>
510:           <span class="ruby-keyword kw">else</span>
511:             <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">remove_file</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rename_cannot_overwrite_file?</span>
512:           <span class="ruby-keyword kw">end</span>
513:         <span class="ruby-keyword kw">end</span>
514:         <span class="ruby-keyword kw">begin</span>
515:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
516:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>
517:           <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
518:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
519:             <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
520:           <span class="ruby-keyword kw">else</span>
521:             <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
522:           <span class="ruby-keyword kw">end</span>
523:         <span class="ruby-keyword kw">end</span>
524:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
525:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
526:       <span class="ruby-keyword kw">end</span>
527:     <span class="ruby-keyword kw">end</span>
528:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002036">
                    
                    <a name="M002036"></a><b>pwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Options: (none)
</p>
<p>
Returns the name of the current directory.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002037">getwd</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002036_source')" id="l_M002036_source">show</a>
                        
                    </p>
                    <div id="M002036_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
101:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
102:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002062">
                    
                    <a name="M002062"></a><b>remove</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002061">rm</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002073">
                    
                    <a name="M002073"></a><b>remove_dir</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a directory <tt>dir</tt> and its contents recursively. This method
ignores <a href="StandardError.html">StandardError</a> if <tt>force</tt> is
true.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002073_source')" id="l_M002073_source">show</a>
                        
                    </p>
                    <div id="M002073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 786</span>
786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
787:     <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment cmt"># FIXME?? check if it is a directory</span>
788:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002071">
                    
                    <a name="M002071"></a><b>remove_entry</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> might
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively.
</p>
<p>
See also <a href="FileUtils.html#M002068">remove_entry_secure</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002071_source')" id="l_M002071_source">show</a>
                        
                    </p>
                    <div id="M002071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
759:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
760:       <span class="ruby-keyword kw">begin</span>
761:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
762:       <span class="ruby-keyword kw">rescue</span>
763:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
764:       <span class="ruby-keyword kw">end</span>
765:     <span class="ruby-keyword kw">end</span>
766:   <span class="ruby-keyword kw">rescue</span>
767:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
768:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002068">
                    
                    <a name="M002068"></a><b>remove_entry_secure</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> shall
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively. This method is required to avoid TOCTTOU
(time-of-check-to-time-of-use) local security vulnerability of <a
href="FileUtils.html#M002065">rm_r</a>. <a
href="FileUtils.html#M002065">rm_r</a> causes security hole when:
</p>
<pre>
  * Parent directory is world writable (including /tmp).
  * Removing directory tree includes world writable directory.
  * The system has symbolic link.
</pre>
<p>
To avoid this security hole, this method applies special preprocess. If
<tt>path</tt> is a directory, this method chown(2) and chmod(2) all
removing directories. This requires the current process is the owner of the
removing whole directory tree, or is the super user (root).
</p>
<p>
WARNING: You must ensure that <b>ALL</b> parent directories are not world
writable. Otherwise this method does not work. Only exception is temporary
directory like /tmp and /var/tmp, whose permission is 1777.
</p>
<p>
WARNING: Only the owner of the removing directory tree, or Unix super user
(root) should invoke this method. Otherwise this method does not work.
</p>
<p>
For details of this security vulnerability, see Perl&#8217;s case:
</p>
<pre>
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452
</pre>
<p>
For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002068_source')" id="l_M002068_source">show</a>
                        
                    </p>
                    <div id="M002068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 686</span>
686:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
687:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
688:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
689:       <span class="ruby-keyword kw">return</span>
690:     <span class="ruby-keyword kw">end</span>
691:     <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
692:     <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
693:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
694:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
695:       <span class="ruby-keyword kw">return</span>
696:     <span class="ruby-keyword kw">end</span>
697:     <span class="ruby-comment cmt"># is a directory.</span>
698:     <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
699:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">world_writable?</span>
700:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
701:       <span class="ruby-keyword kw">return</span>
702:     <span class="ruby-keyword kw">end</span>
703:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
704:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{'%o' % parent_st.mode})&quot;</span>
705:     <span class="ruby-keyword kw">end</span>
706:     <span class="ruby-comment cmt"># freeze tree root</span>
707:     <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
708:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/.'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
709:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
710:         <span class="ruby-comment cmt"># symlink (TOC-to-TOU attack?)</span>
711:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
712:         <span class="ruby-keyword kw">return</span>
713:       <span class="ruby-keyword kw">end</span>
714:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
715:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
716:     }
717:     <span class="ruby-comment cmt"># ---- tree root is frozen ----</span>
718:     <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
719:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
720:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
721:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
722:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
723:       <span class="ruby-keyword kw">end</span>
724:     <span class="ruby-keyword kw">end</span>
725:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
726:       <span class="ruby-keyword kw">begin</span>
727:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
728:       <span class="ruby-keyword kw">rescue</span>
729:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
730:       <span class="ruby-keyword kw">end</span>
731:     <span class="ruby-keyword kw">end</span>
732:   <span class="ruby-keyword kw">rescue</span>
733:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
734:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002072">
                    
                    <a name="M002072"></a><b>remove_file</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a file <tt>path</tt>. This method ignores <a
href="StandardError.html">StandardError</a> if <tt>force</tt> is true.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002072_source')" id="l_M002072_source">show</a>
                        
                    </p>
                    <div id="M002072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 775</span>
775:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
776:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
777:   <span class="ruby-keyword kw">rescue</span>
778:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
779:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002061">
                    
                    <a name="M002061"></a><b>rm</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
Remove file(s) specified in <tt>list</tt>. This method cannot remove
directories. All StandardErrors are ignored when the :force option is set.
</p>
<pre>
  FileUtils.rm %w( junk.txt dust.txt )
  FileUtils.rm Dir.glob('*.so')
  FileUtils.rm 'NotExistFile', :force =&gt; true   # never raises exception
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002062">remove</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002061_source')" id="l_M002061_source">show</a>
                        
                    </p>
                    <div id="M002061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 552</span>
552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
553:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm'</span>]
554:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
555:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{options[:force] ? ' -f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
556:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
557: 
558:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
559:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
560:     <span class="ruby-keyword kw">end</span>
561:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002063">
                    
                    <a name="M002063"></a><b>rm_f</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Equivalent to
</p>
<pre>
  #rm(list, :force =&gt; true)
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002064">safe_unlink</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002063_source')" id="l_M002063_source">show</a>
                        
                    </p>
                    <div id="M002063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 577</span>
577:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
578:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_f'</span>]
579:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
580:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
581:     <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
582:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002065">
                    
                    <a name="M002065"></a><b>rm_r</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose secure
</p>
<p>
remove files <tt>list</tt>[0] <tt>list</tt>[1]&#8230; If <tt>list</tt>[n]
is a directory, removes its all contents recursively. This method ignores
<a href="StandardError.html">StandardError</a> when :force option is set.
</p>
<pre>
  FileUtils.rm_r Dir.glob('/tmp/*')
  FileUtils.rm_r '/', :force =&gt; true          #  :-)
</pre>
<p>
WARNING: This method causes local vulnerability if one of parent
directories or removing directory tree are world writable (including /tmp,
whose permission is 1777), and the current process has strong privilege
such as Unix super user (root), and the system has symbolic link. For
secure removing, read the documentation of <a
href="FileUtils.html#M002068">remove_entry_secure</a> carefully, and set
:secure option to true. Default is :secure=>false.
</p>
<p>
NOTE: This method calls <a
href="FileUtils.html#M002068">remove_entry_secure</a> if :secure option is
set. See also <a href="FileUtils.html#M002068">remove_entry_secure</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002065_source')" id="l_M002065_source">show</a>
                        
                    </p>
                    <div id="M002065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 612</span>
612:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
613:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_r'</span>]
614:     <span class="ruby-comment cmt"># options[:secure] = true unless options.key?(:secure)</span>
615:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
616:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{options[:force] ? 'f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
617:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
618:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
619:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
620:         <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
621:       <span class="ruby-keyword kw">else</span>
622:         <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
623:       <span class="ruby-keyword kw">end</span>
624:     <span class="ruby-keyword kw">end</span>
625:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002066">
                    
                    <a name="M002066"></a><b>rm_rf</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose secure
</p>
<p>
Equivalent to
</p>
<pre>
  #rm_r(list, :force =&gt; true)
</pre>
<p>
WARNING: This method causes local vulnerability. Read the documentation of
<a href="FileUtils.html#M002065">rm_r</a> first.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002067">rmtree</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002066_source')" id="l_M002066_source">show</a>
                        
                    </p>
                    <div id="M002066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 640</span>
640:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
641:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_rf'</span>]
642:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
643:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
644:     <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
645:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002046">
                    
                    <a name="M002046"></a><b>rmdir</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop, verbose
</p>
<p>
Removes one or more directories.
</p>
<pre>
  FileUtils.rmdir 'somedir'
  FileUtils.rmdir %w(somedir anydir otherdir)
  # Does not really remove directory; outputs message.
  FileUtils.rmdir 'somedir', :verbose =&gt; true, :noop =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002046_source')" id="l_M002046_source">show</a>
                        
                    </p>
                    <div id="M002046_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
259:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rmdir'</span>]
260:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
261:     <span class="ruby-identifier">parents</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:parents</span>]
262:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{parents ? '-p ' : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
263:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
264:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
265:       <span class="ruby-keyword kw">begin</span>
266:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>))
267:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parents</span>
268:           <span class="ruby-keyword kw">until</span> (<span class="ruby-identifier">parent</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)) <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>
269:             <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>)
270:           <span class="ruby-keyword kw">end</span>
271:         <span class="ruby-keyword kw">end</span>
272:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
273:       <span class="ruby-keyword kw">end</span>
274:     <span class="ruby-keyword kw">end</span>
275:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002067">
                    
                    <a name="M002067"></a><b>rmtree</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002066">rm_rf</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002064">
                    
                    <a name="M002064"></a><b>safe_unlink</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002063">rm_f</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002050">
                    
                    <a name="M002050"></a><b>symlink</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002049">ln_s</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002095">
                    
                    <a name="M002095"></a><b>touch</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Updates modification time (mtime) and access time (atime) of file(s) in
<tt>list</tt>. Files are created if they don&#8217;t exist.
</p>
<pre>
  FileUtils.touch 'timestamp'
  FileUtils.touch Dir.glob('*.c');  system 'make'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002095_source')" id="l_M002095_source">show</a>
                        
                    </p>
                    <div id="M002095_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1028</span>
1028:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
1029:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'touch'</span>]
1030:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
1031:     <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:nocreate</span>]
1032:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mtime</span>]
1033:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
1034:       <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? ' -c' : ''}#{t ? t.strftime(' -t %Y%m%d%H%M.%S') : ''}#{list.join ' '}&quot;</span>
1035:     <span class="ruby-keyword kw">end</span>
1036:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
1037:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
1038:       <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
1039:       <span class="ruby-keyword kw">begin</span>
1040:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
1041:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
1042:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">created</span>
1043:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">'a'</span>) {
1044:           ;
1045:         }
1046:         <span class="ruby-identifier">created</span> = <span class="ruby-keyword kw">true</span>
1047:         <span class="ruby-keyword kw">retry</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>
1048:       <span class="ruby-keyword kw">end</span>
1049:     <span class="ruby-keyword kw">end</span>
1050:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002040">
                    
                    <a name="M002040"></a><b>uptodate?</b>(new, old_list, options = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Options: (none)
</p>
<p>
Returns true if <tt>newer</tt> is newer than all <tt>old_list</tt>.
Non-existent files are older than any file.
</p>
<pre>
  FileUtils.uptodate?('hello.o', %w(hello.c hello.h)) or    #       system 'make hello.o'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002040_source')" id="l_M002040_source">show</a>
                        
                    </p>
                    <div id="M002040_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
142:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'uptodate? does not accept any option'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>
143: 
144:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
145:     <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
146:     <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
147:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
148:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
149:       <span class="ruby-keyword kw">end</span>
150:     <span class="ruby-keyword kw">end</span>
151:     <span class="ruby-keyword kw">true</span>
152:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M002112">
                    
                    <a name="M002112"></a><b>collect_method</b>(opt)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a href="Array.html">Array</a> of method names which have the
option <tt>opt</tt>.
</p>
<pre>
  p FileUtils.collect_method(:preserve) #=&gt; [&quot;cp&quot;, &quot;cp_r&quot;, &quot;copy&quot;, &quot;install&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002112_source')" id="l_M002112_source">show</a>
                        
                    </p>
                    <div id="M002112_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1518</span>
1518:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">collect_method</span>(<span class="ruby-identifier">opt</span>)
1519:     <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">m</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>) }
1520:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002108">
                    
                    <a name="M002108"></a><b>commands</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a href="Array.html">Array</a> of method names which have any
options.
</p>
<pre>
  p FileUtils.commands  #=&gt; [&quot;chmod&quot;, &quot;cp&quot;, &quot;cp_r&quot;, &quot;install&quot;, ...]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002108_source')" id="l_M002108_source">show</a>
                        
                    </p>
                    <div id="M002108_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1479</span>
1479:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">commands</span>
1480:     <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>
1481:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002110">
                    
                    <a name="M002110"></a><b>have_option?</b>(mid, opt)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the method <tt>mid</tt> have an option <tt>opt</tt>.
</p>
<pre>
  p FileUtils.have_option?(:cp, :noop)     #=&gt; true
  p FileUtils.have_option?(:rm, :force)    #=&gt; true
  p FileUtils.have_option?(:rm, :perserve) #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002110_source')" id="l_M002110_source">show</a>
                        
                    </p>
                    <div id="M002110_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1499</span>
1499:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">have_option?</span>(<span class="ruby-identifier">mid</span>, <span class="ruby-identifier">opt</span>)
1500:     <span class="ruby-identifier">li</span> = <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;no such method: #{mid}&quot;</span>
1501:     <span class="ruby-identifier">li</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>)
1502:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002109">
                    
                    <a name="M002109"></a><b>options</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a href="Array.html">Array</a> of option names.
</p>
<pre>
  p FileUtils.options  #=&gt; [&quot;noop&quot;, &quot;force&quot;, &quot;verbose&quot;, &quot;preserve&quot;, &quot;mode&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002109_source')" id="l_M002109_source">show</a>
                        
                    </p>
                    <div id="M002109_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1488</span>
1488:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">options</span>
1489:     <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
1490:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002111">
                    
                    <a name="M002111"></a><b>options_of</b>(mid)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a href="Array.html">Array</a> of option names of the method
<tt>mid</tt>.
</p>
<pre>
  p FileUtils.options(:rm)  #=&gt; [&quot;noop&quot;, &quot;verbose&quot;, &quot;force&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002111_source')" id="l_M002111_source">show</a>
                        
                    </p>
                    <div id="M002111_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1509</span>
1509:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">options_of</span>(<span class="ruby-identifier">mid</span>)
1510:     <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
1511:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002069">
                    
                    <a name="M002069"></a><b>fu_have_symlink?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002069_source')" id="l_M002069_source">show</a>
                        
                    </p>
                    <div id="M002069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 737</span>
737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fu_have_symlink?</span>   <span class="ruby-comment cmt">#:nodoc</span>
738:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>
739:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NotImplementedError</span>
740:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
741:   <span class="ruby-keyword kw">rescue</span>
742:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
743:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M002038">
                    
                    <a name="M002038"></a><b>cd</b>(dir, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: verbose
</p>
<p>
Changes the current directory to the directory <tt>dir</tt>.
</p>
<p>
If this method is called with block, resumes to the old working directory
after the block execution finished.
</p>
<pre>
  FileUtils.cd('/', :verbose =&gt; true)   # chdir and report it
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002039">chdir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002038_source')" id="l_M002038_source">show</a>
                        
                    </p>
                    <div id="M002038_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: dir</span>
119:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cd'</span>]
120:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
121:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
122:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-value str">'cd -'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">block</span>
123:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002039">
                    
                    <a name="M002039"></a><b>chdir</b>(dir, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002038">cd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002087">
                    
                    <a name="M002087"></a><b>chmod</b>(mode, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod 0755, 'somecommand'
  FileUtils.chmod 0644, %w(my.rb your.rb his.rb her.rb)
  FileUtils.chmod 0755, '/usr/bin/ruby', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002087_source')" id="l_M002087_source">show</a>
                        
                    </p>
                    <div id="M002087_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 868</span>
868:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
869:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod'</span>]
870:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
871:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod %o %s'</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
872:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
873:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
874:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
875:     <span class="ruby-keyword kw">end</span>
876:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002088">
                    
                    <a name="M002088"></a><b>chmod_R</b>(mode, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose force
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod_R 0700, &quot;/tmp/app.#{$$}&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002088_source')" id="l_M002088_source">show</a>
                        
                    </p>
                    <div id="M002088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 889</span>
889:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
890:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod_R'</span>]
891:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
892:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod -R%s %o %s'</span>,
893:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
894:                               <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
895:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
896:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
897:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
898:         <span class="ruby-keyword kw">begin</span>
899:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
900:         <span class="ruby-keyword kw">rescue</span>
901:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
902:         <span class="ruby-keyword kw">end</span>
903:       <span class="ruby-keyword kw">end</span>
904:     <span class="ruby-keyword kw">end</span>
905:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002089">
                    
                    <a name="M002089"></a><b>chown</b>(user, group, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt>. <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (<a
href="String.html">String</a>). If <tt>user</tt> or <tt>group</tt> is nil,
this method does not change the attribute.
</p>
<pre>
  FileUtils.chown 'root', 'staff', '/usr/local/bin/ruby'
  FileUtils.chown nil, 'bin', Dir.glob('/usr/bin/*'), :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002089_source')" id="l_M002089_source">show</a>
                        
                    </p>
                    <div id="M002089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 922</span>
922:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
923:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown'</span>]
924:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
925:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown %s%s'</span>,
926:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
927:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
928:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
929:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
930:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
931:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
932:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
933:     <span class="ruby-keyword kw">end</span>
934:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002090">
                    
                    <a name="M002090"></a><b>chown_R</b>(user, group, list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose force
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt> recursively. <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (<a
href="String.html">String</a>). If <tt>user</tt> or <tt>group</tt> is nil,
this method does not change the attribute.
</p>
<pre>
  FileUtils.chown_R 'www', 'www', '/var/www/htdocs'
  FileUtils.chown_R 'cvs', 'cvs', '/var/cvs', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002090_source')" id="l_M002090_source">show</a>
                        
                    </p>
                    <div id="M002090_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 951</span>
951:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
952:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown_R'</span>]
953:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
954:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown -R%s %s%s'</span>,
955:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
956:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
957:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
958:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
959:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
960:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
961:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">gid</span>
962:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
963:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
964:         <span class="ruby-keyword kw">begin</span>
965:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
966:         <span class="ruby-keyword kw">rescue</span>
967:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
968:         <span class="ruby-keyword kw">end</span>
969:       <span class="ruby-keyword kw">end</span>
970:     <span class="ruby-keyword kw">end</span>
971:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002076">
                    
                    <a name="M002076"></a><b>cmp</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002074">compare_file</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002074">
                    
                    <a name="M002074"></a><b>compare_file</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the contents of a file <a href="A.html">A</a> and a file B
are identical.
</p>
<pre>
  FileUtils.compare_file('somefile', 'somefile')  #=&gt; true
  FileUtils.compare_file('/bin/cp', '/bin/mv')    #=&gt; maybe false
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002075">identical?</a>
                    
                    <a href="FileUtils.html#M002076">cmp</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002074_source')" id="l_M002074_source">show</a>
                        
                    </p>
                    <div id="M002074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 797</span>
797:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
798:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
799:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
800:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
801:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
802:       }
803:     }
804:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002077">
                    
                    <a name="M002077"></a><b>compare_stream</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the contents of a stream <tt>a</tt> and <tt>b</tt> are
identical.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002077_source')" id="l_M002077_source">show</a>
                        
                    </p>
                    <div id="M002077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 815</span>
815:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
816:     <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
817:     <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">sb</span> = <span class="ruby-keyword kw">nil</span>
818:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
819:       <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
820:       <span class="ruby-identifier">sb</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
821:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">sa</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>
822:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">nil?</span>
823:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
824:         <span class="ruby-keyword kw">end</span>
825:       <span class="ruby-keyword kw">end</span>
826:     <span class="ruby-keyword kw">end</span>
827:     <span class="ruby-keyword kw">false</span>
828:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002053">
                    
                    <a name="M002053"></a><b>copy</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002052">cp</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002055">
                    
                    <a name="M002055"></a><b>copy_entry</b>(src, dest, preserve = false, dereference_root = false, remove_destination = false)
                    
                </div>
                
                <div class="description">
                  <p>
Copies a file system entry <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt>
is a directory, this method copies its contents recursively. This method
preserves file types, c.f. symlink, directory... (FIFO, device files and
etc. are not supported yet)
</p>
<p>
Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.
</p>
<p>
If <tt>preserve</tt> is true, this method preserves owner, group,
permissions and modified time.
</p>
<p>
If <tt>dereference_root</tt> is true, this method dereference tree root.
</p>
<p>
If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002055_source')" id="l_M002055_source">show</a>
                        
                    </p>
                    <div id="M002055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 457</span>
457:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword kw">false</span>)
458:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
459:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword kw">false</span>)
460:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
461:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
462:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
463:     <span class="ruby-keyword kw">end</span>
464:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002056">
                    
                    <a name="M002056"></a><b>copy_file</b>(src, dest, preserve = false, dereference = true)
                    
                </div>
                
                <div class="description">
                  <p>
Copies file contents of <tt>src</tt> to <tt>dest</tt>. Both of <tt>src</tt>
and <tt>dest</tt> must be a path name.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002056_source')" id="l_M002056_source">show</a>
                        
                    </p>
                    <div id="M002056_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 471</span>
471:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword kw">true</span>)
472:     <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference</span>)
473:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
474:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
475:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002057">
                    
                    <a name="M002057"></a><b>copy_stream</b>(src, dest)
                    
                </div>
                
                <div class="description">
                  <p>
Copies stream <tt>src</tt> to <tt>dest</tt>. <tt>src</tt> must respond to
read(n) and <tt>dest</tt> must respond to write(str).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002057_source')" id="l_M002057_source">show</a>
                        
                    </p>
                    <div id="M002057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 483</span>
483:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
484:     <span class="ruby-constant">IO</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
485:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002052">
                    
                    <a name="M002052"></a><b>cp</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: preserve noop verbose
</p>
<p>
Copies a file content <tt>src</tt> to <tt>dest</tt>. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
If <tt>src</tt> is a list of files, then <tt>dest</tt> must be a directory.
</p>
<pre>
  FileUtils.cp 'eval.c', 'eval.c.org'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6', :verbose =&gt; true
  FileUtils.cp 'symlink', 'dest'   # copy content, &quot;dest&quot; is not a symlink
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002053">copy</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002052_source')" id="l_M002052_source">show</a>
                        
                    </p>
                    <div id="M002052_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
388:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp'</span>]
389:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{options[:preserve] ? ' -p' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
390:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
391:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
392:       <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
393:     <span class="ruby-keyword kw">end</span>
394:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002054">
                    
                    <a name="M002054"></a><b>cp_r</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: preserve noop verbose dereference_root remove_destination
</p>
<p>
Copies <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory, this
method copies all its contents recursively. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
<tt>src</tt> can be a list of files.
</p>
<pre>
  # Installing ruby library &quot;mylib&quot; under the site_ruby
  FileUtils.rm_r site_ruby + '/mylib', :force
  FileUtils.cp_r 'lib/', site_ruby + '/mylib'

  # Examples of copying several files to target directory.
  FileUtils.cp_r %w(mail.rb field.rb debug/), site_ruby + '/tmail'
  FileUtils.cp_r Dir.glob('*.rb'), '/home/aamine/lib/ruby', :noop =&gt; true, :verbose =&gt; true

  # If you want to copy all contents of a directory instead of the
  # directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
  # use following code.
  FileUtils.cp_r 'src/.', 'dest'     # cp_r('src', 'dest') makes src/dest,
                                     # but this doesn't.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002054_source')" id="l_M002054_source">show</a>
                        
                    </p>
                    <div id="M002054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 426</span>
426:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
427:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp_r'</span>]
428:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
429:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
430:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
431:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:dereference_root</span>)
432:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
433:       <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:remove_destination</span>]
434:     <span class="ruby-keyword kw">end</span>
435:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002037">
                    
                    <a name="M002037"></a><b>getwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002036">pwd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002075">
                    
                    <a name="M002075"></a><b>identical?</b>(a, b)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002074">compare_file</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002078">
                    
                    <a name="M002078"></a><b>install</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode preserve noop verbose
</p>
<p>
If <tt>src</tt> is not same as <tt>dest</tt>, copies it and changes the
permission mode to <tt>mode</tt>. If <tt>dest</tt> is a directory,
destination is <tt>dest</tt>/<tt>src</tt>. This method removes destination
before copy.
</p>
<pre>
  FileUtils.install 'ruby', '/usr/local/bin/ruby', :mode =&gt; 0755, :verbose =&gt; true
  FileUtils.install 'lib.rb', '/usr/local/lib/ruby/site_ruby', :verbose =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002078_source')" id="l_M002078_source">show</a>
                        
                    </p>
                    <div id="M002078_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 841</span>
841:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
842:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'install'</span>]
843:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;install -c#{options[:preserve] &amp;&amp; ' -p'}#{options[:mode] ? (' -m 0%o' % options[:mode]) : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
844:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
845:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">st</span><span class="ruby-operator">|</span>
846:       <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
847:         <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
848:         <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
849:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
850:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>], <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
851:       <span class="ruby-keyword kw">end</span>
852:     <span class="ruby-keyword kw">end</span>
853:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002048">
                    
                    <a name="M002048"></a><b>link</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002047">ln</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002047">
                    
                    <a name="M002047"></a><b>ln</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
<b><tt>ln(old, new, options = {})</tt></b>
</p>
<p>
Creates a hard link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a link
<tt>new/old</tt>. If <tt>new</tt> already exists and it is not a directory,
raises Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln 'gcc', 'cc', :verbose =&gt; true
  FileUtils.ln '/usr/bin/emacs21', '/usr/bin/emacs'
</pre>
<p>
<b><tt>ln(list, destdir, options = {})</tt></b>
</p>
<p>
Creates several hard links in a directory, with each one pointing to the
item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<pre>
  include FileUtils
  cd '/sbin'
  FileUtils.ln %w(cp mv mkdir), '/bin'   # Now /sbin/cp and /bin/cp are linked.
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002048">link</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002047_source')" id="l_M002047_source">show</a>
                        
                    </p>
                    <div id="M002047_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 302</span>
302:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
303:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln'</span>]
304:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
305:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
306:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
307:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
308:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
309:     <span class="ruby-keyword kw">end</span>
310:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002049">
                    
                    <a name="M002049"></a><b>ln_s</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
<b><tt><a href="FileUtils.html#M002049">ln_s</a>(old, new, options =
{})</tt></b>
</p>
<p>
Creates a symbolic link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a symbolic link
<tt>new/old</tt>. If <tt>new</tt> already exists and it is not a directory,
raises Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln_s '/usr/bin/ruby', '/usr/local/bin/ruby'
  FileUtils.ln_s 'verylongsourcefilename.c', 'c', :force =&gt; true
</pre>
<p>
<b><tt><a href="FileUtils.html#M002049">ln_s</a>(list, destdir, options =
{})</tt></b>
</p>
<p>
Creates several symbolic links in a directory, with each one pointing to
the item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<p>
If <tt>destdir</tt> is not a directory, raises Errno::ENOTDIR.
</p>
<pre>
  FileUtils.ln_s Dir.glob('bin/*.rb'), '/home/aamine/bin'
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002050">symlink</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002049_source')" id="l_M002049_source">show</a>
                        
                    </p>
                    <div id="M002049_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 341</span>
341:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
342:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_s'</span>]
343:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{options[:force] ? 'f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
344:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
345:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
346:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
347:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
348:     <span class="ruby-keyword kw">end</span>
349:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002051">
                    
                    <a name="M002051"></a><b>ln_sf</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Same as
</p>
<pre>
  #ln_s(src, dest, :force)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002051_source')" id="l_M002051_source">show</a>
                        
                    </p>
                    <div id="M002051_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 364</span>
364:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
365:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_sf'</span>]
366:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
367:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
368:     <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span>
369:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002044">
                    
                    <a name="M002044"></a><b>makedirs</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002042">mkdir_p</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002041">
                    
                    <a name="M002041"></a><b>mkdir</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode noop verbose
</p>
<p>
Creates one or more directories.
</p>
<pre>
  FileUtils.mkdir 'test'
  FileUtils.mkdir %w( tmp data )
  FileUtils.mkdir 'notexist', :noop =&gt; true  # Does not really create.
  FileUtils.mkdir 'tmp', :mode =&gt; 0700
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002041_source')" id="l_M002041_source">show</a>
                        
                    </p>
                    <div id="M002041_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
166:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir'</span>]
167:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
168:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
169:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
170: 
171:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
172:       <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
173:     <span class="ruby-keyword kw">end</span>
174:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002042">
                    
                    <a name="M002042"></a><b>mkdir_p</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: mode noop verbose
</p>
<p>
Creates a directory and all its parent directories. For example,
</p>
<pre>
  FileUtils.mkdir_p '/usr/local/lib/ruby'
</pre>
<p>
causes to make following directories, if it does not exist.
</p>
<pre>
    * /usr
    * /usr/local
    * /usr/local/lib
    * /usr/local/lib/ruby
</pre>
<p>
You can pass several directories at a time in a list.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002043">mkpath</a>
                    
                    <a href="FileUtils.html#M002044">makedirs</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002042_source')" id="l_M002042_source">show</a>
                        
                    </p>
                    <div id="M002042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
196:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir_p'</span>]
197:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
198:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
199:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
200: 
201:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
202:       <span class="ruby-comment cmt"># optimize for the most common case</span>
203:       <span class="ruby-keyword kw">begin</span>
204:         <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
205:         <span class="ruby-keyword kw">next</span>
206:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
207:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
208:       <span class="ruby-keyword kw">end</span>
209: 
210:       <span class="ruby-identifier">stack</span> = []
211:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">last</span>   <span class="ruby-comment cmt"># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;</span>
212:         <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
213:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
214:       <span class="ruby-keyword kw">end</span>
215:       <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
216:         <span class="ruby-keyword kw">begin</span>
217:           <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
218:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
219:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
220:         <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-keyword kw">end</span>
222:     <span class="ruby-keyword kw">end</span>
223: 
224:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
225:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002043">
                    
                    <a name="M002043"></a><b>mkpath</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002042">mkdir_p</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002059">
                    
                    <a name="M002059"></a><b>move</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002058">mv</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002058">
                    
                    <a name="M002058"></a><b>mv</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
Moves file(s) <tt>src</tt> to <tt>dest</tt>. If <tt>file</tt> and
<tt>dest</tt> exist on the different disk partition, the file is copied
then the original file is removed.
</p>
<pre>
  FileUtils.mv 'badname.rb', 'goodname.rb'
  FileUtils.mv 'stuff.rb', '/notexist/lib/ruby', :force =&gt; true  # no error

  FileUtils.mv %w(junk.txt dust.txt), '/home/aamine/.trash/'
  FileUtils.mv Dir.glob('test*.rb'), 'test', :noop =&gt; true, :verbose =&gt; true
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002059">move</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002058_source')" id="l_M002058_source">show</a>
                        
                    </p>
                    <div id="M002058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 500</span>
500:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
501:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mv'</span>]
502:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
503:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
504:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
505:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>)
506:       <span class="ruby-keyword kw">begin</span>
507:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
508:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
509:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">dest</span>
510:           <span class="ruby-keyword kw">else</span>
511:             <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">remove_file</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rename_cannot_overwrite_file?</span>
512:           <span class="ruby-keyword kw">end</span>
513:         <span class="ruby-keyword kw">end</span>
514:         <span class="ruby-keyword kw">begin</span>
515:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
516:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>
517:           <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
518:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
519:             <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
520:           <span class="ruby-keyword kw">else</span>
521:             <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
522:           <span class="ruby-keyword kw">end</span>
523:         <span class="ruby-keyword kw">end</span>
524:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
525:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
526:       <span class="ruby-keyword kw">end</span>
527:     <span class="ruby-keyword kw">end</span>
528:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002036">
                    
                    <a name="M002036"></a><b>pwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Options: (none)
</p>
<p>
Returns the name of the current directory.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002037">getwd</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002036_source')" id="l_M002036_source">show</a>
                        
                    </p>
                    <div id="M002036_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
101:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
102:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002062">
                    
                    <a name="M002062"></a><b>remove</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002061">rm</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002073">
                    
                    <a name="M002073"></a><b>remove_dir</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a directory <tt>dir</tt> and its contents recursively. This method
ignores <a href="StandardError.html">StandardError</a> if <tt>force</tt> is
true.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002073_source')" id="l_M002073_source">show</a>
                        
                    </p>
                    <div id="M002073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 786</span>
786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
787:     <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment cmt"># FIXME?? check if it is a directory</span>
788:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002071">
                    
                    <a name="M002071"></a><b>remove_entry</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> might
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively.
</p>
<p>
See also <a href="FileUtils.html#M002068">remove_entry_secure</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002071_source')" id="l_M002071_source">show</a>
                        
                    </p>
                    <div id="M002071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
759:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
760:       <span class="ruby-keyword kw">begin</span>
761:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
762:       <span class="ruby-keyword kw">rescue</span>
763:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
764:       <span class="ruby-keyword kw">end</span>
765:     <span class="ruby-keyword kw">end</span>
766:   <span class="ruby-keyword kw">rescue</span>
767:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
768:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002068">
                    
                    <a name="M002068"></a><b>remove_entry_secure</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> shall
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively. This method is required to avoid TOCTTOU
(time-of-check-to-time-of-use) local security vulnerability of <a
href="FileUtils.html#M002065">rm_r</a>. <a
href="FileUtils.html#M002065">rm_r</a> causes security hole when:
</p>
<pre>
  * Parent directory is world writable (including /tmp).
  * Removing directory tree includes world writable directory.
  * The system has symbolic link.
</pre>
<p>
To avoid this security hole, this method applies special preprocess. If
<tt>path</tt> is a directory, this method chown(2) and chmod(2) all
removing directories. This requires the current process is the owner of the
removing whole directory tree, or is the super user (root).
</p>
<p>
WARNING: You must ensure that <b>ALL</b> parent directories are not world
writable. Otherwise this method does not work. Only exception is temporary
directory like /tmp and /var/tmp, whose permission is 1777.
</p>
<p>
WARNING: Only the owner of the removing directory tree, or Unix super user
(root) should invoke this method. Otherwise this method does not work.
</p>
<p>
For details of this security vulnerability, see Perl&#8217;s case:
</p>
<pre>
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452
</pre>
<p>
For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002068_source')" id="l_M002068_source">show</a>
                        
                    </p>
                    <div id="M002068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 686</span>
686:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
687:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
688:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
689:       <span class="ruby-keyword kw">return</span>
690:     <span class="ruby-keyword kw">end</span>
691:     <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
692:     <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
693:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
694:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
695:       <span class="ruby-keyword kw">return</span>
696:     <span class="ruby-keyword kw">end</span>
697:     <span class="ruby-comment cmt"># is a directory.</span>
698:     <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
699:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">world_writable?</span>
700:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
701:       <span class="ruby-keyword kw">return</span>
702:     <span class="ruby-keyword kw">end</span>
703:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
704:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{'%o' % parent_st.mode})&quot;</span>
705:     <span class="ruby-keyword kw">end</span>
706:     <span class="ruby-comment cmt"># freeze tree root</span>
707:     <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
708:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/.'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
709:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
710:         <span class="ruby-comment cmt"># symlink (TOC-to-TOU attack?)</span>
711:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
712:         <span class="ruby-keyword kw">return</span>
713:       <span class="ruby-keyword kw">end</span>
714:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
715:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
716:     }
717:     <span class="ruby-comment cmt"># ---- tree root is frozen ----</span>
718:     <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
719:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
720:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
721:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
722:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
723:       <span class="ruby-keyword kw">end</span>
724:     <span class="ruby-keyword kw">end</span>
725:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
726:       <span class="ruby-keyword kw">begin</span>
727:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
728:       <span class="ruby-keyword kw">rescue</span>
729:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
730:       <span class="ruby-keyword kw">end</span>
731:     <span class="ruby-keyword kw">end</span>
732:   <span class="ruby-keyword kw">rescue</span>
733:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
734:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002072">
                    
                    <a name="M002072"></a><b>remove_file</b>(path, force = false)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a file <tt>path</tt>. This method ignores <a
href="StandardError.html">StandardError</a> if <tt>force</tt> is true.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002072_source')" id="l_M002072_source">show</a>
                        
                    </p>
                    <div id="M002072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 775</span>
775:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
776:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
777:   <span class="ruby-keyword kw">rescue</span>
778:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
779:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002061">
                    
                    <a name="M002061"></a><b>rm</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose
</p>
<p>
Remove file(s) specified in <tt>list</tt>. This method cannot remove
directories. All StandardErrors are ignored when the :force option is set.
</p>
<pre>
  FileUtils.rm %w( junk.txt dust.txt )
  FileUtils.rm Dir.glob('*.so')
  FileUtils.rm 'NotExistFile', :force =&gt; true   # never raises exception
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002062">remove</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002061_source')" id="l_M002061_source">show</a>
                        
                    </p>
                    <div id="M002061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 552</span>
552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
553:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm'</span>]
554:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
555:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{options[:force] ? ' -f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
556:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
557: 
558:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
559:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
560:     <span class="ruby-keyword kw">end</span>
561:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002063">
                    
                    <a name="M002063"></a><b>rm_f</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Equivalent to
</p>
<pre>
  #rm(list, :force =&gt; true)
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002064">safe_unlink</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002063_source')" id="l_M002063_source">show</a>
                        
                    </p>
                    <div id="M002063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 577</span>
577:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
578:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_f'</span>]
579:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
580:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
581:     <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
582:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002065">
                    
                    <a name="M002065"></a><b>rm_r</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: force noop verbose secure
</p>
<p>
remove files <tt>list</tt>[0] <tt>list</tt>[1]&#8230; If <tt>list</tt>[n]
is a directory, removes its all contents recursively. This method ignores
<a href="StandardError.html">StandardError</a> when :force option is set.
</p>
<pre>
  FileUtils.rm_r Dir.glob('/tmp/*')
  FileUtils.rm_r '/', :force =&gt; true          #  :-)
</pre>
<p>
WARNING: This method causes local vulnerability if one of parent
directories or removing directory tree are world writable (including /tmp,
whose permission is 1777), and the current process has strong privilege
such as Unix super user (root), and the system has symbolic link. For
secure removing, read the documentation of <a
href="FileUtils.html#M002068">remove_entry_secure</a> carefully, and set
:secure option to true. Default is :secure=>false.
</p>
<p>
NOTE: This method calls <a
href="FileUtils.html#M002068">remove_entry_secure</a> if :secure option is
set. See also <a href="FileUtils.html#M002068">remove_entry_secure</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002065_source')" id="l_M002065_source">show</a>
                        
                    </p>
                    <div id="M002065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 612</span>
612:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
613:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_r'</span>]
614:     <span class="ruby-comment cmt"># options[:secure] = true unless options.key?(:secure)</span>
615:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
616:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{options[:force] ? 'f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
617:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
618:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
619:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
620:         <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
621:       <span class="ruby-keyword kw">else</span>
622:         <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
623:       <span class="ruby-keyword kw">end</span>
624:     <span class="ruby-keyword kw">end</span>
625:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002066">
                    
                    <a name="M002066"></a><b>rm_rf</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose secure
</p>
<p>
Equivalent to
</p>
<pre>
  #rm_r(list, :force =&gt; true)
</pre>
<p>
WARNING: This method causes local vulnerability. Read the documentation of
<a href="FileUtils.html#M002065">rm_r</a> first.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M002067">rmtree</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002066_source')" id="l_M002066_source">show</a>
                        
                    </p>
                    <div id="M002066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 640</span>
640:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
641:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_rf'</span>]
642:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
643:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
644:     <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
645:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002046">
                    
                    <a name="M002046"></a><b>rmdir</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop, verbose
</p>
<p>
Removes one or more directories.
</p>
<pre>
  FileUtils.rmdir 'somedir'
  FileUtils.rmdir %w(somedir anydir otherdir)
  # Does not really remove directory; outputs message.
  FileUtils.rmdir 'somedir', :verbose =&gt; true, :noop =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002046_source')" id="l_M002046_source">show</a>
                        
                    </p>
                    <div id="M002046_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
259:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rmdir'</span>]
260:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
261:     <span class="ruby-identifier">parents</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:parents</span>]
262:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{parents ? '-p ' : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
263:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
264:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
265:       <span class="ruby-keyword kw">begin</span>
266:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>))
267:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parents</span>
268:           <span class="ruby-keyword kw">until</span> (<span class="ruby-identifier">parent</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)) <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>
269:             <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>)
270:           <span class="ruby-keyword kw">end</span>
271:         <span class="ruby-keyword kw">end</span>
272:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
273:       <span class="ruby-keyword kw">end</span>
274:     <span class="ruby-keyword kw">end</span>
275:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002067">
                    
                    <a name="M002067"></a><b>rmtree</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002066">rm_rf</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002064">
                    
                    <a name="M002064"></a><b>safe_unlink</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002063">rm_f</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002050">
                    
                    <a name="M002050"></a><b>symlink</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M002049">ln_s</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002095">
                    
                    <a name="M002095"></a><b>touch</b>(list, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose
</p>
<p>
Updates modification time (mtime) and access time (atime) of file(s) in
<tt>list</tt>. Files are created if they don&#8217;t exist.
</p>
<pre>
  FileUtils.touch 'timestamp'
  FileUtils.touch Dir.glob('*.c');  system 'make'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002095_source')" id="l_M002095_source">show</a>
                        
                    </p>
                    <div id="M002095_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/fileutils.rb, line 1028</span>
1028:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
1029:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'touch'</span>]
1030:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
1031:     <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:nocreate</span>]
1032:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mtime</span>]
1033:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
1034:       <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? ' -c' : ''}#{t ? t.strftime(' -t %Y%m%d%H%M.%S') : ''}#{list.join ' '}&quot;</span>
1035:     <span class="ruby-keyword kw">end</span>
1036:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
1037:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
1038:       <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
1039:       <span class="ruby-keyword kw">begin</span>
1040:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
1041:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
1042:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">created</span>
1043:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">'a'</span>) {
1044:           ;
1045:         }
1046:         <span class="ruby-identifier">created</span> = <span class="ruby-keyword kw">true</span>
1047:         <span class="ruby-keyword kw">retry</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>
1048:       <span class="ruby-keyword kw">end</span>
1049:     <span class="ruby-keyword kw">end</span>
1050:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002040">
                    
                    <a name="M002040"></a><b>uptodate?</b>(new, old_list, options = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Options: (none)
</p>
<p>
Returns true if <tt>newer</tt> is newer than all <tt>old_list</tt>.
Non-existent files are older than any file.
</p>
<pre>
  FileUtils.uptodate?('hello.o', %w(hello.c hello.h)) or    #       system 'make hello.o'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002040_source')" id="l_M002040_source">show</a>
                        
                    </p>
                    <div id="M002040_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/fileutils.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
142:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'uptodate? does not accept any option'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>
143: 
144:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
145:     <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
146:     <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
147:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
148:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
149:       <span class="ruby-keyword kw">end</span>
150:     <span class="ruby-keyword kw">end</span>
151:     <span class="ruby-keyword kw">true</span>
152:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    