<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>PrettyPrint</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            PrettyPrint 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/prettyprint_rb.html">lib/prettyprint.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This class implements a pretty printing algorithm. It finds line breaks and
nice indentations for grouped structure.
</p>
<p>
By default, the class assumes that primitive elements are strings and each
byte in the strings have single column in width. But it can be used for
other situations by giving suitable arguments for some methods:
</p>
<ul>
<li>newline object and space generation block for <a
href="PrettyPrint.html#M002974">PrettyPrint.new</a>

</li>
<li>optional width argument for <a
href="PrettyPrint.html#M002978">PrettyPrint#text</a>

</li>
<li><a href="PrettyPrint.html#M002980">PrettyPrint#breakable</a>

</li>
</ul>
<p>
There are several candidate uses:
</p>
<ul>
<li>text formatting using proportional fonts

</li>
<li>multibyte characters which has columns different to number of bytes

</li>
<li>non-string formatting

</li>
</ul>
<h2>Bugs</h2>
<ul>
<li>Box based formatting?

</li>
<li>Other (better) model/algorithm?

</li>
</ul>
<h2>References</h2>
<p>
Christian Lindig, Strictly Pretty, March 2000, <a
href="http://www.st.cs.uni-sb.de/~lindig/papers/#pretty">www.st.cs.uni-sb.de/~lindig/papers/#pretty</a>
</p>
<p>
Philip Wadler, <a href="A.html">A</a> prettier printer, March 1998, <a
href="http://homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier">homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier</a>
</p>
<h2>Author</h2>
<p>
Tanaka Akira <akr@m17n.org>
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M002977">break_outmost_groups</a>,</li>
                
                <li><a href="#M002980">breakable</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M002975">current_group</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M002979">fill_breakable</a>,</li>
                
                <li><a href="#M002976">first?</a>,</li>
                
                <li><a href="#M002984">flush</a>,</li>
                
                <li><a href="#M002972">format</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M002981">group</a>,</li>
                
                <li><a href="#M002982">group_sub</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002983">nest</a>,</li>
                
                <li><a href="#M002974">new</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002973">singleline_format</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M002978">text</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="PrettyPrint/Breakable.html">PrettyPrint::Breakable</a></li>
        
        <li><span class="type">CLASS</span> <a href="PrettyPrint/Group.html">PrettyPrint::Group</a></li>
        
        <li><span class="type">CLASS</span> <a href="PrettyPrint/GroupQueue.html">PrettyPrint::GroupQueue</a></li>
        
        <li><span class="type">CLASS</span> <a href="PrettyPrint/SingleLine.html">PrettyPrint::SingleLine</a></li>
        
        <li><span class="type">CLASS</span> <a href="PrettyPrint/Text.html">PrettyPrint::Text</a></li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>output</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>maxwidth</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>newline</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>genspace</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>indent</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>group_queue</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002972">
                    
                    <a name="M002972"></a><b>format</b>(output='', maxwidth=79, newline=&quot;\n&quot;, genspace=lambda {|n| ' ' * n}
                    
                </div>
                
                <div class="description">
                  <p>
This is a convenience method which is same as follows:
</p>
<pre>
  begin
    q = PrettyPrint.new(output, maxwidth, newline, &amp;genspace)
    ...
    q.flush
    output
  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002972_source')" id="l_M002972_source">show</a>
                        
                    </p>
                    <div id="M002972_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">output</span>=<span class="ruby-value str">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-value">79</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-identifier">genspace</span>=<span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-value str">' '</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">n</span>})
42:     <span class="ruby-identifier">q</span> = <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">output</span>, <span class="ruby-identifier">maxwidth</span>, <span class="ruby-identifier">newline</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">genspace</span>)
43:     <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">q</span>
44:     <span class="ruby-identifier">q</span>.<span class="ruby-identifier">flush</span>
45:     <span class="ruby-identifier">output</span>
46:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002974">
                    
                    <a name="M002974"></a><b>new</b>(output='', maxwidth=79, newline=&quot;\n&quot;, &amp;genspace)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a buffer for pretty printing.
</p>
<p>
<tt>output</tt> is an output target. If it is not specified, &#8217;&#8217;
is assumed. It should have a << method which accepts the first argument
<tt>obj</tt> of <a href="PrettyPrint.html#M002978">PrettyPrint#text</a>,
the first argument <tt>sep</tt> of <a
href="PrettyPrint.html#M002980">PrettyPrint#breakable</a>, the first
argument <tt>newline</tt> of <a
href="PrettyPrint.html#M002974">PrettyPrint.new</a>, and the result of a
given block for <a href="PrettyPrint.html#M002974">PrettyPrint.new</a>.
</p>
<p>
<tt>maxwidth</tt> specifies maximum line length. If it is not specified, 79
is assumed. However actual outputs may overflow <tt>maxwidth</tt> if long
non-breakable texts are provided.
</p>
<p>
<tt>newline</tt> is used for line breaks. &#8220;n&#8220; is used if it is
not specified.
</p>
<p>
The block is used to generate spaces. {|width| &#8217; &#8217; * width} is
used if it is not given.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002974_source')" id="l_M002974_source">show</a>
                        
                    </p>
                    <div id="M002974_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 78</span>
78:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">output</span>=<span class="ruby-value str">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-value">79</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">genspace</span>)
79:     <span class="ruby-ivar">@output</span> = <span class="ruby-identifier">output</span>
80:     <span class="ruby-ivar">@maxwidth</span> = <span class="ruby-identifier">maxwidth</span>
81:     <span class="ruby-ivar">@newline</span> = <span class="ruby-identifier">newline</span>
82:     <span class="ruby-ivar">@genspace</span> = <span class="ruby-identifier">genspace</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-value str">' '</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">n</span>}
83: 
84:     <span class="ruby-ivar">@output_width</span> = <span class="ruby-value">0</span>
85:     <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
86:     <span class="ruby-ivar">@buffer</span> = []
87: 
88:     <span class="ruby-identifier">root_group</span> = <span class="ruby-constant">Group</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>)
89:     <span class="ruby-ivar">@group_stack</span> = [<span class="ruby-identifier">root_group</span>]
90:     <span class="ruby-ivar">@group_queue</span> = <span class="ruby-constant">GroupQueue</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root_group</span>)
91:     <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
92:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002973">
                    
                    <a name="M002973"></a><b>singleline_format</b>(output='', maxwidth=nil, newline=nil, genspace=nil)
                    
                </div>
                
                <div class="description">
                  <p>
This is similar to PrettyPrint::format but the result has no breaks.
</p>
<p>
<tt>maxwidth</tt>, <tt>newline</tt> and <tt>genspace</tt> are ignored.
</p>
<p>
The invocation of <tt>breakable</tt> in the block doesn&#8217;t break a
line and is treated as just an invocation of <tt>text</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002973_source')" id="l_M002973_source">show</a>
                        
                    </p>
                    <div id="M002973_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PrettyPrint</span>.<span class="ruby-identifier">singleline_format</span>(<span class="ruby-identifier">output</span>=<span class="ruby-value str">''</span>, <span class="ruby-identifier">maxwidth</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">newline</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">genspace</span>=<span class="ruby-keyword kw">nil</span>)
56:     <span class="ruby-identifier">q</span> = <span class="ruby-constant">SingleLine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">output</span>)
57:     <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">q</span>
58:     <span class="ruby-identifier">output</span>
59:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002977">
                    
                    <a name="M002977"></a><b>break_outmost_groups</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002977_source')" id="l_M002977_source">show</a>
                        
                    </p>
                    <div id="M002977_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">break_outmost_groups</span>
123:     <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@maxwidth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@output_width</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@buffer_width</span>
124:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">group</span> = <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">deq</span>
125:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">breakables</span>.<span class="ruby-identifier">empty?</span>
126:         <span class="ruby-identifier">data</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">shift</span>
127:         <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
128:         <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">width</span>
129:       <span class="ruby-keyword kw">end</span>
130:       <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Text</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">first</span>
131:         <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">shift</span>
132:         <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
133:         <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">width</span>
134:       <span class="ruby-keyword kw">end</span>
135:     <span class="ruby-keyword kw">end</span>
136:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002980">
                    
                    <a name="M002980"></a><b>breakable</b>(sep=' ', width=sep.length)
                    
                </div>
                
                <div class="description">
                  <p>
This tells &#8220;you can break a line here if necessary&#8221;, and a
<tt>width</tt>-column text <tt>sep</tt> is inserted if a line is not broken
at the point.
</p>
<p>
If <tt>sep</tt> is not specified, &#8220; &#8220; is used.
</p>
<p>
If <tt>width</tt> is not specified, <tt>sep.length</tt> is used. You will
have to specify this when <tt>sep</tt> is a multibyte character, for
example.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002980_source')" id="l_M002980_source">show</a>
                        
                    </p>
                    <div id="M002980_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">breakable</span>(<span class="ruby-identifier">sep</span>=<span class="ruby-value str">' '</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">sep</span>.<span class="ruby-identifier">length</span>)
171:     <span class="ruby-identifier">group</span> = <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>
172:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">break?</span>
173:       <span class="ruby-identifier">flush</span>
174:       <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@newline</span>
175:       <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@genspace</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@indent</span>)
176:       <span class="ruby-ivar">@output_width</span> = <span class="ruby-ivar">@indent</span>
177:       <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
178:     <span class="ruby-keyword kw">else</span>
179:       <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Breakable</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sep</span>, <span class="ruby-identifier">width</span>, <span class="ruby-keyword kw">self</span>)
180:       <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
181:       <span class="ruby-identifier">break_outmost_groups</span>
182:     <span class="ruby-keyword kw">end</span>
183:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002975">
                    
                    <a name="M002975"></a><b>current_group</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002975_source')" id="l_M002975_source">show</a>
                        
                    </p>
                    <div id="M002975_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 96</span>
96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_group</span>
97:     <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>
98:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002979">
                    
                    <a name="M002979"></a><b>fill_breakable</b>(sep=' ', width=sep.length)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002979_source')" id="l_M002979_source">show</a>
                        
                    </p>
                    <div id="M002979_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fill_breakable</span>(<span class="ruby-identifier">sep</span>=<span class="ruby-value str">' '</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">sep</span>.<span class="ruby-identifier">length</span>)
159:     <span class="ruby-identifier">group</span> { <span class="ruby-identifier">breakable</span> <span class="ruby-identifier">sep</span>, <span class="ruby-identifier">width</span> }
160:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002976">
                    
                    <a name="M002976"></a><b>first?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
first? is a predicate to test the call is a first call to first? with
current group.
</p>
<p>
It is useful to format comma separated values as:
</p>
<pre>
  q.group(1, '[', ']') {
    xxx.each {|yyy|
      unless q.first?
        q.text ','
        q.breakable
      end
      ... pretty printing yyy ...
    }
  }
</pre>
<p>
first? is obsoleted in 1.8.2.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002976_source')" id="l_M002976_source">show</a>
                        
                    </p>
                    <div id="M002976_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">first?</span>
118:     <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;PrettyPrint#first? is obsoleted at 1.8.2.&quot;</span>
119:     <span class="ruby-identifier">current_group</span>.<span class="ruby-identifier">first?</span>
120:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002984">
                    
                    <a name="M002984"></a><b>flush</b>()
                    
                </div>
                
                <div class="description">
                  <p>
outputs buffered data.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002984_source')" id="l_M002984_source">show</a>
                        
                    </p>
                    <div id="M002984_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 233</span>
233:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flush</span>
234:     <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
235:       <span class="ruby-ivar">@output_width</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">output</span>(<span class="ruby-ivar">@output</span>, <span class="ruby-ivar">@output_width</span>)
236:     }
237:     <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">clear</span>
238:     <span class="ruby-ivar">@buffer_width</span> = <span class="ruby-value">0</span>
239:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002981">
                    
                    <a name="M002981"></a><b>group</b>(indent=0, open_obj='', close_obj='', open_width=open_obj.length, close_width=close_obj.length)
                    
                </div>
                
                <div class="description">
                  <p>
Groups line break hints added in the block. The line break hints are all to
be used or not.
</p>
<p>
If <tt>indent</tt> is specified, the method call is regarded as nested by
nest(indent) { &#8230; }.
</p>
<p>
If <tt>open_obj</tt> is specified, <tt>text open_obj, open_width</tt> is
called before grouping. If <tt>close_obj</tt> is specified, <tt>text
close_obj, close_width</tt> is called after grouping.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002981_source')" id="l_M002981_source">show</a>
                        
                    </p>
                    <div id="M002981_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">group</span>(<span class="ruby-identifier">indent</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">open_obj</span>=<span class="ruby-value str">''</span>, <span class="ruby-identifier">close_obj</span>=<span class="ruby-value str">''</span>, <span class="ruby-identifier">open_width</span>=<span class="ruby-identifier">open_obj</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">close_width</span>=<span class="ruby-identifier">close_obj</span>.<span class="ruby-identifier">length</span>)
196:     <span class="ruby-identifier">text</span> <span class="ruby-identifier">open_obj</span>, <span class="ruby-identifier">open_width</span>
197:     <span class="ruby-identifier">group_sub</span> {
198:       <span class="ruby-identifier">nest</span>(<span class="ruby-identifier">indent</span>) {
199:         <span class="ruby-keyword kw">yield</span>
200:       }
201:     }
202:     <span class="ruby-identifier">text</span> <span class="ruby-identifier">close_obj</span>, <span class="ruby-identifier">close_width</span>
203:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002982">
                    
                    <a name="M002982"></a><b>group_sub</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002982_source')" id="l_M002982_source">show</a>
                        
                    </p>
                    <div id="M002982_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">group_sub</span>
206:     <span class="ruby-identifier">group</span> = <span class="ruby-constant">Group</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">depth</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
207:     <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">group</span>
208:     <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">enq</span> <span class="ruby-identifier">group</span>
209:     <span class="ruby-keyword kw">begin</span>
210:       <span class="ruby-keyword kw">yield</span>
211:     <span class="ruby-keyword kw">ensure</span>
212:       <span class="ruby-ivar">@group_stack</span>.<span class="ruby-identifier">pop</span>
213:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">breakables</span>.<span class="ruby-identifier">empty?</span>
214:         <span class="ruby-ivar">@group_queue</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">group</span>
215:       <span class="ruby-keyword kw">end</span>
216:     <span class="ruby-keyword kw">end</span>
217:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002983">
                    
                    <a name="M002983"></a><b>nest</b>(indent)
                    
                </div>
                
                <div class="description">
                  <p>
Increases left margin after newline with <tt>indent</tt> for line breaks
added in the block.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002983_source')" id="l_M002983_source">show</a>
                        
                    </p>
                    <div id="M002983_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nest</span>(<span class="ruby-identifier">indent</span>)
223:     <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">indent</span>
224:     <span class="ruby-keyword kw">begin</span>
225:       <span class="ruby-keyword kw">yield</span>
226:     <span class="ruby-keyword kw">ensure</span>
227:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">indent</span>
228:     <span class="ruby-keyword kw">end</span>
229:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002978">
                    
                    <a name="M002978"></a><b>text</b>(obj, width=obj.length)
                    
                </div>
                
                <div class="description">
                  <p>
This adds <tt>obj</tt> as a text of <tt>width</tt> columns in width.
</p>
<p>
If <tt>width</tt> is not specified, obj.length is used.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002978_source')" id="l_M002978_source">show</a>
                        
                    </p>
                    <div id="M002978_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/prettyprint.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">width</span>=<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">length</span>)
143:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">empty?</span>
144:       <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">obj</span>
145:       <span class="ruby-ivar">@output_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
146:     <span class="ruby-keyword kw">else</span>
147:       <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">last</span>
148:       <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Text</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">text</span>
149:         <span class="ruby-identifier">text</span> = <span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>
150:         <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">text</span>
151:       <span class="ruby-keyword kw">end</span>
152:       <span class="ruby-identifier">text</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">width</span>)
153:       <span class="ruby-ivar">@buffer_width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
154:       <span class="ruby-identifier">break_outmost_groups</span>
155:     <span class="ruby-keyword kw">end</span>
156:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    