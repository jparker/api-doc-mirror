<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>REXML::Parsers::XPathParser</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            REXML::Parsers::XPathParser 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/rexml/parsers/xpathparser_rb.html">lib/rexml/parsers/xpathparser.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
You don&#8217;t want to use this class. Really. Use <a
href="../XPath.html">XPath</a>, which is a wrapper for this class. Believe
me. You don&#8217;t want to poke around in here. There is strange, dark
magic at work in this code. Beware. Go back! Go back while you still can!
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M002683">AdditiveExpr</a>,</li>
                
                <li><a href="#M002680">AndExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M002681">EqualityExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M002688">FilterExpr</a>,</li>
                
                <li><a href="#M002690">FunctionCall</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M002675">LocationPath</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M002684">MultiplicativeExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002677">NodeTest</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M002679">OrExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M002687">PathExpr</a>,</li>
                
                <li><a href="#M002678">Predicate</a>,</li>
                
                <li><a href="#M002689">PrimaryExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002682">RelationalExpr</a>,</li>
                
                <li><a href="#M002676">RelativeLocationPath</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M002685">UnaryExpr</a>,</li>
                
                <li><a href="#M002686">UnionExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M002655">abbreviate</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M002656">expand</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M002691">get_group</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002652">namespaces=</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M002653">parse</a>,</li>
                
                <li><a href="#M002692">parse_args</a>,</li>
                
                <li><a href="#M002654">predicate</a>,</li>
                
                <li><a href="#M002657">predicate_to_string</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../../REXML.html">REXML</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">LITERAL</td>
            <td>=</td>
            <td class="attr-value">/^'([^']*)'|^&quot;([^&quot;]*)&quot;/u</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">AXIS</td>
            <td>=</td>
            <td class="attr-value">/^(ancestor|ancestor-or-self|attribute|child|descendant|descendant-or-self|following|following-sibling|namespace|parent|preceding|preceding-sibling|self)::/</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="XPathParser.html#M002676">RelativeLocationPath</a>
</p>
<pre>
  |                                                    Step
    | (AXIS_NAME '::' | '@' | '')                     AxisSpecifier
      NodeTest
        Predicate
    | '.' | '..'                                      AbbreviatedStep
  |  RelativeLocationPath '/' Step
  | RelativeLocationPath '//' Step
</pre>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NCNAMETEST</td>
            <td>=</td>
            <td class="attr-value">/^(#{NCNAME_STR}):\*/u</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><pre>
 Returns a 1-1 map of the nodeset
 The contents of the resulting array are either:
   true/false, if a positive match
   String, if a name match
</pre>
<p>
<a href="XPathParser.html#M002677">NodeTest</a>
</p>
<pre>
  | ('*' | NCNAME ':' '*' | QNAME)                NameTest
  | NODE_TYPE '(' ')'                              NodeType
  | PI '(' LITERAL ')'                            PI
    | '[' expr ']'                                Predicate
</pre>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">QNAME</td>
            <td>=</td>
            <td class="attr-value">Namespace::NAMESPLIT</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NODE_TYPE</td>
            <td>=</td>
            <td class="attr-value">/^(comment|text|node)\(\s*\)/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PI</td>
            <td>=</td>
            <td class="attr-value">/^processing-instruction\(/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">VARIABLE_REFERENCE</td>
            <td>=</td>
            <td class="attr-value">/^\$(#{NAME_STR})/u</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
| <a href="XPathParser.html#VARIABLE_REFERENCE">VARIABLE_REFERENCE</a> |
&#8217;(&#8217; expr &#8217;)&#8217; | <a
href="XPathParser.html#LITERAL">LITERAL</a> | <a
href="XPathParser.html#NUMBER">NUMBER</a> | <a
href="XPathParser.html#M002690">FunctionCall</a>
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NUMBER</td>
            <td>=</td>
            <td class="attr-value">/^(\d*\.?\d+)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NT</td>
            <td>=</td>
            <td class="attr-value">/^comment|text|processing-instruction|node$/</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002655">
                    
                    <a name="M002655"></a><b>abbreviate</b>( path )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002655_source')" id="l_M002655_source">show</a>
                        
                    </p>
                    <div id="M002655_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 33</span>
33:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">path</span> )
34:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span>
35:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
36:         <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">false</span>
37:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
38:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
39:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
40:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:node</span>
41:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:attribute</span>
42:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
43:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;@&quot;</span>
44:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:child</span>
45:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
46:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:descendant_or_self</span>
47:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span>
48:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:self</span>
49:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;.&quot;</span>
50:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:parent</span>
51:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;..&quot;</span>
52:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:any</span>
53:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;*&quot;</span>
54:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:text</span>
55:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;text()&quot;</span>
56:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:following</span>, <span class="ruby-identifier">:following_sibling</span>,
57:                 <span class="ruby-identifier">:ancestor</span>, <span class="ruby-identifier">:ancestor_or_self</span>, <span class="ruby-identifier">:descendant</span>,
58:                 <span class="ruby-identifier">:namespace</span>, <span class="ruby-identifier">:preceding</span>, <span class="ruby-identifier">:preceding_sibling</span>
59:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
60:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;_&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>)
61:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;::&quot;</span>
62:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:qname</span>
63:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
64:             <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
65:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
66:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
67:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:predicate</span>
68:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'['</span>
69:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span> ) {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">x</span> ) }
70:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">']'</span>
71:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:document</span>
72:             <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">true</span>
73:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:function</span>
74:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
75:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;( &quot;</span>
76:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>[<span class="ruby-value">0</span>] ) {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">x</span> )}
77:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; )&quot;</span>
78:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:literal</span>
79:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%Q{ &quot;#{path.shift}&quot; }</span>
80:           <span class="ruby-keyword kw">else</span>
81:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
82:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;UNKNOWN(&quot;</span>
83:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">inspect</span>
84:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>
85:           <span class="ruby-keyword kw">end</span>
86:         <span class="ruby-keyword kw">end</span>
87:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">string</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">document</span>
88:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>
89:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002656">
                    
                    <a name="M002656"></a><b>expand</b>( path )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002656_source')" id="l_M002656_source">show</a>
                        
                    </p>
                    <div id="M002656_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 91</span>
 91:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand</span>( <span class="ruby-identifier">path</span> )
 92:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span>
 93:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
 94:         <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">false</span>
 95:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
 96:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
 97:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
 98:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:node</span>
 99:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;node()&quot;</span>
100:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:attribute</span>, <span class="ruby-identifier">:child</span>, <span class="ruby-identifier">:following</span>, <span class="ruby-identifier">:following_sibling</span>,
101:                 <span class="ruby-identifier">:ancestor</span>, <span class="ruby-identifier">:ancestor_or_self</span>, <span class="ruby-identifier">:descendant</span>, <span class="ruby-identifier">:descendant_or_self</span>,
102:                 <span class="ruby-identifier">:namespace</span>, <span class="ruby-identifier">:preceding</span>, <span class="ruby-identifier">:preceding_sibling</span>, <span class="ruby-identifier">:self</span>, <span class="ruby-identifier">:parent</span>
103:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
104:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;_&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>)
105:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;::&quot;</span>
106:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:any</span>
107:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;*&quot;</span>
108:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:qname</span>
109:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
110:             <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
111:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
112:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
113:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:predicate</span>
114:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'['</span>
115:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span> ) { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">expand</span>(<span class="ruby-identifier">x</span>) }
116:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">']'</span>
117:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:document</span>
118:             <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">true</span>
119:           <span class="ruby-keyword kw">else</span>
120:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
121:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;UNKNOWN(&quot;</span>
122:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">inspect</span>
123:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>
124:           <span class="ruby-keyword kw">end</span>
125:         <span class="ruby-keyword kw">end</span>
126:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">string</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">document</span>
127:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>
128:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002652">
                    
                    <a name="M002652"></a><b>namespaces=</b>( namespaces )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002652_source')" id="l_M002652_source">show</a>
                        
                    </p>
                    <div id="M002652_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 14</span>
14:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">namespaces=</span>( <span class="ruby-identifier">namespaces</span> )
15:         <span class="ruby-constant">Functions</span><span class="ruby-operator">::</span><span class="ruby-identifier">namespace_context</span> = <span class="ruby-identifier">namespaces</span>
16:         <span class="ruby-ivar">@namespaces</span> = <span class="ruby-identifier">namespaces</span>
17:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002653">
                    
                    <a name="M002653"></a><b>parse</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002653_source')" id="l_M002653_source">show</a>
                        
                    </p>
                    <div id="M002653_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 19</span>
19:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span> <span class="ruby-identifier">path</span>
20:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/([\(\[])\s+/</span>, <span class="ruby-value str">'\1'</span>) <span class="ruby-comment cmt"># Strip ignorable spaces</span>
21:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp re">/\s+([\]\)])/</span>, <span class="ruby-value str">'\1'</span> )
22:         <span class="ruby-identifier">parsed</span> = []
23:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">OrExpr</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>)
24:         <span class="ruby-identifier">parsed</span>
25:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002654">
                    
                    <a name="M002654"></a><b>predicate</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002654_source')" id="l_M002654_source">show</a>
                        
                    </p>
                    <div id="M002654_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 27</span>
27:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">predicate</span> <span class="ruby-identifier">path</span>
28:         <span class="ruby-identifier">parsed</span> = []
29:         <span class="ruby-constant">Predicate</span>( <span class="ruby-node">&quot;[#{path}]&quot;</span>, <span class="ruby-identifier">parsed</span> )
30:         <span class="ruby-identifier">parsed</span>
31:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002657">
                    
                    <a name="M002657"></a><b>predicate_to_string</b>( path, &amp;block )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002657_source')" id="l_M002657_source">show</a>
                        
                    </p>
                    <div id="M002657_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 130</span>
130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
131:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
132:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>]
133:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:and</span>, <span class="ruby-identifier">:or</span>, <span class="ruby-identifier">:mult</span>, <span class="ruby-identifier">:plus</span>, <span class="ruby-identifier">:minus</span>, <span class="ruby-identifier">:neq</span>, <span class="ruby-identifier">:eq</span>, <span class="ruby-identifier">:lt</span>, <span class="ruby-identifier">:gt</span>, <span class="ruby-identifier">:lteq</span>, <span class="ruby-identifier">:gteq</span>, <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:mod</span>, <span class="ruby-identifier">:union</span>
134:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
135:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
136:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:eq</span>
137:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;=&quot;</span>
138:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:lt</span>
139:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&lt;&quot;</span>
140:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:gt</span>
141:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&gt;&quot;</span>
142:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:lteq</span>
143:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&lt;=&quot;</span>
144:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:gteq</span>
145:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&gt;=&quot;</span>
146:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:neq</span>
147:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;!=&quot;</span>
148:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:union</span>
149:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;|&quot;</span>
150:           <span class="ruby-keyword kw">end</span>
151:           <span class="ruby-identifier">left</span> = <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
152:           <span class="ruby-identifier">right</span> = <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
153:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
154:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">left</span>
155:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
156:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>
157:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
158:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">right</span>
159:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
160:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:function</span>
161:           <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
162:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
163:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
164:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;( &quot;</span>
165:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
166:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; )&quot;</span>
167:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:literal</span>
168:           <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
169:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
170:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">inspect</span>
171:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
172:         <span class="ruby-keyword kw">else</span>
173:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
174:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">yield</span>( <span class="ruby-identifier">path</span> )
175:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
176:         <span class="ruby-keyword kw">end</span>
177:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value str">&quot; &quot;</span>)
178:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M002683">
                    
                    <a name="M002683"></a><b>AdditiveExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002683">AdditiveExpr</a> (&#8217;+&#8217; | S
&#8217;-&#8217;) <a href="XPathParser.html#M002684">MultiplicativeExpr</a>
| <a href="XPathParser.html#M002684">MultiplicativeExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002683_source')" id="l_M002683_source">show</a>
                        
                    </p>
                    <div id="M002683_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 448</span>
448:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AdditiveExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
449:         <span class="ruby-comment cmt">#puts &quot;ADDITIVE &gt;&gt;&gt; #{path}&quot;</span>
450:         <span class="ruby-identifier">n</span> = []
451:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">MultiplicativeExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
452:         <span class="ruby-comment cmt">#puts &quot;ADDITIVE &lt;&lt;&lt; #{rest}&quot;</span>
453:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
454:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\+| -)\s*/</span>
455:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?+</span>
456:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:plus</span>, <span class="ruby-identifier">n</span>, [] ]
457:             <span class="ruby-keyword kw">else</span>
458:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:minus</span>, <span class="ruby-identifier">n</span>, [] ]
459:             <span class="ruby-keyword kw">end</span>
460:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">MultiplicativeExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
461:           <span class="ruby-keyword kw">end</span>
462:         <span class="ruby-keyword kw">end</span>
463:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
464:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
465:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
466:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
467:         <span class="ruby-keyword kw">end</span>
468:         <span class="ruby-identifier">rest</span>
469:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002680">
                    
                    <a name="M002680"></a><b>AndExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002680">AndExpr</a> S &#8216;and&#8217; S <a
href="XPathParser.html#M002681">EqualityExpr</a> | <a
href="XPathParser.html#M002681">EqualityExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002680_source')" id="l_M002680_source">show</a>
                        
                    </p>
                    <div id="M002680_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 373</span>
373:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AndExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
374:         <span class="ruby-comment cmt">#puts &quot;AND &gt;&gt;&gt; #{path}&quot;</span>
375:         <span class="ruby-identifier">n</span> = []
376:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">EqualityExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
377:         <span class="ruby-comment cmt">#puts &quot;AND &lt;&lt;&lt; #{rest}&quot;</span>
378:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
379:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*( and )/</span>
380:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:and</span>, <span class="ruby-identifier">n</span>, [] ]
381:             <span class="ruby-comment cmt">#puts &quot;AND &gt;&gt;&gt; #{rest}&quot;</span>
382:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">EqualityExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
383:             <span class="ruby-comment cmt">#puts &quot;AND &lt;&lt;&lt; #{rest}&quot;</span>
384:           <span class="ruby-keyword kw">end</span>
385:         <span class="ruby-keyword kw">end</span>
386:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
387:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
388:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
389:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
390:         <span class="ruby-keyword kw">end</span>
391:         <span class="ruby-identifier">rest</span>
392:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002681">
                    
                    <a name="M002681"></a><b>EqualityExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002681">EqualityExpr</a> (&#8217;=&#8217; |
&#8217;!=&#8217;) <a href="XPathParser.html#M002682">RelationalExpr</a> |
<a href="XPathParser.html#M002682">RelationalExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002681_source')" id="l_M002681_source">show</a>
                        
                    </p>
                    <div id="M002681_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 396</span>
396:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">EqualityExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
397:         <span class="ruby-comment cmt">#puts &quot;EQUALITY &gt;&gt;&gt; #{path}&quot;</span>
398:         <span class="ruby-identifier">n</span> = []
399:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">RelationalExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
400:         <span class="ruby-comment cmt">#puts &quot;EQUALITY &lt;&lt;&lt; #{rest}&quot;</span>
401:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
402:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(!?=)\s*/</span>
403:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?!</span>
404:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:neq</span>, <span class="ruby-identifier">n</span>, [] ]
405:             <span class="ruby-keyword kw">else</span>
406:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:eq</span>, <span class="ruby-identifier">n</span>, [] ]
407:             <span class="ruby-keyword kw">end</span>
408:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">RelationalExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
409:           <span class="ruby-keyword kw">end</span>
410:         <span class="ruby-keyword kw">end</span>
411:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
412:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
413:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
414:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
415:         <span class="ruby-keyword kw">end</span>
416:         <span class="ruby-identifier">rest</span>
417:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002688">
                    
                    <a name="M002688"></a><b>FilterExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002688">FilterExpr</a> <a
href="XPathParser.html#M002678">Predicate</a> | <a
href="XPathParser.html#M002689">PrimaryExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002688_source')" id="l_M002688_source">show</a>
                        
                    </p>
                    <div id="M002688_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 561</span>
561:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FilterExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
562:         <span class="ruby-comment cmt">#puts &quot;FILTER &gt;&gt;&gt; #{path}&quot;</span>
563:         <span class="ruby-identifier">n</span> = []
564:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">PrimaryExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
565:         <span class="ruby-comment cmt">#puts &quot;FILTER &lt;&lt;&lt; #{path}&quot;</span>
566:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">Predicate</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
567:         <span class="ruby-comment cmt">#puts &quot;FILTER &lt;&lt;&lt; #{path}&quot;</span>
568:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
569:         <span class="ruby-identifier">path</span>
570:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002690">
                    
                    <a name="M002690"></a><b>FunctionCall</b>(rest, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| FUNCTION_NAME &#8217;(&#8217; ( expr ( &#8217;,&#8217; expr )* )?
&#8217;)&#8217;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002690_source')" id="l_M002690_source">show</a>
                        
                    </p>
                    <div id="M002690_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 622</span>
622:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FunctionCall</span> <span class="ruby-identifier">rest</span>, <span class="ruby-identifier">parsed</span>
623:         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">arguments</span> = <span class="ruby-identifier">parse_args</span>(<span class="ruby-identifier">rest</span>)
624:         <span class="ruby-identifier">argset</span> = []
625:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">argument</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">arguments</span>
626:           <span class="ruby-identifier">args</span> = []
627:           <span class="ruby-constant">OrExpr</span>( <span class="ruby-identifier">argument</span>, <span class="ruby-identifier">args</span> )
628:           <span class="ruby-identifier">argset</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">args</span>
629:         <span class="ruby-keyword kw">end</span>
630:         <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">argset</span>
631:         <span class="ruby-identifier">path</span>
632:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002675">
                    
                    <a name="M002675"></a><b>LocationPath</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="XPathParser.html#M002675">LocationPath</a>
</p>
<pre>
  | RelativeLocationPath
  | '/' RelativeLocationPath?
  | '//' RelativeLocationPath
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002675_source')" id="l_M002675_source">show</a>
                        
                    </p>
                    <div id="M002675_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 185</span>
185:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">LocationPath</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
186:         <span class="ruby-comment cmt">#puts &quot;LocationPath '#{path}'&quot;</span>
187:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">strip</span>
188:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
189:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:document</span>
190:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
191:             <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:descendant_or_self</span>
192:             <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
193:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
194:           <span class="ruby-keyword kw">else</span>
195:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
196:           <span class="ruby-keyword kw">end</span>
197:         <span class="ruby-keyword kw">end</span>
198:         <span class="ruby-comment cmt">#puts parsed.inspect</span>
199:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RelativeLocationPath</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span> ) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
200:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002684">
                    
                    <a name="M002684"></a><b>MultiplicativeExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002684">MultiplicativeExpr</a>
(&#8217;*&#8217; | S (&#8216;div&#8217; | &#8216;mod&#8217;) S) <a
href="XPathParser.html#M002685">UnaryExpr</a> | <a
href="XPathParser.html#M002685">UnaryExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002684_source')" id="l_M002684_source">show</a>
                        
                    </p>
                    <div id="M002684_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 473</span>
473:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">MultiplicativeExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
474:         <span class="ruby-comment cmt">#puts &quot;MULT &gt;&gt;&gt; #{path}&quot;</span>
475:         <span class="ruby-identifier">n</span> = []
476:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">UnaryExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
477:         <span class="ruby-comment cmt">#puts &quot;MULT &lt;&lt;&lt; #{rest}&quot;</span>
478:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
479:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\*| div | mod )\s*/</span>
480:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?*</span>
481:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:mult</span>, <span class="ruby-identifier">n</span>, [] ]
482:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-value str">&quot;div&quot;</span> )
483:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">n</span>, [] ]
484:             <span class="ruby-keyword kw">else</span>
485:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:mod</span>, <span class="ruby-identifier">n</span>, [] ]
486:             <span class="ruby-keyword kw">end</span>
487:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">UnaryExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
488:           <span class="ruby-keyword kw">end</span>
489:         <span class="ruby-keyword kw">end</span>
490:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
491:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
492:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
493:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
494:         <span class="ruby-keyword kw">end</span>
495:         <span class="ruby-identifier">rest</span>
496:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002677">
                    
                    <a name="M002677"></a><b>NodeTest</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002677_source')" id="l_M002677_source">show</a>
                        
                    </p>
                    <div id="M002677_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 283</span>
283:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">NodeTest</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
284:         <span class="ruby-comment cmt">#puts &quot;NodeTest with #{path}&quot;</span>
285:         <span class="ruby-identifier">res</span> = <span class="ruby-keyword kw">nil</span>
286:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>
287:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\*/</span>
288:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
289:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:any</span>
290:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NODE_TYPE</span>
291:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">$1</span>
292:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
293:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">'-'</span>, <span class="ruby-value str">'_'</span>).<span class="ruby-identifier">intern</span>
294:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">PI</span>
295:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
296:           <span class="ruby-identifier">literal</span> = <span class="ruby-keyword kw">nil</span>
297:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^\s*\)/</span>
298:             <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">LITERAL</span>
299:             <span class="ruby-identifier">literal</span> = <span class="ruby-identifier">$1</span>
300:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
301:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ParseException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Missing ')' after processing instruction&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?)</span>
302:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
303:           <span class="ruby-keyword kw">end</span>
304:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:processing_instruction</span>
305:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">literal</span> <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>)
306:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NCNAMETEST</span>
307:           <span class="ruby-comment cmt">#puts &quot;NCNAMETEST&quot;</span>
308:           <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
309:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
310:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:namespace</span>
311:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span>
312:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">QNAME</span>
313:           <span class="ruby-comment cmt">#puts &quot;QNAME&quot;</span>
314:           <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
315:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$2</span>
316:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
317:           <span class="ruby-identifier">prefix</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">prefix</span>
318:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:qname</span>
319:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span>
320:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
321:         <span class="ruby-keyword kw">end</span>
322:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
323:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002679">
                    
                    <a name="M002679"></a><b>OrExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002679">OrExpr</a> S &#8216;or&#8217; S <a
href="XPathParser.html#M002680">AndExpr</a> | <a
href="XPathParser.html#M002680">AndExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002679_source')" id="l_M002679_source">show</a>
                        
                    </p>
                    <div id="M002679_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 352</span>
352:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">OrExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
353:         <span class="ruby-comment cmt">#puts &quot;OR &gt;&gt;&gt; #{path}&quot;</span>
354:         <span class="ruby-identifier">n</span> = []
355:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AndExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
356:         <span class="ruby-comment cmt">#puts &quot;OR &lt;&lt;&lt; #{rest}&quot;</span>
357:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
358:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*( or )/</span>
359:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:or</span>, <span class="ruby-identifier">n</span>, [] ]
360:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AndExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
361:           <span class="ruby-keyword kw">end</span>
362:         <span class="ruby-keyword kw">end</span>
363:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
364:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
365:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
366:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
367:         <span class="ruby-keyword kw">end</span>
368:         <span class="ruby-identifier">rest</span>
369:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002687">
                    
                    <a name="M002687"></a><b>PathExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002675">LocationPath</a> | <a
href="XPathParser.html#M002688">FilterExpr</a> (&#8217;/&#8217; |
&#8217;//&#8217;) <a
href="XPathParser.html#M002676">RelativeLocationPath</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002687_source')" id="l_M002687_source">show</a>
                        
                    </p>
                    <div id="M002687_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 541</span>
541:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PathExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
542:         <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*/</span>
543:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
544:         <span class="ruby-comment cmt">#puts &quot;PATH &gt;&gt;&gt; #{path}&quot;</span>
545:         <span class="ruby-identifier">n</span> = []
546:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">FilterExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
547:         <span class="ruby-comment cmt">#puts &quot;PATH &lt;&lt;&lt; '#{rest}'&quot;</span>
548:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
549:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">rest</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
550:             <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RelativeLocationPath</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">n</span>)
551:           <span class="ruby-keyword kw">end</span>
552:         <span class="ruby-keyword kw">end</span>
553:         <span class="ruby-comment cmt">#puts &quot;BEFORE WITH '#{rest}'&quot;</span>
554:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">LocationPath</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">n</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A[\/\.\@\[\w*]/</span>
555:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
556:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rest</span>
557:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002678">
                    
                    <a name="M002678"></a><b>Predicate</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
Filters the supplied nodeset on the predicate(s)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002678_source')" id="l_M002678_source">show</a>
                        
                    </p>
                    <div id="M002678_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 326</span>
326:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Predicate</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
327:         <span class="ruby-comment cmt">#puts &quot;PREDICATE with #{path}&quot;</span>
328:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
329:         <span class="ruby-identifier">predicates</span> = []
330:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
331:           <span class="ruby-identifier">path</span>, <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">get_group</span>(<span class="ruby-identifier">path</span>)
332:           <span class="ruby-identifier">predicates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">expr</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">expr</span>
333:         <span class="ruby-keyword kw">end</span>
334:         <span class="ruby-comment cmt">#puts &quot;PREDICATES = #{predicates.inspect}&quot;</span>
335:         <span class="ruby-identifier">predicates</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pred</span><span class="ruby-operator">|</span>
336:           <span class="ruby-comment cmt">#puts &quot;ORING #{pred}&quot;</span>
337:           <span class="ruby-identifier">preds</span> = []
338:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:predicate</span>
339:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">preds</span>
340:           <span class="ruby-constant">OrExpr</span>(<span class="ruby-identifier">pred</span>, <span class="ruby-identifier">preds</span>)
341:         }
342:         <span class="ruby-comment cmt">#puts &quot;PREDICATES = #{predicates.inspect}&quot;</span>
343:         <span class="ruby-identifier">path</span>
344:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002689">
                    
                    <a name="M002689"></a><b>PrimaryExpr</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002689_source')" id="l_M002689_source">show</a>
                        
                    </p>
                    <div id="M002689_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PrimaryExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
581:         <span class="ruby-identifier">arry</span> = []
582:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>
583:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">VARIABLE_REFERENCE</span>
584:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>
585:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
586:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:variable</span>
587:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">varname</span>
588:           <span class="ruby-comment cmt">#arry &lt;&lt; @variables[ varname ]</span>
589:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(\w[-\w]*)(?:\()/</span>
590:           <span class="ruby-comment cmt">#puts &quot;PrimaryExpr :: Function &gt;&gt;&gt; #$1 -- '#$''&quot;</span>
591:           <span class="ruby-identifier">fname</span> = <span class="ruby-identifier">$1</span>
592:           <span class="ruby-identifier">tmp</span> = <span class="ruby-identifier">$'</span>
593:           <span class="ruby-comment cmt">#puts &quot;#{fname} =~ #{NT.inspect}&quot;</span>
594:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fname</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NT</span>
595:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">tmp</span>
596:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:function</span>
597:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fname</span>
598:           <span class="ruby-identifier">path</span> = <span class="ruby-constant">FunctionCall</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>)
599:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NUMBER</span>
600:           <span class="ruby-comment cmt">#puts &quot;LITERAL or NUMBER: #$1&quot;</span>
601:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-identifier">$2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">$1</span>
602:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
603:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:literal</span>
604:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">varname</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">varname</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">varname</span>.<span class="ruby-identifier">to_i</span>)
605:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">LITERAL</span>
606:           <span class="ruby-comment cmt">#puts &quot;LITERAL or NUMBER: #$1&quot;</span>
607:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-identifier">$2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">$1</span>
608:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
609:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:literal</span>
610:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">varname</span>
611:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\(/</span>                                               <span class="ruby-comment cmt">#/</span>
612:           <span class="ruby-identifier">path</span>, <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">get_group</span>(<span class="ruby-identifier">path</span>)
613:           <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">contents</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
614:           <span class="ruby-identifier">n</span> = []
615:           <span class="ruby-constant">OrExpr</span>( <span class="ruby-identifier">contents</span>, <span class="ruby-identifier">n</span> )
616:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
617:         <span class="ruby-keyword kw">end</span>
618:         <span class="ruby-identifier">path</span>
619:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002682">
                    
                    <a name="M002682"></a><b>RelationalExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002682">RelationalExpr</a> (&#8217;<&#8217; |
&#8217;>&#8217; | &#8217;<=&#8217; | &#8217;>=&#8217;) <a
href="XPathParser.html#M002683">AdditiveExpr</a> | <a
href="XPathParser.html#M002683">AdditiveExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002682_source')" id="l_M002682_source">show</a>
                        
                    </p>
                    <div id="M002682_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RelationalExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
422:         <span class="ruby-comment cmt">#puts &quot;RELATION &gt;&gt;&gt; #{path}&quot;</span>
423:         <span class="ruby-identifier">n</span> = []
424:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AdditiveExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
425:         <span class="ruby-comment cmt">#puts &quot;RELATION &lt;&lt;&lt; #{rest}&quot;</span>
426:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
427:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*([&lt;&gt;]=?)\s*/</span>
428:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?&lt;</span>
429:               <span class="ruby-identifier">sym</span> = <span class="ruby-value str">&quot;lt&quot;</span>
430:             <span class="ruby-keyword kw">else</span>
431:               <span class="ruby-identifier">sym</span> = <span class="ruby-value str">&quot;gt&quot;</span>
432:             <span class="ruby-keyword kw">end</span>
433:             <span class="ruby-identifier">sym</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;eq&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?=</span>
434:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">intern</span>, <span class="ruby-identifier">n</span>, [] ]
435:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AdditiveExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
436:           <span class="ruby-keyword kw">end</span>
437:         <span class="ruby-keyword kw">end</span>
438:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
439:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
440:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
441:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
442:         <span class="ruby-keyword kw">end</span>
443:         <span class="ruby-identifier">rest</span>
444:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002676">
                    
                    <a name="M002676"></a><b>RelativeLocationPath</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002676_source')" id="l_M002676_source">show</a>
                        
                    </p>
                    <div id="M002676_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 211</span>
211:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RelativeLocationPath</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
212:         <span class="ruby-comment cmt">#puts &quot;RelativeLocationPath #{path}&quot;</span>
213:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
214:           <span class="ruby-comment cmt"># (axis or @ or &lt;child::&gt;) nodetest predicate  &gt;</span>
215:           <span class="ruby-comment cmt"># OR                                          &gt;  / Step</span>
216:           <span class="ruby-comment cmt"># (. or ..)                                    &gt;</span>
217:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?.</span>
218:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?.</span>
219:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:parent</span>
220:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
221:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
222:             <span class="ruby-keyword kw">else</span>
223:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:self</span>
224:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
225:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
226:             <span class="ruby-keyword kw">end</span>
227:           <span class="ruby-keyword kw">else</span>
228:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?@</span>
229:               <span class="ruby-comment cmt">#puts &quot;ATTRIBUTE&quot;</span>
230:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:attribute</span>
231:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
232:               <span class="ruby-comment cmt"># Goto Nodetest</span>
233:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">AXIS</span>
234:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">'-'</span>,<span class="ruby-value str">'_'</span>).<span class="ruby-identifier">intern</span>
235:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
236:               <span class="ruby-comment cmt"># Goto Nodetest</span>
237:             <span class="ruby-keyword kw">else</span>
238:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:child</span>
239:             <span class="ruby-keyword kw">end</span>
240: 
241:             <span class="ruby-comment cmt">#puts &quot;NODETESTING '#{path}'&quot;</span>
242:             <span class="ruby-identifier">n</span> = []
243:             <span class="ruby-identifier">path</span> = <span class="ruby-constant">NodeTest</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span>)
244:             <span class="ruby-comment cmt">#puts &quot;NODETEST RETURNED '#{path}'&quot;</span>
245: 
246:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
247:               <span class="ruby-identifier">path</span> = <span class="ruby-constant">Predicate</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
248:             <span class="ruby-keyword kw">end</span>
249: 
250:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
251:           <span class="ruby-keyword kw">end</span>
252: 
253:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
254:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
255:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
256:                 <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:descendant_or_self</span>
257:                 <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
258:                 <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
259:               <span class="ruby-keyword kw">else</span>
260:                 <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
261:               <span class="ruby-keyword kw">end</span>
262:             <span class="ruby-keyword kw">else</span>
263:               <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
264:             <span class="ruby-keyword kw">end</span>
265:           <span class="ruby-keyword kw">end</span>
266:         <span class="ruby-keyword kw">end</span>
267:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
268:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002685">
                    
                    <a name="M002685"></a><b>UnaryExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| &#8217;-&#8217; <a href="XPathParser.html#M002685">UnaryExpr</a> | <a
href="XPathParser.html#M002686">UnionExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002685_source')" id="l_M002685_source">show</a>
                        
                    </p>
                    <div id="M002685_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 500</span>
500:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">UnaryExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
501:         <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(\-*)/</span>
502:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
503:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">and</span> ((<span class="ruby-identifier">$1</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
504:           <span class="ruby-identifier">mult</span> = <span class="ruby-value">-1</span>
505:         <span class="ruby-keyword kw">else</span>
506:           <span class="ruby-identifier">mult</span> = <span class="ruby-value">1</span>
507:         <span class="ruby-keyword kw">end</span>
508:         <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:neg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mult</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
509: 
510:         <span class="ruby-comment cmt">#puts &quot;UNARY &gt;&gt;&gt; #{path}&quot;</span>
511:         <span class="ruby-identifier">n</span> = []
512:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">UnionExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
513:         <span class="ruby-comment cmt">#puts &quot;UNARY &lt;&lt;&lt; #{path}&quot;</span>
514:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>( <span class="ruby-identifier">n</span> )
515:         <span class="ruby-identifier">path</span>
516:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002686">
                    
                    <a name="M002686"></a><b>UnionExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M002686">UnionExpr</a> &#8217;|&#8217; <a
href="XPathParser.html#M002687">PathExpr</a> | <a
href="XPathParser.html#M002687">PathExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002686_source')" id="l_M002686_source">show</a>
                        
                    </p>
                    <div id="M002686_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 520</span>
520:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">UnionExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
521:         <span class="ruby-comment cmt">#puts &quot;UNION &gt;&gt;&gt; #{path}&quot;</span>
522:         <span class="ruby-identifier">n</span> = []
523:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">PathExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
524:         <span class="ruby-comment cmt">#puts &quot;UNION &lt;&lt;&lt; #{rest}&quot;</span>
525:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
526:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\|)\s*/</span>
527:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:union</span>, <span class="ruby-identifier">n</span>, [] ]
528:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">PathExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
529:           <span class="ruby-keyword kw">end</span>
530:         <span class="ruby-keyword kw">end</span>
531:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
532:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>( <span class="ruby-identifier">n</span> )
533:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
534:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
535:         <span class="ruby-keyword kw">end</span>
536:         <span class="ruby-identifier">rest</span>
537:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002691">
                    
                    <a name="M002691"></a><b>get_group</b>(string)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="XPathParser.html#M002691">get_group</a>( &#8217;[foo]bar&#8217; )
-> [&#8216;bar&#8217;, &#8217;[foo]&#8217;]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002691_source')" id="l_M002691_source">show</a>
                        
                    </p>
                    <div id="M002691_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 635</span>
635:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_group</span> <span class="ruby-identifier">string</span>
636:         <span class="ruby-identifier">ind</span> = <span class="ruby-value">0</span>
637:         <span class="ruby-identifier">depth</span> = <span class="ruby-value">0</span>
638:         <span class="ruby-identifier">st</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>]
639:         <span class="ruby-identifier">en</span> = (<span class="ruby-identifier">st</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;(&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;)&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;]&quot;</span>)
640:         <span class="ruby-keyword kw">begin</span>
641:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>,<span class="ruby-value">1</span>]
642:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">st</span>
643:             <span class="ruby-identifier">depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
644:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">en</span>
645:             <span class="ruby-identifier">depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
646:           <span class="ruby-keyword kw">end</span>
647:           <span class="ruby-identifier">ind</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
648:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ind</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">length</span>
649:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">depth</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
650:         [<span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>], <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">ind</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]]
651:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002692">
                    
                    <a name="M002692"></a><b>parse_args</b>( string )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002692_source')" id="l_M002692_source">show</a>
                        
                    </p>
                    <div id="M002692_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 653</span>
653:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_args</span>( <span class="ruby-identifier">string</span> )
654:         <span class="ruby-identifier">arguments</span> = []
655:         <span class="ruby-identifier">ind</span> = <span class="ruby-value">0</span>
656:         <span class="ruby-identifier">inquot</span> = <span class="ruby-keyword kw">false</span>
657:         <span class="ruby-identifier">inapos</span> = <span class="ruby-keyword kw">false</span>
658:         <span class="ruby-identifier">depth</span> = <span class="ruby-value">1</span>
659:         <span class="ruby-keyword kw">begin</span>
660:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>]
661:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">?&quot;</span>
662:             <span class="ruby-identifier">inquot</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">inquot</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inapos</span>
663:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">?'</span>
664:             <span class="ruby-identifier">inapos</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">inapos</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inquot</span>
665:           <span class="ruby-keyword kw">else</span>
666:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inquot</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">inapos</span>
667:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>]
668:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?(</span>
669:                 <span class="ruby-identifier">depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
670:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
671:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
672:                   <span class="ruby-identifier">ind</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
673:                 <span class="ruby-keyword kw">end</span>
674:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?)</span>
675:                 <span class="ruby-identifier">depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
676:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
677:                   <span class="ruby-identifier">s</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">strip</span>
678:                   <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
679:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
680:                 <span class="ruby-keyword kw">end</span>
681:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?,</span>
682:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
683:                   <span class="ruby-identifier">s</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">strip</span>
684:                   <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
685:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
686:                   <span class="ruby-identifier">ind</span> = <span class="ruby-value">-1</span>
687:                 <span class="ruby-keyword kw">end</span>
688:               <span class="ruby-keyword kw">end</span>
689:             <span class="ruby-keyword kw">end</span>
690:           <span class="ruby-keyword kw">end</span>
691:           <span class="ruby-identifier">ind</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
692:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ind</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">length</span>
693:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">depth</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
694:         [<span class="ruby-identifier">string</span>,<span class="ruby-identifier">arguments</span>]
695:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    