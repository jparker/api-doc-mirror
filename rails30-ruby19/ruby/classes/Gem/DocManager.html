<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Gem::DocManager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Gem::DocManager 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rubygems/doc_manager_rb.html">lib/rubygems/doc_manager.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The documentation manager generates RDoc and RI for RubyGems.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M005692">configured_args</a>,</li>
                
                <li><a href="#M005693">configured_args=</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M005701">generate_rdoc</a>,</li>
                
                <li><a href="#M005700">generate_ri</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M005702">install_rdoc</a>,</li>
                
                <li><a href="#M005703">install_ri</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M005694">load_rdoc</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M005697">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M005698">rdoc_installed?</a>,</li>
                
                <li><a href="#M005695">rdoc_version</a>,</li>
                
                <li><a href="#M005699">ri_installed?</a>,</li>
                
                <li><a href="#M005704">run_rdoc</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M005705">setup_rdoc</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M005706">uninstall_doc</a>,</li>
                
                <li><a href="#M005696">update_ri_cache</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Kernel.html">Kernel</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M005692">
                    
                    <a name="M005692"></a><b>configured_args</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005692_source')" id="l_M005692_source">show</a>
                        
                    </p>
                    <div id="M005692_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 19</span>
19:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configured_args</span>
20:     <span class="ruby-ivar">@configured_args</span> <span class="ruby-operator">||=</span> []
21:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005693">
                    
                    <a name="M005693"></a><b>configured_args=</b>(args)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005693_source')" id="l_M005693_source">show</a>
                        
                    </p>
                    <div id="M005693_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configured_args=</span>(<span class="ruby-identifier">args</span>)
24:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">args</span>
25:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
26:       <span class="ruby-ivar">@configured_args</span> = <span class="ruby-identifier">args</span>
27:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
28:       <span class="ruby-ivar">@configured_args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">split</span>
29:     <span class="ruby-keyword kw">end</span>
30:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005694">
                    
                    <a name="M005694"></a><b>load_rdoc</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Load RDoc from a gem if it is available, otherwise from Ruby&#8217;s stdlib
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005694_source')" id="l_M005694_source">show</a>
                        
                    </p>
                    <div id="M005694_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 35</span>
35:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">load_rdoc</span>
36:     <span class="ruby-keyword kw">begin</span>
37:       <span class="ruby-identifier">gem</span> <span class="ruby-value str">'rdoc'</span>
38:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>
39:       <span class="ruby-comment cmt"># use built-in RDoc</span>
40:     <span class="ruby-keyword kw">end</span>
41: 
42:     <span class="ruby-keyword kw">begin</span>
43:       <span class="ruby-identifier">require</span> <span class="ruby-value str">'rdoc/rdoc'</span>
44: 
45:       <span class="ruby-ivar">@rdoc_version</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span> <span class="ruby-keyword kw">then</span>
46:                         <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
47:                       <span class="ruby-keyword kw">else</span>
48:                         <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">'1.0.1'</span> <span class="ruby-comment cmt"># HACK parsing is hard</span>
49:                       <span class="ruby-keyword kw">end</span>
50: 
51:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
52:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentError</span>,
53:           <span class="ruby-node">&quot;ERROR: RDoc documentation generator not installed: #{e}&quot;</span>
54:     <span class="ruby-keyword kw">end</span>
55:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005697">
                    
                    <a name="M005697"></a><b>new</b>(spec, rdoc_args=&quot;&quot;)
                    
                </div>
                
                <div class="description">
                  <p>
Create a document manager for <tt>spec</tt>. <tt>rdoc_args</tt> contains
arguments for RDoc (template etc.) as a <a
href="../String.html">String</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005697_source')" id="l_M005697_source">show</a>
                        
                    </p>
                    <div id="M005697_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">rdoc_args</span>=<span class="ruby-value str">&quot;&quot;</span>)
88:     <span class="ruby-ivar">@spec</span> = <span class="ruby-identifier">spec</span>
89:     <span class="ruby-ivar">@doc_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">installation_path</span>, <span class="ruby-value str">&quot;doc&quot;</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_name</span>)
90:     <span class="ruby-ivar">@rdoc_args</span> = <span class="ruby-identifier">rdoc_args</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span>[] <span class="ruby-operator">:</span> <span class="ruby-identifier">rdoc_args</span>.<span class="ruby-identifier">split</span>
91:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005695">
                    
                    <a name="M005695"></a><b>rdoc_version</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005695_source')" id="l_M005695_source">show</a>
                        
                    </p>
                    <div id="M005695_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rdoc_version</span>
58:     <span class="ruby-ivar">@rdoc_version</span>
59:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005696">
                    
                    <a name="M005696"></a><b>update_ri_cache</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Updates the RI cache for RDoc 2 if it is installed
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005696_source')" id="l_M005696_source">show</a>
                        
                    </p>
                    <div id="M005696_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 64</span>
64:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">update_ri_cache</span>
65:     <span class="ruby-identifier">load_rdoc</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">return</span>
66: 
67:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span> <span class="ruby-comment cmt"># RDoc 1 does not have VERSION</span>
68: 
69:     <span class="ruby-identifier">require</span> <span class="ruby-value str">'rdoc/ri/driver'</span>
70: 
71:     <span class="ruby-identifier">options</span> = {
72:       <span class="ruby-identifier">:use_cache</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
73:       <span class="ruby-identifier">:use_system</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
74:       <span class="ruby-identifier">:use_site</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
75:       <span class="ruby-identifier">:use_home</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
76:       <span class="ruby-identifier">:use_gems</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
77:       <span class="ruby-identifier">:formatter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Formatter</span>,
78:     }
79: 
80:     <span class="ruby-identifier">driver</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Driver</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">class_cache</span>
81:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M005701">
                    
                    <a name="M005701"></a><b>generate_rdoc</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Generate the RDoc documents for this gem spec.
</p>
<p>
Note that if both RI and RDoc documents are generated from the same
process, the RI docs should be done first (a likely bug in RDoc will cause
RI docs generation to fail if run after RDoc).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005701_source')" id="l_M005701_source">show</a>
                        
                    </p>
                    <div id="M005701_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_rdoc</span>
129:     <span class="ruby-identifier">setup_rdoc</span>
130:     <span class="ruby-identifier">install_rdoc</span>
131: 
132:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@doc_dir</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-ivar">@doc_dir</span>)
133:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005700">
                    
                    <a name="M005700"></a><b>generate_ri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Generate the RI documents for this gem spec.
</p>
<p>
Note that if both RI and RDoc documents are generated from the same
process, the RI docs should be done first (a likely bug in RDoc will cause
RI docs generation to fail if run after RDoc).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005700_source')" id="l_M005700_source">show</a>
                        
                    </p>
                    <div id="M005700_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 114</span>
114:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_ri</span>
115:     <span class="ruby-identifier">setup_rdoc</span>
116:     <span class="ruby-identifier">install_ri</span> <span class="ruby-comment cmt"># RDoc bug, ri goes first</span>
117: 
118:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@doc_dir</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-ivar">@doc_dir</span>)
119:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005702">
                    
                    <a name="M005702"></a><b>install_rdoc</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Generate and install RDoc into the documentation directory
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005702_source')" id="l_M005702_source">show</a>
                        
                    </p>
                    <div id="M005702_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_rdoc</span>
139:     <span class="ruby-identifier">rdoc_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@doc_dir</span>, <span class="ruby-value str">'rdoc'</span>
140: 
141:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">rdoc_dir</span>
142: 
143:     <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Installing RDoc documentation for #{@spec.full_name}...&quot;</span>
144:     <span class="ruby-identifier">run_rdoc</span> <span class="ruby-value str">'--op'</span>, <span class="ruby-identifier">rdoc_dir</span>
145:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005703">
                    
                    <a name="M005703"></a><b>install_ri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Generate and install RI into the documentation directory
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005703_source')" id="l_M005703_source">show</a>
                        
                    </p>
                    <div id="M005703_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_ri</span>
151:     <span class="ruby-identifier">ri_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@doc_dir</span>, <span class="ruby-value str">'ri'</span>
152: 
153:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">ri_dir</span>
154: 
155:     <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Installing ri documentation for #{@spec.full_name}...&quot;</span>
156:     <span class="ruby-identifier">run_rdoc</span> <span class="ruby-value str">'--ri'</span>, <span class="ruby-value str">'--op'</span>, <span class="ruby-identifier">ri_dir</span>
157:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005698">
                    
                    <a name="M005698"></a><b>rdoc_installed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Is the RDoc documentation installed?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005698_source')" id="l_M005698_source">show</a>
                        
                    </p>
                    <div id="M005698_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 96</span>
96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rdoc_installed?</span>
97:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@doc_dir</span>, <span class="ruby-value str">&quot;rdoc&quot;</span>))
98:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005699">
                    
                    <a name="M005699"></a><b>ri_installed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Is the RI documentation installed?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005699_source')" id="l_M005699_source">show</a>
                        
                    </p>
                    <div id="M005699_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 103</span>
103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ri_installed?</span>
104:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@doc_dir</span>, <span class="ruby-value str">&quot;ri&quot;</span>))
105:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005704">
                    
                    <a name="M005704"></a><b>run_rdoc</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Run RDoc with <tt>args</tt>, which is an ARGV style argument list
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005704_source')" id="l_M005704_source">show</a>
                        
                    </p>
                    <div id="M005704_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run_rdoc</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
163:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">rdoc_options</span>
164:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">configured_args</span>
165:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'--quiet'</span>
166:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">clone</span>
167:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">extra_rdoc_files</span>
168:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'--title'</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@spec.full_name} Documentation&quot;</span>
169:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">end</span>
170: 
171:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">rdoc_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'2.4.0'</span>) <span class="ruby-keyword kw">then</span>
172:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'--inline-source'</span>
173:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'--promiscuous'</span>
174:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'-p'</span>
175:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'--one-file'</span>
176:       <span class="ruby-comment cmt"># HACK more</span>
177:     <span class="ruby-keyword kw">end</span>
178: 
179:     <span class="ruby-identifier">r</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span>.<span class="ruby-identifier">new</span>
180: 
181:     <span class="ruby-identifier">old_pwd</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
182:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">full_gem_path</span>
183: 
184:     <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;rdoc #{args.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
185: 
186:     <span class="ruby-keyword kw">begin</span>
187:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">document</span> <span class="ruby-identifier">args</span>
188:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EACCES</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
189:       <span class="ruby-identifier">dirname</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;-&quot;</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">strip</span>
190:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dirname</span>)
191:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RuntimeError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
192:       <span class="ruby-identifier">alert_error</span> <span class="ruby-node">&quot;While generating documentation for #{@spec.full_name}&quot;</span>
193:       <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">errs</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;... MESSAGE:   #{ex}&quot;</span>
194:       <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">errs</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;... RDOC args: #{args.join(' ')}&quot;</span>
195:       <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">errs</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\t#{ex.backtrace.join &quot;\n\t&quot;}&quot;</span> <span class="ruby-keyword kw">if</span>
196:       <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">backtrace</span>
197:       <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">errs</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;(continuing with the rest of the installation)&quot;</span>
198:     <span class="ruby-keyword kw">ensure</span>
199:       <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">old_pwd</span>
200:     <span class="ruby-keyword kw">end</span>
201:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005705">
                    
                    <a name="M005705"></a><b>setup_rdoc</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005705_source')" id="l_M005705_source">show</a>
                        
                    </p>
                    <div id="M005705_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_rdoc</span>
204:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-ivar">@doc_dir</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span>(<span class="ruby-ivar">@doc_dir</span>) <span class="ruby-keyword kw">then</span>
205:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@doc_dir</span>)
206:     <span class="ruby-keyword kw">end</span>
207: 
208:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@doc_dir</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-ivar">@doc_dir</span>)
209: 
210:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">load_rdoc</span>
211:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005706">
                    
                    <a name="M005706"></a><b>uninstall_doc</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Remove RDoc and RI documentation
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005706_source')" id="l_M005706_source">show</a>
                        
                    </p>
                    <div id="M005706_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rubygems/doc_manager.rb, line 216</span>
216:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstall_doc</span>
217:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>) <span class="ruby-keyword kw">unless</span>
218:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>
219: 
220:     <span class="ruby-identifier">original_name</span> = [
221:       <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">name</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">version</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">original_platform</span>].<span class="ruby-identifier">join</span> <span class="ruby-value str">'-'</span>
222: 
223:     <span class="ruby-identifier">doc_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>, <span class="ruby-value str">'doc'</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">full_name</span>
224:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">doc_dir</span> <span class="ruby-keyword kw">then</span>
225:       <span class="ruby-identifier">doc_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>, <span class="ruby-value str">'doc'</span>, <span class="ruby-identifier">original_name</span>
226:     <span class="ruby-keyword kw">end</span>
227: 
228:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">doc_dir</span>
229: 
230:     <span class="ruby-identifier">ri_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>, <span class="ruby-value str">'ri'</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">full_name</span>
231: 
232:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">ri_dir</span> <span class="ruby-keyword kw">then</span>
233:       <span class="ruby-identifier">ri_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">installation_path</span>, <span class="ruby-value str">'ri'</span>, <span class="ruby-identifier">original_name</span>
234:     <span class="ruby-keyword kw">end</span>
235: 
236:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">ri_dir</span>
237:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    