<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>IPAddr</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            IPAddr 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/ipaddr_rb.html">lib/ipaddr.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="IPAddr.html">IPAddr</a> provides a set of methods to manipulate an
IP address. Both IPv4 and IPv6 are supported.
</p>
<h2>Example</h2>
<pre>
  require 'ipaddr'

  ipaddr1 = IPAddr.new &quot;3ffe:505:2::1&quot;

  p ipaddr1                   #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&gt;

  p ipaddr1.to_s              #=&gt; &quot;3ffe:505:2::1&quot;

  ipaddr2 = ipaddr1.mask(48)  #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0000/ffff:ffff:ffff:0000:0000:0000:0000:0000&gt;

  p ipaddr2.to_s              #=&gt; &quot;3ffe:505:2::&quot;

  ipaddr3 = IPAddr.new &quot;192.168.2.0/24&quot;

  p ipaddr3                   #=&gt; #&lt;IPAddr: IPv4:192.168.2.0/255.255.255.0&gt;
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M001933">&</a>,</li>
                
                <li><a href="#M001936"><<</a>,</li>
                
                <li><a href="#M001957"><=></a>,</li>
                
                <li><a href="#M001938">==</a>,</li>
                
                <li><a href="#M001941">===</a>,</li>
                
                <li><a href="#M001935">>></a>,</li>
                
                <li><a href="#M001969">_reverse</a>,</li>
                
                <li><a href="#M001970">_to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001968">addr_mask</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M001965">coerce_other</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M001958">eql?</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M001959">hash</a>,</li>
                
                <li><a href="#M001945">hton</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M001967">in6_addr</a>,</li>
                
                <li><a href="#M001966">in_addr</a>,</li>
                
                <li><a href="#M001940">include?</a>,</li>
                
                <li><a href="#M001961">inspect</a>,</li>
                
                <li><a href="#M001954">ip6_arpa</a>,</li>
                
                <li><a href="#M001955">ip6_int</a>,</li>
                
                <li><a href="#M001946">ipv4?</a>,</li>
                
                <li><a href="#M001951">ipv4_compat</a>,</li>
                
                <li><a href="#M001949">ipv4_compat?</a>,</li>
                
                <li><a href="#M001950">ipv4_mapped</a>,</li>
                
                <li><a href="#M001948">ipv4_mapped?</a>,</li>
                
                <li><a href="#M001947">ipv6?</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M001939">mask</a>,</li>
                
                <li><a href="#M001963">mask!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M001952">native</a>,</li>
                
                <li><a href="#M001964">new</a>,</li>
                
                <li><a href="#M001931">new_ntoh</a>,</li>
                
                <li><a href="#M001932">ntop</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M001953">reverse</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M001962">set</a>,</li>
                
                <li><a href="#M001956">succ</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M001942">to_i</a>,</li>
                
                <li><a href="#M001960">to_range</a>,</li>
                
                <li><a href="#M001943">to_s</a>,</li>
                
                <li><a href="#M001944">to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M001934">|</a>,</li>
                
                <li><a href="#M001937">~</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="Kernel.html">Kernel</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">IN4MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffff</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffffffffffffffffffffffffffff</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6FORMAT</td>
            <td>=</td>
            <td class="attr-value">([&quot;%.4x&quot;] * 8).join(':')</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>family</td>
            <td class='attr-desc'><p>
Returns the address family of this IP address.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M001964">
                    
                    <a name="M001964"></a><b>new</b>(addr = '::', family = Socket::AF_UNSPEC)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr object either from a human readable IP address
representation in string, or from a packed <a
href="IPAddr.html#M001966">in_addr</a> value followed by an address family.
</p>
<p>
In the former case, the following are the valid formats that will be
recognized: &#8220;address&#8221;, &#8220;address/prefixlen&#8220; and
&#8220;address/mask&#8220;, where IPv6 address may be enclosed in square
brackets (`[&#8217; and `]&#8217;). If a prefixlen or a mask is specified,
it returns a masked IP address. Although the address family is determined
automatically from a specified string, you can specify one explicitly by
the optional second argument.
</p>
<p>
Otherwise an IP address is generated from a packed <a
href="IPAddr.html#M001966">in_addr</a> value and an address family.
</p>
<p>
The <a href="IPAddr.html">IPAddr</a> class defines many methods and
operators, and some of those, such as &amp;, |, include? and ==, accept a
string, or a packed <a href="IPAddr.html#M001966">in_addr</a> value instead
of an <a href="IPAddr.html">IPAddr</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001964_source')" id="l_M001964_source">show</a>
                        
                    </p>
                    <div id="M001964_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 453</span>
453:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">addr</span> = <span class="ruby-value str">'::'</span>, <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>)
454:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">addr</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
455:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>
456:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
457:         <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">family</span>)
458:         <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
459:         <span class="ruby-keyword kw">return</span>
460:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>
461:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family must be specified&quot;</span>
462:       <span class="ruby-keyword kw">else</span>
463:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unsupported address family: #{family}&quot;</span>
464:       <span class="ruby-keyword kw">end</span>
465:     <span class="ruby-keyword kw">end</span>
466:     <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)
467:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\[(.*)\]$/i</span>
468:       <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
469:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
470:     <span class="ruby-keyword kw">end</span>
471:     <span class="ruby-comment cmt"># It seems AI_NUMERICHOST doesn't do the job.</span>
472:     <span class="ruby-comment cmt">#Socket.getaddrinfo(left, nil, Socket::AF_INET6, Socket::SOCK_STREAM, nil,</span>
473:     <span class="ruby-comment cmt">#                  Socket::AI_NUMERICHOST)</span>
474:     <span class="ruby-keyword kw">begin</span>
475:       <span class="ruby-constant">IPSocket</span>.<span class="ruby-identifier">getaddress</span>(<span class="ruby-identifier">prefix</span>)               <span class="ruby-comment cmt"># test if address is valid</span>
476:     <span class="ruby-keyword kw">rescue</span>
477:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
478:     <span class="ruby-keyword kw">end</span>
479:     <span class="ruby-ivar">@addr</span> = <span class="ruby-ivar">@family</span> = <span class="ruby-keyword kw">nil</span>
480:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
481:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">prefix</span>)
482:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@addr</span>
483:         <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
484:       <span class="ruby-keyword kw">end</span>
485:     <span class="ruby-keyword kw">end</span>
486:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
487:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">prefix</span>)
488:       <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
489:     <span class="ruby-keyword kw">end</span>
490:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">family</span>
491:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family mismatch&quot;</span>
492:     <span class="ruby-keyword kw">end</span>
493:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span>
494:       <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
495:     <span class="ruby-keyword kw">else</span>
496:       <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
497:     <span class="ruby-keyword kw">end</span>
498:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001931">
                    
                    <a name="M001931"></a><b>new_ntoh</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr containing the given network byte ordered string form
of an IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001931_source')" id="l_M001931_source">show</a>
                        
                    </p>
                    <div id="M001931_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 95</span>
95:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">new_ntoh</span>(<span class="ruby-identifier">addr</span>)
96:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>))
97:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001932">
                    
                    <a name="M001932"></a><b>ntop</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Convert a network byte ordered string form of an IP address into human
readable form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001932_source')" id="l_M001932_source">show</a>
                        
                    </p>
                    <div id="M001932_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>)
102:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">size</span>
103:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">4</span>
104:       <span class="ruby-identifier">s</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'C4'</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
105:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">16</span>
106:       <span class="ruby-identifier">s</span> = <span class="ruby-constant">IN6FORMAT</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'n8'</span>)
107:     <span class="ruby-keyword kw">else</span>
108:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
109:     <span class="ruby-keyword kw">end</span>
110:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>
111:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M001933">
                    
                    <a name="M001933"></a><b>&amp;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise AND.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001933_source')" id="l_M001933_source">show</a>
                        
                    </p>
                    <div id="M001933_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 114</span>
114:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&amp;</span>(<span class="ruby-identifier">other</span>)
115:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
116:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001936">
                    
                    <a name="M001936"></a><b>&lt;&lt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise left shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001936_source')" id="l_M001936_source">show</a>
                        
                    </p>
                    <div id="M001936_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">num</span>)
130:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">num</span>))
131:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001957">
                    
                    <a name="M001957"></a><b>&lt;=&gt;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Compares the ipaddr with another.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001957_source')" id="l_M001957_source">show</a>
                        
                    </p>
                    <div id="M001957_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 325</span>
325:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other</span>)
326:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
327: 
328:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
329: 
330:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
331:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001938">
                    
                    <a name="M001938"></a><b>==</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if two ipaddrs are equal.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001938_source')" id="l_M001938_source">show</a>
                        
                    </p>
                    <div id="M001938_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
140:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
141:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
142:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001941">
                    
                    <a name="M001941"></a><b>===</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="IPAddr.html#M001940">include?</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M001935">
                    
                    <a name="M001935"></a><b>&gt;&gt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise right-shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001935_source')" id="l_M001935_source">show</a>
                        
                    </p>
                    <div id="M001935_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&gt;&gt;</span>(<span class="ruby-identifier">num</span>)
125:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">num</span>)
126:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001958">
                    
                    <a name="M001958"></a><b>eql?</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Checks equality used by <a href="Hash.html">Hash</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001958_source')" id="l_M001958_source">show</a>
                        
                    </p>
                    <div id="M001958_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 335</span>
335:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
336:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
337:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001959">
                    
                    <a name="M001959"></a><b>hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash value used by <a href="Hash.html">Hash</a>, <a
href="Set.html">Set</a>, and <a href="Array.html">Array</a> classes
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001959_source')" id="l_M001959_source">show</a>
                        
                    </p>
                    <div id="M001959_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
341:     <span class="ruby-keyword kw">return</span> ([<span class="ruby-ivar">@addr</span>, <span class="ruby-ivar">@mask_addr</span>].<span class="ruby-identifier">hash</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span>) <span class="ruby-operator">|</span> (<span class="ruby-identifier">ipv4?</span> <span class="ruby-value">? </span><span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)
342:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001945">
                    
                    <a name="M001945"></a><b>hton</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a network byte ordered string form of the IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001945_source')" id="l_M001945_source">show</a>
                        
                    </p>
                    <div id="M001945_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 225</span>
225:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hton</span>
226:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
227:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
228:       <span class="ruby-keyword kw">return</span> [<span class="ruby-ivar">@addr</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'N'</span>)
229:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
230:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">7</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
231:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">112</span> <span class="ruby-operator">-</span> <span class="ruby-value">16</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffff</span>
232:       }.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'n8'</span>)
233:     <span class="ruby-keyword kw">else</span>
234:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001940">
                    
                    <a name="M001940"></a><b>include?</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the given ipaddr is in the range.
</p>
<p>
e.g.:
</p>
<pre>
  require 'ipaddr'
  net1 = IPAddr.new(&quot;192.168.2.0/24&quot;)
  net2 = IPAddr.new(&quot;192.168.2.100&quot;)
  net3 = IPAddr.new(&quot;192.168.3.0&quot;)
  p net1.include?(net2)     #=&gt; true
  p net1.include?(net3)     #=&gt; false
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="IPAddr.html#M001941">===</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001940_source')" id="l_M001940_source">show</a>
                        
                    </p>
                    <div id="M001940_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 159</span>
159:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other</span>)
160:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
161:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4_mapped?</span>
162:       <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0xffffffffffffffffffffffff</span>
163:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
164:       <span class="ruby-keyword kw">end</span>
165:       <span class="ruby-identifier">mask_addr</span> = (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
166:       <span class="ruby-identifier">addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
167:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
168:     <span class="ruby-keyword kw">else</span>
169:       <span class="ruby-identifier">mask_addr</span> = <span class="ruby-ivar">@mask_addr</span>
170:       <span class="ruby-identifier">addr</span> = <span class="ruby-ivar">@addr</span>
171:       <span class="ruby-identifier">family</span> = <span class="ruby-ivar">@family</span>
172:     <span class="ruby-keyword kw">end</span>
173:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ipv4_mapped?</span>
174:       <span class="ruby-identifier">other_addr</span> = (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
175:       <span class="ruby-identifier">other_family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
176:     <span class="ruby-keyword kw">else</span>
177:       <span class="ruby-identifier">other_addr</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
178:       <span class="ruby-identifier">other_family</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span>
179:     <span class="ruby-keyword kw">end</span>
180: 
181:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other_family</span>
182:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
183:     <span class="ruby-keyword kw">end</span>
184:     <span class="ruby-keyword kw">return</span> ((<span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>) <span class="ruby-operator">==</span> (<span class="ruby-identifier">other_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>))
185:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001961">
                    
                    <a name="M001961"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing a human-readable representation of the ipaddr.
(&#8220;#<IPAddr: family:address/mask>&#8221;)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001961_source')" id="l_M001961_source">show</a>
                        
                    </p>
                    <div id="M001961_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 362</span>
362:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
363:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
364:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
365:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv4&quot;</span>
366:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
367:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv6&quot;</span>
368:     <span class="ruby-keyword kw">else</span>
369:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
370:     <span class="ruby-keyword kw">end</span>
371:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;#&lt;%s: %s:%s/%s&gt;&quot;</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>,
372:                    <span class="ruby-identifier">af</span>, <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>), <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@mask_addr</span>))
373:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001954">
                    
                    <a name="M001954"></a><b>ip6_arpa</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC3172.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001954_source')" id="l_M001954_source">show</a>
                        
                    </p>
                    <div id="M001954_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 304</span>
304:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_arpa</span>
305:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
306:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
307:     <span class="ruby-keyword kw">end</span>
308:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.arpa&quot;</span>
309:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001955">
                    
                    <a name="M001955"></a><b>ip6_int</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC1886.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001955_source')" id="l_M001955_source">show</a>
                        
                    </p>
                    <div id="M001955_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 312</span>
312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_int</span>
313:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
314:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
315:     <span class="ruby-keyword kw">end</span>
316:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.int&quot;</span>
317:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001946">
                    
                    <a name="M001946"></a><b>ipv4?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001946_source')" id="l_M001946_source">show</a>
                        
                    </p>
                    <div id="M001946_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 239</span>
239:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4?</span>
240:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
241:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001951">
                    
                    <a name="M001951"></a><b>ipv4_compat</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001951_source')" id="l_M001951_source">show</a>
                        
                    </p>
                    <div id="M001951_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 273</span>
273:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat</span>
274:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
275:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
276:     <span class="ruby-keyword kw">end</span>
277:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
278:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001949">
                    
                    <a name="M001949"></a><b>ipv4_compat?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001949_source')" id="l_M001949_source">show</a>
                        
                    </p>
                    <div id="M001949_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 254</span>
254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat?</span>
255:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">||</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
256:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
257:     <span class="ruby-keyword kw">end</span>
258:     <span class="ruby-identifier">a</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
259:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>
260:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001950">
                    
                    <a name="M001950"></a><b>ipv4_mapped</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001950_source')" id="l_M001950_source">show</a>
                        
                    </p>
                    <div id="M001950_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 264</span>
264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped</span>
265:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
266:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
267:     <span class="ruby-keyword kw">end</span>
268:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xffff00000000</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
269:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001948">
                    
                    <a name="M001948"></a><b>ipv4_mapped?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001948_source')" id="l_M001948_source">show</a>
                        
                    </p>
                    <div id="M001948_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 249</span>
249:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped?</span>
250:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0xffff</span>
251:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001947">
                    
                    <a name="M001947"></a><b>ipv6?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001947_source')" id="l_M001947_source">show</a>
                        
                    </p>
                    <div id="M001947_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 244</span>
244:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv6?</span>
245:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
246:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001939">
                    
                    <a name="M001939"></a><b>mask</b>(prefixlen)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by masking IP address with the given
prefixlen/netmask. (e.g. 8, 64, &#8220;255.255.255.0&#8220;, etc.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001939_source')" id="l_M001939_source">show</a>
                        
                    </p>
                    <div id="M001939_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask</span>(<span class="ruby-identifier">prefixlen</span>)
147:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
148:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001952">
                    
                    <a name="M001952"></a><b>native</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the IPv6 address into a native
IPv4 address. If the IP address is not an IPv4-mapped or IPv4-compatible
IPv6 address, returns self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001952_source')" id="l_M001952_source">show</a>
                        
                    </p>
                    <div id="M001952_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 283</span>
283:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">native</span>
284:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_mapped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_compat?</span>
285:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
286:     <span class="ruby-keyword kw">end</span>
287:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>)
288:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001953">
                    
                    <a name="M001953"></a><b>reverse</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup. It returns a string in RFC3172
form for an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001953_source')" id="l_M001953_source">show</a>
                        
                    </p>
                    <div id="M001953_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 292</span>
292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse</span>
293:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
294:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
295:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.in-addr.arpa&quot;</span>
296:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
297:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ip6_arpa</span>
298:     <span class="ruby-keyword kw">else</span>
299:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
300:     <span class="ruby-keyword kw">end</span>
301:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001956">
                    
                    <a name="M001956"></a><b>succ</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the successor to the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001956_source')" id="l_M001956_source">show</a>
                        
                    </p>
                    <div id="M001956_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">succ</span>
321:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@family</span>)
322:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001942">
                    
                    <a name="M001942"></a><b>to_i</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the integer representation of the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001942_source')" id="l_M001942_source">show</a>
                        
                    </p>
                    <div id="M001942_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 189</span>
189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_i</span>
190:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span>
191:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001960">
                    
                    <a name="M001960"></a><b>to_range</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="Range.html">Range</a> object for the network address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001960_source')" id="l_M001960_source">show</a>
                        
                    </p>
                    <div id="M001960_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 345</span>
345:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_range</span>
346:     <span class="ruby-identifier">begin_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-ivar">@mask_addr</span>)
347: 
348:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
349:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
350:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
351:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
352:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
353:     <span class="ruby-keyword kw">else</span>
354:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
355:     <span class="ruby-keyword kw">end</span>
356: 
357:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">begin_addr</span>, <span class="ruby-ivar">@family</span>)<span class="ruby-operator">..</span><span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">end_addr</span>, <span class="ruby-ivar">@family</span>)
358:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001943">
                    
                    <a name="M001943"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001943_source')" id="l_M001943_source">show</a>
                        
                    </p>
                    <div id="M001943_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
195:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">to_string</span>
196:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4?</span>
197: 
198:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\b0{1,3}([\da-f]+)\b/i</span>, <span class="ruby-value str">'\1'</span>)
199:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
200:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\A0:0:0:0:0:0:0:0\Z/</span>, <span class="ruby-value str">'::'</span>)
201:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
202:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
203:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
204:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
205:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
206:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0\b/</span>, <span class="ruby-value str">':'</span>)
207:       <span class="ruby-keyword kw">break</span>
208:     <span class="ruby-keyword kw">end</span>
209:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:{3,}/</span>, <span class="ruby-value str">'::'</span>)
210: 
211:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A::(ffff:)?([\da-f]{1,4}):([\da-f]{1,4})\Z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">str</span>
212:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'::%s%d.%d.%d.%d'</span>, <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>)
213:     <span class="ruby-keyword kw">end</span>
214: 
215:     <span class="ruby-identifier">str</span>
216:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001944">
                    
                    <a name="M001944"></a><b>to_string</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation in canonical
form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001944_source')" id="l_M001944_source">show</a>
                        
                    </p>
                    <div id="M001944_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 220</span>
220:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_string</span>
221:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>)
222:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001934">
                    
                    <a name="M001934"></a><b>|</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise OR.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001934_source')" id="l_M001934_source">show</a>
                        
                    </p>
                    <div id="M001934_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">other</span>)
120:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
121:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001937">
                    
                    <a name="M001937"></a><b>~</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise negation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001937_source')" id="l_M001937_source">show</a>
                        
                    </p>
                    <div id="M001937_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">~</span>
135:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-operator">~@</span><span class="ruby-identifier">addr</span>))
136:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M001963">
                    
                    <a name="M001963"></a><b>mask!</b>(mask)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001963_source')" id="l_M001963_source">show</a>
                        
                    </p>
                    <div id="M001963_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">mask</span>)
398:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
399:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>
400:         <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">to_i</span>
401:       <span class="ruby-keyword kw">else</span>
402:         <span class="ruby-identifier">m</span> = <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">mask</span>)
403:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
404:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family is not same&quot;</span>
405:         <span class="ruby-keyword kw">end</span>
406:         <span class="ruby-ivar">@mask_addr</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_i</span>
407:         <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;=</span> <span class="ruby-ivar">@mask_addr</span>
408:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
409:       <span class="ruby-keyword kw">end</span>
410:     <span class="ruby-keyword kw">else</span>
411:       <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>
412:     <span class="ruby-keyword kw">end</span>
413:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
414:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
415:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">32</span>
416:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
417:       <span class="ruby-keyword kw">end</span>
418:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">32</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
419:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
420:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
421:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">128</span>
422:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
423:       <span class="ruby-keyword kw">end</span>
424:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">128</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
425:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
426:     <span class="ruby-keyword kw">else</span>
427:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
428:     <span class="ruby-keyword kw">end</span>
429:     <span class="ruby-ivar">@addr</span> = ((<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
430:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
431:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001962">
                    
                    <a name="M001962"></a><b>set</b>(addr, *family)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001962_source')" id="l_M001962_source">show</a>
                        
                    </p>
                    <div id="M001962_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 377</span>
377:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">family</span>)
378:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">:</span> <span class="ruby-ivar">@family</span>
379:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
380:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN4MASK</span>
381:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
382:       <span class="ruby-keyword kw">end</span>
383:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
384:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN6MASK</span>
385:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
386:       <span class="ruby-keyword kw">end</span>
387:     <span class="ruby-keyword kw">else</span>
388:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
389:     <span class="ruby-keyword kw">end</span>
390:     <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">addr</span>
391:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
392:       <span class="ruby-ivar">@family</span> = <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
393:     <span class="ruby-keyword kw">end</span>
394:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
395:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M001969">
                    
                    <a name="M001969"></a><b>_reverse</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001969_source')" id="l_M001969_source">show</a>
                        
                    </p>
                    <div id="M001969_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 555</span>
555:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_reverse</span>
556:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
557:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
558:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
559:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
560:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
561:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
562:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-ivar">@addr</span>).<span class="ruby-identifier">reverse!</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.(?!$)/</span>, <span class="ruby-value str">'\&amp;.'</span>)
563:     <span class="ruby-keyword kw">else</span>
564:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
565:     <span class="ruby-keyword kw">end</span>
566:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001970">
                    
                    <a name="M001970"></a><b>_to_string</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001970_source')" id="l_M001970_source">show</a>
                        
                    </p>
                    <div id="M001970_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 568</span>
568:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-identifier">addr</span>)
569:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
570:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
571:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
572:         (<span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">24</span> <span class="ruby-operator">-</span> <span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
573:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
574:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
575:       <span class="ruby-keyword kw">return</span> ((<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>).<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.{4}(?!$)/</span>, <span class="ruby-value str">'\&amp;:'</span>))
576:     <span class="ruby-keyword kw">else</span>
577:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
578:     <span class="ruby-keyword kw">end</span>
579:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001968">
                    
                    <a name="M001968"></a><b>addr_mask</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001968_source')" id="l_M001968_source">show</a>
                        
                    </p>
                    <div id="M001968_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 544</span>
544:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">addr_mask</span>(<span class="ruby-identifier">addr</span>)
545:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
546:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
547:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>
548:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
549:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN6MASK</span>
550:     <span class="ruby-keyword kw">else</span>
551:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
552:     <span class="ruby-keyword kw">end</span>
553:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001965">
                    
                    <a name="M001965"></a><b>coerce_other</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001965_source')" id="l_M001965_source">show</a>
                        
                    </p>
                    <div id="M001965_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 500</span>
500:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
501:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
502:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">IPAddr</span>
503:       <span class="ruby-identifier">other</span>
504:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
505:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>)
506:     <span class="ruby-keyword kw">else</span>
507:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>, <span class="ruby-ivar">@family</span>)
508:     <span class="ruby-keyword kw">end</span>
509:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001967">
                    
                    <a name="M001967"></a><b>in6_addr</b>(left)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001967_source')" id="l_M001967_source">show</a>
                        
                    </p>
                    <div id="M001967_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 520</span>
520:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">left</span>)
521:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">left</span>
522:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::ffff:(\d+\.\d+\.\d+\.\d+)$/i</span>
523:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>) <span class="ruby-operator">+</span> <span class="ruby-value">0xffff00000000</span>
524:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::(\d+\.\d+\.\d+\.\d+)$/i</span>
525:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>)
526:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[^0-9a-f:]/i</span>
527:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
528:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(.*)::(.*)$/</span>
529:       <span class="ruby-identifier">left</span>, <span class="ruby-identifier">right</span> = <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>
530:     <span class="ruby-keyword kw">else</span>
531:       <span class="ruby-identifier">right</span> = <span class="ruby-value str">''</span>
532:     <span class="ruby-keyword kw">end</span>
533:     <span class="ruby-identifier">l</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
534:     <span class="ruby-identifier">r</span> = <span class="ruby-identifier">right</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
535:     <span class="ruby-identifier">rest</span> = <span class="ruby-value">8</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">size</span>
536:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
537:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
538:     <span class="ruby-keyword kw">end</span>
539:     <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">l</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">r</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
540:       <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">hex</span>
541:     }
542:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001966">
                    
                    <a name="M001966"></a><b>in_addr</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001966_source')" id="l_M001966_source">show</a>
                        
                    </p>
                    <div id="M001966_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 511</span>
511:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">addr</span>)
512:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+\.\d+\.\d+\.\d+$/</span>
513:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
514:         <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_i</span>
515:       }
516:     <span class="ruby-keyword kw">end</span>
517:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
518:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    