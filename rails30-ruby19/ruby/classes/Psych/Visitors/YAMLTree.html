<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Psych::Visitors::YAMLTree</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Psych::Visitors::YAMLTree 
            
                <span class="parent">&lt; 
                    
                    <a href="Visitor.html">Psych::Visitors::Visitor</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/ext/psych/parser_c.html">ext/psych/parser.c</a></li>
            
            <li><a href="../../../files/ext/psych/lib/psych/visitors/yaml_tree_rb.html">ext/psych/lib/psych/visitors/yaml_tree.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="YAMLTree.html">YAMLTree</a> builds a <a
href="../../YAML.html">YAML</a> ast given a ruby object. For example:
</p>
<pre>
  builder = Psych::Visitors::YAMLTree.new
  builder &lt;&lt; { :foo =&gt; 'bar' }
  builder.tree # =&gt; #&lt;Psych::Nodes::Stream .. }
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M007571"><<</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M007572">accept</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M007598">dump_coder</a>,</li>
                
                <li><a href="#M007600">dump_ivars</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M007599">emit_coder</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M007596">find_ivars</a>,</li>
                
                <li><a href="#M007595">format_time</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M007569">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M006944">private_iv_get</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M007597">register</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M007570">tree</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M007592">visit_Array</a>,</li>
                
                <li><a href="#M007588">visit_Class</a>,</li>
                
                <li><a href="#M007581">visit_Complex</a>,</li>
                
                <li><a href="#M007585">visit_Date</a>,</li>
                
                <li><a href="#M007578">visit_DateTime</a>,</li>
                
                <li><a href="#M007576">visit_Exception</a>,</li>
                
                <li><a href="#M007584">visit_FalseClass</a>,</li>
                
                <li><a href="#M007586">visit_Float</a>,</li>
                
                <li><a href="#M007590">visit_Hash</a>,</li>
                
                <li><a href="#M007582">visit_Integer</a>,</li>
                
                <li><a href="#M007593">visit_NilClass</a>,</li>
                
                <li><a href="#M007574">visit_Object</a>,</li>
                
                <li><a href="#M007573">visit_Psych_Omap</a>,</li>
                
                <li><a href="#M007591">visit_Psych_Set</a>,</li>
                
                <li><a href="#M007589">visit_Range</a>,</li>
                
                <li><a href="#M007580">visit_Rational</a>,</li>
                
                <li><a href="#M007577">visit_Regexp</a>,</li>
                
                <li><a href="#M007587">visit_String</a>,</li>
                
                <li><a href="#M007575">visit_Struct</a>,</li>
                
                <li><a href="#M007594">visit_Symbol</a>,</li>
                
                <li><a href="#M007579">visit_Time</a>,</li>
                
                <li><a href="#M007583">visit_TrueClass</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M007569">
                    
                    <a name="M007569"></a><b>new</b>(options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007569_source')" id="l_M007569_source">show</a>
                        
                    </p>
                    <div id="M007569_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 11</span>
11:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">emitter</span> = <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">TreeBuilder</span>.<span class="ruby-identifier">new</span>
12:         <span class="ruby-keyword kw">super</span>()
13:         <span class="ruby-ivar">@emitter</span> = <span class="ruby-identifier">emitter</span>
14:         <span class="ruby-ivar">@st</span>      = {}
15:         <span class="ruby-ivar">@ss</span>      = <span class="ruby-constant">ScalarScanner</span>.<span class="ruby-identifier">new</span>
16: 
17:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_stream</span> <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Stream</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF8</span>
18: 
19:         <span class="ruby-ivar">@dispatch_cache</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,<span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
20:           <span class="ruby-identifier">method</span> = <span class="ruby-node">&quot;visit_#{(klass.name || '').split('::').join('_')}&quot;</span>
21: 
22:           <span class="ruby-identifier">method</span> = <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>]
23: 
24:           <span class="ruby-identifier">raise</span>(<span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't dump #{target.class}&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method</span>
25: 
26:           <span class="ruby-identifier">h</span>[<span class="ruby-identifier">klass</span>] = <span class="ruby-identifier">method</span>
27:         <span class="ruby-keyword kw">end</span>
28:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M007571">
                    
                    <a name="M007571"></a><b>&lt;&lt;</b>(object)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007571_source')" id="l_M007571_source">show</a>
                        
                    </p>
                    <div id="M007571_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">object</span>
35:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_document</span> [], [], <span class="ruby-keyword kw">false</span>
36:         <span class="ruby-identifier">accept</span> <span class="ruby-identifier">object</span>
37:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_document</span> <span class="ruby-keyword kw">true</span>
38:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007572">
                    
                    <a name="M007572"></a><b>accept</b>(target)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007572_source')" id="l_M007572_source">show</a>
                        
                    </p>
                    <div id="M007572_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>
41:         <span class="ruby-comment cmt"># return any aliases we find</span>
42:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@st</span>[<span class="ruby-identifier">target</span>.<span class="ruby-identifier">object_id</span>]
43:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">anchor</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">object_id</span>.<span class="ruby-identifier">to_s</span>
44:           <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">alias</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">object_id</span>.<span class="ruby-identifier">to_s</span>
45:         <span class="ruby-keyword kw">end</span>
46: 
47:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_yaml</span>)
48:           <span class="ruby-identifier">loc</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:to_yaml</span>).<span class="ruby-identifier">source_location</span>.<span class="ruby-identifier">first</span>
49:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">loc</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/(syck\/rubytypes.rb|psych\/core_ext.rb)/</span>
50:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:encode_with</span>)
51:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
52:                 <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;implementing to_yaml is deprecated, please implement \&quot;encode_with\&quot;&quot;</span>
53:               <span class="ruby-keyword kw">end</span>
54: 
55:               <span class="ruby-identifier">target</span>.<span class="ruby-identifier">to_yaml</span>(<span class="ruby-identifier">:nodump</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
56:             <span class="ruby-keyword kw">end</span>
57:           <span class="ruby-keyword kw">end</span>
58:         <span class="ruby-keyword kw">end</span>
59: 
60:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:encode_with</span>)
61:           <span class="ruby-identifier">dump_coder</span> <span class="ruby-identifier">target</span>
62:         <span class="ruby-keyword kw">else</span>
63:           <span class="ruby-identifier">send</span>(<span class="ruby-ivar">@dispatch_cache</span>[<span class="ruby-identifier">target</span>.<span class="ruby-identifier">class</span>], <span class="ruby-identifier">target</span>)
64:         <span class="ruby-keyword kw">end</span>
65:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007570">
                    
                    <a name="M007570"></a><b>tree</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007570_source')" id="l_M007570_source">show</a>
                        
                    </p>
                    <div id="M007570_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tree</span>
31:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_stream</span>
32:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007592">
                    
                    <a name="M007592"></a><b>visit_Array</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007592_source')" id="l_M007592_source">show</a>
                        
                    </p>
                    <div id="M007592_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 244</span>
244:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Array</span> <span class="ruby-identifier">o</span>
245:         <span class="ruby-identifier">register</span> <span class="ruby-identifier">o</span>, <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_sequence</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Sequence</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
246:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">c</span> }
247:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_sequence</span>
248:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007588">
                    
                    <a name="M007588"></a><b>visit_Class</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007588_source')" id="l_M007588_source">show</a>
                        
                    </p>
                    <div id="M007588_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Class</span> <span class="ruby-identifier">o</span>
211:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;can't dump anonymous class #{o.class}&quot;</span>
212:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007581">
                    
                    <a name="M007581"></a><b>visit_Complex</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007581_source')" id="l_M007581_source">show</a>
                        
                    </p>
                    <div id="M007581_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 150</span>
150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Complex</span> <span class="ruby-identifier">o</span>
151:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!ruby/object:Complex'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
152: 
153:         [<span class="ruby-value str">'real'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">real</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value str">'image'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">imag</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
154:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">m</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
155:         <span class="ruby-keyword kw">end</span>
156: 
157:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
158:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007585">
                    
                    <a name="M007585"></a><b>visit_Date</b>(o)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="YAMLTree.html#M007582">visit_Integer</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M007578">
                    
                    <a name="M007578"></a><b>visit_DateTime</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007578_source')" id="l_M007578_source">show</a>
                        
                    </p>
                    <div id="M007578_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_DateTime</span> <span class="ruby-identifier">o</span>
127:         <span class="ruby-identifier">formatted</span> = <span class="ruby-identifier">format_time</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_time</span>
128:         <span class="ruby-identifier">tag</span> = <span class="ruby-value str">'!ruby/object:DateTime'</span>
129:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">formatted</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
130:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007576">
                    
                    <a name="M007576"></a><b>visit_Exception</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007576_source')" id="l_M007576_source">show</a>
                        
                    </p>
                    <div id="M007576_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 103</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Exception</span> <span class="ruby-identifier">o</span>
104:         <span class="ruby-identifier">tag</span> = [<span class="ruby-value str">'!ruby/exception'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>].<span class="ruby-identifier">join</span> <span class="ruby-value str">':'</span>
105: 
106:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>
107: 
108:         {
109:           <span class="ruby-value str">'message'</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">private_iv_get</span>(<span class="ruby-identifier">o</span>, <span class="ruby-value str">'mesg'</span>),
110:           <span class="ruby-value str">'backtrace'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">private_iv_get</span>(<span class="ruby-identifier">o</span>, <span class="ruby-value str">'backtrace'</span>),
111:         }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
112:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">v</span>
113:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">k</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
114:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">v</span>
115:         <span class="ruby-keyword kw">end</span>
116: 
117:         <span class="ruby-identifier">dump_ivars</span> <span class="ruby-identifier">o</span>
118: 
119:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
120:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007584">
                    
                    <a name="M007584"></a><b>visit_FalseClass</b>(o)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="YAMLTree.html#M007582">visit_Integer</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M007586">
                    
                    <a name="M007586"></a><b>visit_Float</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007586_source')" id="l_M007586_source">show</a>
                        
                    </p>
                    <div id="M007586_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 167</span>
167:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Float</span> <span class="ruby-identifier">o</span>
168:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">nan?</span>
169:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-value str">'.nan'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
170:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">infinite?</span>
171:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span>((<span class="ruby-identifier">o</span>.<span class="ruby-identifier">infinite?</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'.inf'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'-.inf'</span>),
172:             <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>)
173:         <span class="ruby-keyword kw">else</span>
174:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
175:         <span class="ruby-keyword kw">end</span>
176:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007590">
                    
                    <a name="M007590"></a><b>visit_Hash</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007590_source')" id="l_M007590_source">show</a>
                        
                    </p>
                    <div id="M007590_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 222</span>
222:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Hash</span> <span class="ruby-identifier">o</span>
223:         <span class="ruby-identifier">register</span>(<span class="ruby-identifier">o</span>, <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>))
224: 
225:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
226:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">k</span>
227:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">v</span>
228:         <span class="ruby-keyword kw">end</span>
229: 
230:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
231:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007582">
                    
                    <a name="M007582"></a><b>visit_Integer</b>(o)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="YAMLTree.html#M007583">visit_TrueClass</a>
                    
                    <a href="YAMLTree.html#M007584">visit_FalseClass</a>
                    
                    <a href="YAMLTree.html#M007585">visit_Date</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007582_source')" id="l_M007582_source">show</a>
                        
                    </p>
                    <div id="M007582_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 160</span>
160:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Integer</span> <span class="ruby-identifier">o</span>
161:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
162:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007593">
                    
                    <a name="M007593"></a><b>visit_NilClass</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007593_source')" id="l_M007593_source">show</a>
                        
                    </p>
                    <div id="M007593_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 250</span>
250:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_NilClass</span> <span class="ruby-identifier">o</span>
251:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span>(<span class="ruby-value str">''</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'tag:yaml.org,2002:null'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>)
252:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007574">
                    
                    <a name="M007574"></a><b>visit_Object</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007574_source')" id="l_M007574_source">show</a>
                        
                    </p>
                    <div id="M007574_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 75</span>
75:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Object</span> <span class="ruby-identifier">o</span>
76:         <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Psych</span>.<span class="ruby-identifier">dump_tags</span>[<span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>]
77:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tag</span>
78:           <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Object</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
79:           <span class="ruby-identifier">tag</span>   = [<span class="ruby-value str">'!ruby/object'</span>, <span class="ruby-identifier">klass</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>)
80:         <span class="ruby-keyword kw">end</span>
81: 
82:         <span class="ruby-identifier">map</span> = <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
83:         <span class="ruby-identifier">register</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">map</span>)
84: 
85:         <span class="ruby-identifier">dump_ivars</span> <span class="ruby-identifier">o</span>
86:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
87:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007573">
                    
                    <a name="M007573"></a><b>visit_Psych_Omap</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007573_source')" id="l_M007573_source">show</a>
                        
                    </p>
                    <div id="M007573_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 67</span>
67:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Psych_Omap</span> <span class="ruby-identifier">o</span>
68:         <span class="ruby-identifier">seq</span> = <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_sequence</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!omap'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Sequence</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
69:         <span class="ruby-identifier">register</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">seq</span>)
70: 
71:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">visit_Hash</span> <span class="ruby-identifier">k</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">v</span> }
72:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_sequence</span>
73:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007591">
                    
                    <a name="M007591"></a><b>visit_Psych_Set</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007591_source')" id="l_M007591_source">show</a>
                        
                    </p>
                    <div id="M007591_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 233</span>
233:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Psych_Set</span> <span class="ruby-identifier">o</span>
234:         <span class="ruby-identifier">register</span>(<span class="ruby-identifier">o</span>, <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!set'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>))
235: 
236:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
237:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">k</span>
238:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">v</span>
239:         <span class="ruby-keyword kw">end</span>
240: 
241:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
242:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007589">
                    
                    <a name="M007589"></a><b>visit_Range</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007589_source')" id="l_M007589_source">show</a>
                        
                    </p>
                    <div id="M007589_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 214</span>
214:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Range</span> <span class="ruby-identifier">o</span>
215:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!ruby/range'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>
216:         [<span class="ruby-value str">'begin'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">begin</span>, <span class="ruby-value str">'end'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">end</span>, <span class="ruby-value str">'excl'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">exclude_end?</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
217:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">m</span>
218:         <span class="ruby-keyword kw">end</span>
219:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
220:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007580">
                    
                    <a name="M007580"></a><b>visit_Rational</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007580_source')" id="l_M007580_source">show</a>
                        
                    </p>
                    <div id="M007580_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 137</span>
137:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Rational</span> <span class="ruby-identifier">o</span>
138:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!ruby/object:Rational'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
139: 
140:         [
141:           <span class="ruby-value str">'denominator'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">denominator</span>.<span class="ruby-identifier">to_s</span>,
142:           <span class="ruby-value str">'numerator'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">numerator</span>.<span class="ruby-identifier">to_s</span>
143:         ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
144:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">m</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
145:         <span class="ruby-keyword kw">end</span>
146: 
147:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
148:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007577">
                    
                    <a name="M007577"></a><b>visit_Regexp</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007577_source')" id="l_M007577_source">show</a>
                        
                    </p>
                    <div id="M007577_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 122</span>
122:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Regexp</span> <span class="ruby-identifier">o</span>
123:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">inspect</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!ruby/regexp'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
124:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007587">
                    
                    <a name="M007587"></a><b>visit_String</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007587_source')" id="l_M007587_source">show</a>
                        
                    </p>
                    <div id="M007587_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 178</span>
178:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_String</span> <span class="ruby-identifier">o</span>
179:         <span class="ruby-identifier">plain</span> = <span class="ruby-keyword kw">false</span>
180:         <span class="ruby-identifier">quote</span> = <span class="ruby-keyword kw">false</span>
181:         <span class="ruby-identifier">style</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
182: 
183:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;\x00&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value str">&quot;^ -~\t\r\n&quot;</span>).<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">o</span>.<span class="ruby-identifier">length</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span><span class="ruby-value">.3</span>
184:           <span class="ruby-identifier">str</span>   = [<span class="ruby-identifier">o</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'m'</span>).<span class="ruby-identifier">chomp</span>
185:           <span class="ruby-identifier">tag</span>   = <span class="ruby-value str">'!binary'</span> <span class="ruby-comment cmt"># FIXME: change to below when syck is removed</span>
186:           <span class="ruby-comment cmt">#tag   = 'tag:yaml.org,2002:binary'</span>
187:           <span class="ruby-identifier">style</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">LITERAL</span>
188:         <span class="ruby-keyword kw">else</span>
189:           <span class="ruby-identifier">str</span>   = <span class="ruby-identifier">o</span>
190:           <span class="ruby-identifier">tag</span>   = <span class="ruby-keyword kw">nil</span>
191:           <span class="ruby-identifier">quote</span> = <span class="ruby-operator">!</span>(<span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@ss</span>.<span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">o</span>))
192:           <span class="ruby-identifier">plain</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">quote</span>
193:         <span class="ruby-keyword kw">end</span>
194: 
195:         <span class="ruby-identifier">ivars</span> = <span class="ruby-identifier">find_ivars</span> <span class="ruby-identifier">o</span>
196: 
197:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ivars</span>.<span class="ruby-identifier">empty?</span>
198:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">str</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">plain</span>, <span class="ruby-identifier">quote</span>, <span class="ruby-identifier">style</span>
199:         <span class="ruby-keyword kw">else</span>
200:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'!str'</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>
201:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-value str">'str'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
202:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">str</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">plain</span>, <span class="ruby-identifier">quote</span>, <span class="ruby-identifier">style</span>
203: 
204:           <span class="ruby-identifier">dump_ivars</span> <span class="ruby-identifier">o</span>
205: 
206:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
207:         <span class="ruby-keyword kw">end</span>
208:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007575">
                    
                    <a name="M007575"></a><b>visit_Struct</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007575_source')" id="l_M007575_source">show</a>
                        
                    </p>
                    <div id="M007575_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 89</span>
 89:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Struct</span> <span class="ruby-identifier">o</span>
 90:         <span class="ruby-identifier">tag</span> = [<span class="ruby-value str">'!ruby/struct'</span>, <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>)
 91: 
 92:         <span class="ruby-identifier">register</span> <span class="ruby-identifier">o</span>, <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>)
 93:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">member</span><span class="ruby-operator">|</span>
 94:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">member</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
 95:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">o</span>[<span class="ruby-identifier">member</span>]
 96:         <span class="ruby-keyword kw">end</span>
 97: 
 98:         <span class="ruby-identifier">dump_ivars</span> <span class="ruby-identifier">o</span>
 99: 
100:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
101:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007594">
                    
                    <a name="M007594"></a><b>visit_Symbol</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007594_source')" id="l_M007594_source">show</a>
                        
                    </p>
                    <div id="M007594_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 254</span>
254:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Symbol</span> <span class="ruby-identifier">o</span>
255:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-node">&quot;:#{o}&quot;</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
256:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007579">
                    
                    <a name="M007579"></a><b>visit_Time</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007579_source')" id="l_M007579_source">show</a>
                        
                    </p>
                    <div id="M007579_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 132</span>
132:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit_Time</span> <span class="ruby-identifier">o</span>
133:         <span class="ruby-identifier">formatted</span> = <span class="ruby-identifier">format_time</span> <span class="ruby-identifier">o</span>
134:         <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">formatted</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
135:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007583">
                    
                    <a name="M007583"></a><b>visit_TrueClass</b>(o)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="YAMLTree.html#M007582">visit_Integer</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M007598">
                    
                    <a name="M007598"></a><b>dump_coder</b>(o)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007598_source')" id="l_M007598_source">show</a>
                        
                    </p>
                    <div id="M007598_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 288</span>
288:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dump_coder</span> <span class="ruby-identifier">o</span>
289:         <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Psych</span>.<span class="ruby-identifier">dump_tags</span>[<span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>]
290:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tag</span>
291:           <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Object</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
292:           <span class="ruby-identifier">tag</span>   = [<span class="ruby-value str">'!ruby/object'</span>, <span class="ruby-identifier">klass</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>)
293:         <span class="ruby-keyword kw">end</span>
294: 
295:         <span class="ruby-identifier">c</span> = <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">Coder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tag</span>)
296:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">encode_with</span>(<span class="ruby-identifier">c</span>)
297:         <span class="ruby-identifier">emit_coder</span> <span class="ruby-identifier">c</span>
298:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007600">
                    
                    <a name="M007600"></a><b>dump_ivars</b>(target)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007600_source')" id="l_M007600_source">show</a>
                        
                    </p>
                    <div id="M007600_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 320</span>
320:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dump_ivars</span> <span class="ruby-identifier">target</span>
321:         <span class="ruby-identifier">ivars</span> = <span class="ruby-identifier">find_ivars</span> <span class="ruby-identifier">target</span>
322: 
323:         <span class="ruby-identifier">ivars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">iv</span><span class="ruby-operator">|</span>
324:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span>(<span class="ruby-node">&quot;#{iv.to_s.sub(/^@/, '')}&quot;</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>)
325:           <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">iv</span>)
326:         <span class="ruby-keyword kw">end</span>
327:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007599">
                    
                    <a name="M007599"></a><b>emit_coder</b>(c)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007599_source')" id="l_M007599_source">show</a>
                        
                    </p>
                    <div id="M007599_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 300</span>
300:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">emit_coder</span> <span class="ruby-identifier">c</span>
301:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">type</span>
302:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:scalar</span>
303:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">scalar</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">tag</span>.<span class="ruby-identifier">nil?</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
304:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:seq</span>
305:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_sequence</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">tag</span>.<span class="ruby-identifier">nil?</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Sequence</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK</span>
306:           <span class="ruby-identifier">c</span>.<span class="ruby-identifier">seq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
307:             <span class="ruby-identifier">accept</span> <span class="ruby-identifier">thing</span>
308:           <span class="ruby-keyword kw">end</span>
309:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_sequence</span>
310:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:map</span>
311:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">start_mapping</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">implicit</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">style</span>
312:           <span class="ruby-identifier">c</span>.<span class="ruby-identifier">map</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
313:             <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">scalar</span> <span class="ruby-identifier">k</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Scalar</span><span class="ruby-operator">::</span><span class="ruby-constant">ANY</span>
314:             <span class="ruby-identifier">accept</span> <span class="ruby-identifier">v</span>
315:           <span class="ruby-keyword kw">end</span>
316:           <span class="ruby-ivar">@emitter</span>.<span class="ruby-identifier">end_mapping</span>
317:         <span class="ruby-keyword kw">end</span>
318:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007596">
                    
                    <a name="M007596"></a><b>find_ivars</b>(target)
                    
                </div>
                
                <div class="description">
                  <p>
FIXME: remove this method once &#8220;to_yaml_properties&#8220; is removed
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007596_source')" id="l_M007596_source">show</a>
                        
                    </p>
                    <div id="M007596_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_ivars</span> <span class="ruby-identifier">target</span>
272:         <span class="ruby-identifier">loc</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:to_yaml_properties</span>).<span class="ruby-identifier">source_location</span>.<span class="ruby-identifier">first</span>
273:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">loc</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">DEPRECATED</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">loc</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-value str">'rubytypes.rb'</span>)
274:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
275:             <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{loc}: to_yaml_properties is deprecated, please implement \&quot;encode_with(coder)\&quot;&quot;</span>
276:           <span class="ruby-keyword kw">end</span>
277:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">to_yaml_properties</span>
278:         <span class="ruby-keyword kw">end</span>
279: 
280:         <span class="ruby-identifier">target</span>.<span class="ruby-identifier">instance_variables</span>
281:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007595">
                    
                    <a name="M007595"></a><b>format_time</b>(time)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007595_source')" id="l_M007595_source">show</a>
                        
                    </p>
                    <div id="M007595_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 259</span>
259:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format_time</span> <span class="ruby-identifier">time</span>
260:         <span class="ruby-identifier">formatted</span> = <span class="ruby-identifier">time</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y-%m-%d %H:%M:%S.%9N&quot;</span>)
261:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">utc?</span>
262:           <span class="ruby-identifier">formatted</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;Z&quot;</span>
263:         <span class="ruby-keyword kw">else</span>
264:           <span class="ruby-identifier">zone</span> = <span class="ruby-identifier">time</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%z'</span>)
265:           <span class="ruby-identifier">formatted</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; #{zone[0,3]}:#{zone[3,5]}&quot;</span>
266:         <span class="ruby-keyword kw">end</span>
267:         <span class="ruby-identifier">formatted</span>
268:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006944">
                    
                    <a name="M006944"></a><b> private_iv_get(target, prop)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Get the private instance variable <tt>prop</tt> from <tt>target</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006944_source')" id="l_M006944_source">show</a>
                        
                    </p>
                    <div id="M006944_source" class="dyn-source">
                        <pre>static VALUE private_iv_get(VALUE self, VALUE target, VALUE prop)
{
    return rb_attr_get(target, rb_intern(StringValuePtr(prop)));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007597">
                    
                    <a name="M007597"></a><b>register</b>(target, yaml_obj)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007597_source')" id="l_M007597_source">show</a>
                        
                    </p>
                    <div id="M007597_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/psych/lib/psych/visitors/yaml_tree.rb, line 283</span>
283:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register</span> <span class="ruby-identifier">target</span>, <span class="ruby-identifier">yaml_obj</span>
284:         <span class="ruby-ivar">@st</span>[<span class="ruby-identifier">target</span>.<span class="ruby-identifier">object_id</span>] = <span class="ruby-identifier">yaml_obj</span>
285:         <span class="ruby-identifier">yaml_obj</span>
286:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    