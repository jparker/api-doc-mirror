<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>StringIO</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            StringIO 
            
                <span class="parent">&lt; 
                    
                    <a href="Data.html">Data</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/stringio/stringio_c.html">ext/stringio/stringio.c</a></li>
            
            <li><a href="../files/ext/syck/lib/syck/stringio_rb.html">ext/syck/lib/syck/stringio.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="StringIO.html">StringIO</a> based on code by MoonWolf
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M007055"><<</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M006969">binmode</a>,</li>
                
                <li><a href="#M006992">bytes</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M006994">chars</a>,</li>
                
                <li><a href="#M006970">close</a>,</li>
                
                <li><a href="#M006971">close_read</a>,</li>
                
                <li><a href="#M006972">close_write</a>,</li>
                
                <li><a href="#M006973">closed?</a>,</li>
                
                <li><a href="#M006974">closed_read?</a>,</li>
                
                <li><a href="#M006975">closed_write?</a>,</li>
                
                <li><a href="#M006996">codepoints</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M006988">each</a>,</li>
                
                <li><a href="#M006991">each_byte</a>,</li>
                
                <li><a href="#M006993">each_char</a>,</li>
                
                <li><a href="#M006995">each_codepoint</a>,</li>
                
                <li><a href="#M006989">each_line</a>,</li>
                
                <li><a href="#M006976">eof</a>,</li>
                
                <li><a href="#M007975">eof</a>,</li>
                
                <li><a href="#M007976">eof?</a>,</li>
                
                <li><a href="#M006977">eof?</a>,</li>
                
                <li><a href="#M007069">external_encoding</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M006978">fcntl</a>,</li>
                
                <li><a href="#M007065">fileno</a>,</li>
                
                <li><a href="#M006979">flush</a>,</li>
                
                <li><a href="#M006980">fsync</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M007001">getbyte</a>,</li>
                
                <li><a href="#M006997">getc</a>,</li>
                
                <li><a href="#M007003">gets</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M007070">internal_encoding</a>,</li>
                
                <li><a href="#M007062">isatty</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M007067">length</a>,</li>
                
                <li><a href="#M006967">lineno</a>,</li>
                
                <li><a href="#M006968">lineno=</a>,</li>
                
                <li><a href="#M006990">lines</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M007973">new</a>,</li>
                
                <li><a href="#M006962">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M006961">open</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M007064">pid</a>,</li>
                
                <li><a href="#M006981">pos</a>,</li>
                
                <li><a href="#M007974">pos</a>,</li>
                
                <li><a href="#M006982">pos=</a>,</li>
                
                <li><a href="#M007056">print</a>,</li>
                
                <li><a href="#M007057">printf</a>,</li>
                
                <li><a href="#M007058">putc</a>,</li>
                
                <li><a href="#M007059">puts</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M007006">read</a>,</li>
                
                <li><a href="#M007053">read_nonblock</a>,</li>
                
                <li><a href="#M007002">readbyte</a>,</li>
                
                <li><a href="#M007000">readchar</a>,</li>
                
                <li><a href="#M007004">readline</a>,</li>
                
                <li><a href="#M007977">readline</a>,</li>
                
                <li><a href="#M007005">readlines</a>,</li>
                
                <li><a href="#M007008">readpartial</a>,</li>
                
                <li><a href="#M006964">reopen</a>,</li>
                
                <li><a href="#M006983">rewind</a>,</li>
                
                <li><a href="#M007978">rewind</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M006984">seek</a>,</li>
                
                <li><a href="#M007979">seek</a>,</li>
                
                <li><a href="#M007071">set_encoding</a>,</li>
                
                <li><a href="#M007066">size</a>,</li>
                
                <li><a href="#M006965">string</a>,</li>
                
                <li><a href="#M006966">string=</a>,</li>
                
                <li><a href="#M006985">sync</a>,</li>
                
                <li><a href="#M006986">sync=</a>,</li>
                
                <li><a href="#M007007">sysread</a>,</li>
                
                <li><a href="#M007060">syswrite</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M006987">tell</a>,</li>
                
                <li><a href="#M007068">truncate</a>,</li>
                
                <li><a href="#M007063">tty?</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M006999">ungetbyte</a>,</li>
                
                <li><a href="#M006998">ungetc</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M007054">write</a>,</li>
                
                <li><a href="#M007061">write_nonblock</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="Kernel.html">Kernel</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M007973">
                    
                    <a name="M007973"></a><b>new</b>(string=&quot;&quot;)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007973_source')" id="l_M007973_source">show</a>
                        
                    </p>
                    <div id="M007973_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 11</span>
11:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">string</span>=<span class="ruby-value str">&quot;&quot;</span>)
12:             <span class="ruby-ivar">@string</span>=<span class="ruby-identifier">string</span>
13:             <span class="ruby-ivar">@pos</span>=<span class="ruby-value">0</span>
14:             <span class="ruby-ivar">@eof</span>=(<span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>)
15:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006962">
                    
                    <a name="M006962"></a><b> StringIO.new(string=""[, mode])
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates new <a href="StringIO.html">StringIO</a> instance from with
<em>string</em> and <em>mode</em>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006962_source')" id="l_M006962_source">show</a>
                        
                    </p>
                    <div id="M006962_source" class="dyn-source">
                        <pre>static VALUE
strio_initialize(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = check_strio(self);

    if (!ptr) {
        DATA_PTR(self) = ptr = strio_alloc();
    }
    rb_call_super(0, 0);
    strio_init(argc, argv, ptr);
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006961">
                    
                    <a name="M006961"></a><b> StringIO.open(string=""[, mode]) {|strio| ...}
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Equivalent to <a href="StringIO.html#M006962">StringIO.new</a> except that
when it is called with a block, it yields with the new instance and closes
it, and returns the result which returned from the block.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006961_source')" id="l_M006961_source">show</a>
                        
                    </p>
                    <div id="M006961_source" class="dyn-source">
                        <pre>static VALUE
strio_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = rb_class_new_instance(argc, argv, klass);
    if (!rb_block_given_p()) return obj;
    return rb_ensure(rb_yield, obj, strio_finalize, obj);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M007055">
                    
                    <a name="M007055"></a><b>strio << obj     &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See IO#<<.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007055_source')" id="l_M007055_source">show</a>
                        
                    </p>
                    <div id="M007055_source" class="dyn-source">
                        <pre>#define strio_addstr rb_io_addstr</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006969">
                    
                    <a name="M006969"></a><b> strio.binmode &rarr; true </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <b>strio</b> itself. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006969_source')" id="l_M006969_source">show</a>
                        
                    </p>
                    <div id="M006969_source" class="dyn-source">
                        <pre>#define strio_binmode strio_self</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006992">
                    
                    <a name="M006992"></a><b>strio.bytes {|byte| block }      &rarr; strio
strio.bytes                      &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_byte {|byte| block }  -&gt; strio
  strio.each_byte                  -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000690">IO#each_byte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006992_source')" id="l_M006992_source">show</a>
                        
                    </p>
                    <div id="M006992_source" class="dyn-source">
                        <pre>static VALUE
strio_each_byte(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));

    RETURN_ENUMERATOR(self, 0, 0);

    while (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) {
        char c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
        rb_yield(CHR2FIX(c));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006994">
                    
                    <a name="M006994"></a><b>strio.chars {|char| block }      &rarr; strio
strio.chars                      &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_char {|char| block }  -&gt; strio
  strio.each_char                  -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000691">IO#each_char</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006994_source')" id="l_M006994_source">show</a>
                        
                    </p>
                    <div id="M006994_source" class="dyn-source">
                        <pre>static VALUE
strio_each_char(VALUE self)
{
    VALUE c;

    RETURN_ENUMERATOR(self, 0, 0);

    while (!NIL_P(c = strio_getc(self))) {
        rb_yield(c);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006970">
                    
                    <a name="M006970"></a><b>strio.close  &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes strio. The <b>strio</b> is unavailable for any further data
operations; an <tt>IOError</tt> is raised if such an attempt is made.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006970_source')" id="l_M006970_source">show</a>
                        
                    </p>
                    <div id="M006970_source" class="dyn-source">
                        <pre>static VALUE
strio_close(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006971">
                    
                    <a name="M006971"></a><b>strio.close_read    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes the read end of a <a href="StringIO.html">StringIO</a>. Will raise
an <tt>IOError</tt> if the <b>strio</b> is not readable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006971_source')" id="l_M006971_source">show</a>
                        
                    </p>
                    <div id="M006971_source" class="dyn-source">
                        <pre>static VALUE
strio_close_read(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (!READABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READABLE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006972">
                    
                    <a name="M006972"></a><b>strio.close_write    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes the write end of a <a href="StringIO.html">StringIO</a>. Will raise
an <tt>IOError</tt> if the <b>strio</b> is not writeable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006972_source')" id="l_M006972_source">show</a>
                        
                    </p>
                    <div id="M006972_source" class="dyn-source">
                        <pre>static VALUE
strio_close_write(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (!WRITABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_WRITABLE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006973">
                    
                    <a name="M006973"></a><b>strio.closed?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is completely closed, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006973_source')" id="l_M006973_source">show</a>
                        
                    </p>
                    <div id="M006973_source" class="dyn-source">
                        <pre>static VALUE
strio_closed(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (!CLOSED(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006974">
                    
                    <a name="M006974"></a><b>strio.closed_read?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is not readable, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006974_source')" id="l_M006974_source">show</a>
                        
                    </p>
                    <div id="M006974_source" class="dyn-source">
                        <pre>static VALUE
strio_closed_read(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (READABLE(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006975">
                    
                    <a name="M006975"></a><b>strio.closed_write?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is not writable, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006975_source')" id="l_M006975_source">show</a>
                        
                    </p>
                    <div id="M006975_source" class="dyn-source">
                        <pre>static VALUE
strio_closed_write(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (WRITABLE(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006996">
                    
                    <a name="M006996"></a><b>strio.codepoints {|c| block }      &rarr; strio
strio.codepoints                   &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_codepoint {|c| block }  -&gt; strio
  strio.each_codepoint               -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000692">IO#each_codepoint</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006996_source')" id="l_M006996_source">show</a>
                        
                    </p>
                    <div id="M006996_source" class="dyn-source">
                        <pre>static VALUE
strio_each_codepoint(VALUE self)
{
    struct StringIO *ptr;
    rb_encoding *enc;
    unsigned int c;
    int n;

    RETURN_ENUMERATOR(self, 0, 0);

    ptr = readable(StringIO(self));
    enc = rb_enc_get(ptr-&gt;string);
    for (;;) {
        if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
            return self;
        }

        c = rb_enc_codepoint_len(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos,
                                 RSTRING_END(ptr-&gt;string), &amp;n, enc);
        rb_yield(UINT2NUM(c));
        ptr-&gt;pos += n;
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006988">
                    
                    <a name="M006988"></a><b>strio.each(sep=$/) {|line| block }         &rarr; strio
strio.each(limit) {|line| block }          &rarr; strio
strio.each(sep, limit) {|line| block }     &rarr; strio
strio.each(...)                            &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_line(sep=$/) {|line| block }    -&gt; strio
  strio.each_line(limit) {|line| block }     -&gt; strio
  strio.each_line(sep,limit) {|line| block } -&gt; strio
  strio.each_line(...)                       -&gt; anEnumerator

  strio.lines(sep=$/) {|line| block }        -&gt; strio
  strio.lines(limit) {|line| block }         -&gt; strio
  strio.lines(sep,limit) {|line| block }     -&gt; strio
  strio.lines(...)                           -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000688">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006988_source')" id="l_M006988_source">show</a>
                        
                    </p>
                    <div id="M006988_source" class="dyn-source">
                        <pre>static VALUE
strio_each(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006991">
                    
                    <a name="M006991"></a><b>strio.bytes {|byte| block }      &rarr; strio
strio.bytes                      &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_byte {|byte| block }  -&gt; strio
  strio.each_byte                  -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000690">IO#each_byte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006991_source')" id="l_M006991_source">show</a>
                        
                    </p>
                    <div id="M006991_source" class="dyn-source">
                        <pre>static VALUE
strio_each_byte(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));

    RETURN_ENUMERATOR(self, 0, 0);

    while (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) {
        char c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
        rb_yield(CHR2FIX(c));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006993">
                    
                    <a name="M006993"></a><b>strio.chars {|char| block }      &rarr; strio
strio.chars                      &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_char {|char| block }  -&gt; strio
  strio.each_char                  -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000691">IO#each_char</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006993_source')" id="l_M006993_source">show</a>
                        
                    </p>
                    <div id="M006993_source" class="dyn-source">
                        <pre>static VALUE
strio_each_char(VALUE self)
{
    VALUE c;

    RETURN_ENUMERATOR(self, 0, 0);

    while (!NIL_P(c = strio_getc(self))) {
        rb_yield(c);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006995">
                    
                    <a name="M006995"></a><b>strio.codepoints {|c| block }      &rarr; strio
strio.codepoints                   &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_codepoint {|c| block }  -&gt; strio
  strio.each_codepoint               -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000692">IO#each_codepoint</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006995_source')" id="l_M006995_source">show</a>
                        
                    </p>
                    <div id="M006995_source" class="dyn-source">
                        <pre>static VALUE
strio_each_codepoint(VALUE self)
{
    struct StringIO *ptr;
    rb_encoding *enc;
    unsigned int c;
    int n;

    RETURN_ENUMERATOR(self, 0, 0);

    ptr = readable(StringIO(self));
    enc = rb_enc_get(ptr-&gt;string);
    for (;;) {
        if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
            return self;
        }

        c = rb_enc_codepoint_len(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos,
                                 RSTRING_END(ptr-&gt;string), &amp;n, enc);
        rb_yield(UINT2NUM(c));
        ptr-&gt;pos += n;
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006989">
                    
                    <a name="M006989"></a><b>strio.each(sep=$/) {|line| block }         &rarr; strio
strio.each(limit) {|line| block }          &rarr; strio
strio.each(sep, limit) {|line| block }     &rarr; strio
strio.each(...)                            &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_line(sep=$/) {|line| block }    -&gt; strio
  strio.each_line(limit) {|line| block }     -&gt; strio
  strio.each_line(sep,limit) {|line| block } -&gt; strio
  strio.each_line(...)                       -&gt; anEnumerator

  strio.lines(sep=$/) {|line| block }        -&gt; strio
  strio.lines(limit) {|line| block }         -&gt; strio
  strio.lines(sep,limit) {|line| block }     -&gt; strio
  strio.lines(...)                           -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000688">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006989_source')" id="l_M006989_source">show</a>
                        
                    </p>
                    <div id="M006989_source" class="dyn-source">
                        <pre>static VALUE
strio_each(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006976">
                    
                    <a name="M006976"></a><b>strio.eof     &rarr; true or false
strio.eof?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="StringIO.html#M007976">eof?</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006976_source')" id="l_M006976_source">show</a>
                        
                    </p>
                    <div id="M006976_source" class="dyn-source">
                        <pre>static VALUE
strio_eof(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007975">
                    
                    <a name="M007975"></a><b>eof</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007975_source')" id="l_M007975_source">show</a>
                        
                    </p>
                    <div id="M007975_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 19</span>
19:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eof</span>
20:             <span class="ruby-ivar">@eof</span>
21:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006977">
                    
                    <a name="M006977"></a><b>strio.eof     &rarr; true or false
strio.eof?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006977_source')" id="l_M006977_source">show</a>
                        
                    </p>
                    <div id="M006977_source" class="dyn-source">
                        <pre>static VALUE
strio_eof(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007976">
                    
                    <a name="M007976"></a><b>eof?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="StringIO.html#M006976">eof</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M007069">
                    
                    <a name="M007069"></a><b>strio.external_encoding   => encoding
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <a href="Encoding.html">Encoding</a> object that represents the
encoding of the file. If strio is write mode and no encoding is specified,
returns <tt>nil</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007069_source')" id="l_M007069_source">show</a>
                        
                    </p>
                    <div id="M007069_source" class="dyn-source">
                        <pre>static VALUE
strio_external_encoding(VALUE self)
{
    return rb_enc_from_encoding(rb_enc_get(StringIO(self)-&gt;string));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006978">
                    
                    <a name="M006978"></a><b> strio.fcntl </b>
                    
                </div>
                
                <div class="description">
                  <p>
Raises <a href="NotImplementedError.html">NotImplementedError</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006978_source')" id="l_M006978_source">show</a>
                        
                    </p>
                    <div id="M006978_source" class="dyn-source">
                        <pre>#define strio_fcntl strio_unimpl</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007065">
                    
                    <a name="M007065"></a><b> strio.fileno &rarr; nil </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>nil</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007065_source')" id="l_M007065_source">show</a>
                        
                    </p>
                    <div id="M007065_source" class="dyn-source">
                        <pre>#define strio_fileno strio_nil</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006979">
                    
                    <a name="M006979"></a><b> strio.flush &rarr; strio </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <b>strio</b> itself. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006979_source')" id="l_M006979_source">show</a>
                        
                    </p>
                    <div id="M006979_source" class="dyn-source">
                        <pre>#define strio_flush strio_self</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006980">
                    
                    <a name="M006980"></a><b> strio.fsync &rarr; 0 </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns 0. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006980_source')" id="l_M006980_source">show</a>
                        
                    </p>
                    <div id="M006980_source" class="dyn-source">
                        <pre>#define strio_fsync strio_0</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007001">
                    
                    <a name="M007001"></a><b>strio.getbyte   &rarr; fixnum or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000716">IO#getbyte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007001_source')" id="l_M007001_source">show</a>
                        
                    </p>
                    <div id="M007001_source" class="dyn-source">
                        <pre>static VALUE
strio_getbyte(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));
    int c;
    if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
        return Qnil;
    }
    c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
    return CHR2FIX(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006997">
                    
                    <a name="M006997"></a><b>strio.getc   &rarr; string or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000715">IO#getc</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006997_source')" id="l_M006997_source">show</a>
                        
                    </p>
                    <div id="M006997_source" class="dyn-source">
                        <pre>static VALUE
strio_getc(VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));
    rb_encoding *enc = rb_enc_get(ptr-&gt;string);
    int len;
    char *p;

    if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
        return Qnil;
    }
    p = RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos;
    len = rb_enc_mbclen(p, RSTRING_END(ptr-&gt;string), enc);
    ptr-&gt;pos += len;
    return rb_enc_str_new(p, len, rb_enc_get(ptr-&gt;string));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007003">
                    
                    <a name="M007003"></a><b>strio.gets(sep=$/)     &rarr; string or nil
strio.gets(limit)      &rarr; string or nil
strio.gets(sep, limit) &rarr; string or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000713">IO#gets</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007003_source')" id="l_M007003_source">show</a>
                        
                    </p>
                    <div id="M007003_source" class="dyn-source">
                        <pre>static VALUE
strio_gets(int argc, VALUE *argv, VALUE self)
{
    VALUE str = strio_getline(argc, argv, readable(StringIO(self)));

    rb_lastline_set(str);
    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007070">
                    
                    <a name="M007070"></a><b>strio.internal_encoding   => encoding
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <a href="Encoding.html">Encoding</a> of the internal string if
conversion is specified. Otherwise returns nil.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007070_source')" id="l_M007070_source">show</a>
                        
                    </p>
                    <div id="M007070_source" class="dyn-source">
                        <pre>static VALUE
strio_internal_encoding(VALUE self)
{
     return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007062">
                    
                    <a name="M007062"></a><b>strio.isatty &rarr; nil
strio.tty? &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>false</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007062_source')" id="l_M007062_source">show</a>
                        
                    </p>
                    <div id="M007062_source" class="dyn-source">
                        <pre>#define strio_isatty strio_false</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007067">
                    
                    <a name="M007067"></a><b>strio.size   &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the buffer string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007067_source')" id="l_M007067_source">show</a>
                        
                    </p>
                    <div id="M007067_source" class="dyn-source">
                        <pre>static VALUE
strio_size(VALUE self)
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING_LEN(string));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006967">
                    
                    <a name="M006967"></a><b>strio.lineno    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current line number in <b>strio</b>. The stringio must be
opened for reading. <tt>lineno</tt> counts the number of times
<tt>gets</tt> is called, rather than the number of newlines encountered.
The two values will differ if <tt>gets</tt> is called with a separator
other than newline. See also the <tt>$.</tt> variable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006967_source')" id="l_M006967_source">show</a>
                        
                    </p>
                    <div id="M006967_source" class="dyn-source">
                        <pre>static VALUE
strio_get_lineno(VALUE self)
{
    return LONG2NUM(StringIO(self)-&gt;lineno);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006968">
                    
                    <a name="M006968"></a><b>strio.lineno = integer    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Manually sets the current line number to the given value. <tt>$.</tt> is
updated only on the next read.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006968_source')" id="l_M006968_source">show</a>
                        
                    </p>
                    <div id="M006968_source" class="dyn-source">
                        <pre>static VALUE
strio_set_lineno(VALUE self, VALUE lineno)
{
    StringIO(self)-&gt;lineno = NUM2LONG(lineno);
    return lineno;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006990">
                    
                    <a name="M006990"></a><b>strio.each(sep=$/) {|line| block }         &rarr; strio
strio.each(limit) {|line| block }          &rarr; strio
strio.each(sep, limit) {|line| block }     &rarr; strio
strio.each(...)                            &rarr; anEnumerator
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
  strio.each_line(sep=$/) {|line| block }    -&gt; strio
  strio.each_line(limit) {|line| block }     -&gt; strio
  strio.each_line(sep,limit) {|line| block } -&gt; strio
  strio.each_line(...)                       -&gt; anEnumerator

  strio.lines(sep=$/) {|line| block }        -&gt; strio
  strio.lines(limit) {|line| block }         -&gt; strio
  strio.lines(sep,limit) {|line| block }     -&gt; strio
  strio.lines(...)                           -&gt; anEnumerator
</pre>
<p>
See <a href="IO.html#M000688">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006990_source')" id="l_M006990_source">show</a>
                        
                    </p>
                    <div id="M006990_source" class="dyn-source">
                        <pre>static VALUE
strio_each(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007064">
                    
                    <a name="M007064"></a><b> strio.pid &rarr; nil </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>nil</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007064_source')" id="l_M007064_source">show</a>
                        
                    </p>
                    <div id="M007064_source" class="dyn-source">
                        <pre>#define strio_pid strio_nil</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006981">
                    
                    <a name="M006981"></a><b>strio.pos     &rarr; integer
strio.tell    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006981_source')" id="l_M006981_source">show</a>
                        
                    </p>
                    <div id="M006981_source" class="dyn-source">
                        <pre>static VALUE
strio_get_pos(VALUE self)
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007974">
                    
                    <a name="M007974"></a><b>pos</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007974_source')" id="l_M007974_source">show</a>
                        
                    </p>
                    <div id="M007974_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 16</span>
16:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pos</span>
17:             <span class="ruby-ivar">@pos</span>
18:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006982">
                    
                    <a name="M006982"></a><b>strio.pos = integer    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Seeks to the given position (in bytes) in <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006982_source')" id="l_M006982_source">show</a>
                        
                    </p>
                    <div id="M006982_source" class="dyn-source">
                        <pre>static VALUE
strio_set_pos(VALUE self, VALUE pos)
{
    struct StringIO *ptr = StringIO(self);
    long p = NUM2LONG(pos);
    if (p &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = p;
    return pos;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007056">
                    
                    <a name="M007056"></a><b>strio.print()             &rarr; nil
strio.print(obj, ...)     &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000684">IO#print</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007056_source')" id="l_M007056_source">show</a>
                        
                    </p>
                    <div id="M007056_source" class="dyn-source">
                        <pre>#define strio_print rb_io_print</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007057">
                    
                    <a name="M007057"></a><b>strio.printf(format_string [, obj, ...] )   &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000687">IO#printf</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007057_source')" id="l_M007057_source">show</a>
                        
                    </p>
                    <div id="M007057_source" class="dyn-source">
                        <pre>#define strio_printf rb_io_printf</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007058">
                    
                    <a name="M007058"></a><b>strio.putc(obj)    &rarr; obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000685">IO#putc</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007058_source')" id="l_M007058_source">show</a>
                        
                    </p>
                    <div id="M007058_source" class="dyn-source">
                        <pre>static VALUE
strio_putc(VALUE self, VALUE ch)
{
    struct StringIO *ptr = writable(StringIO(self));
    int c = NUM2CHR(ch);
    long olen;

    check_modifiable(ptr);
    olen = RSTRING_LEN(ptr-&gt;string);
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    strio_extend(ptr, ptr-&gt;pos, 1);
    RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++] = c;
    OBJ_INFECT(ptr-&gt;string, self);
    return ch;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007059">
                    
                    <a name="M007059"></a><b>strio.puts(obj, ...)    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000686">IO#puts</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007059_source')" id="l_M007059_source">show</a>
                        
                    </p>
                    <div id="M007059_source" class="dyn-source">
                        <pre>#define strio_puts rb_io_puts</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007006">
                    
                    <a name="M007006"></a><b>strio.read([length [, buffer]])    &rarr; string, buffer, or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000675">IO#read</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007006_source')" id="l_M007006_source">show</a>
                        
                    </p>
                    <div id="M007006_source" class="dyn-source">
                        <pre>static VALUE
strio_read(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = readable(StringIO(self));
    VALUE str = Qnil;
    long len;

    switch (argc) {
      case 2:
        str = argv[1];
        StringValue(str);
        rb_str_modify(str);
      case 1:
        if (!NIL_P(argv[0])) {
            len = NUM2LONG(argv[0]);
            if (len &lt; 0) {
                rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
            }
            if (len &gt; 0 &amp;&amp; ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
                if (!NIL_P(str)) rb_str_resize(str, 0);
                return Qnil;
            }
            break;
        }
        /* fall through */
      case 0:
        len = RSTRING_LEN(ptr-&gt;string);
        if (len &lt;= ptr-&gt;pos) {
            if (NIL_P(str)) {
                str = rb_str_new(0, 0);
            }
            else {
                rb_str_resize(str, 0);
            }
            return str;
        }
        else {
            len -= ptr-&gt;pos;
        }
        break;
      default:
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 0)&quot;, argc);
    }
    if (NIL_P(str)) {
        str = strio_substr(ptr, ptr-&gt;pos, len);
        if (argc &gt; 0) rb_enc_associate(str, rb_ascii8bit_encoding());
    }
    else {
        long rest = RSTRING_LEN(ptr-&gt;string) - ptr-&gt;pos;
        if (len &gt; rest) len = rest;
        rb_str_resize(str, len);
        MEMCPY(RSTRING_PTR(str), RSTRING_PTR(ptr-&gt;string) + ptr-&gt;pos, char, len);
    }
    if (NIL_P(str)) {
        str = rb_str_new(0, 0);
        len = 0;
    }
    else {
        ptr-&gt;pos += len = RSTRING_LEN(str);
    }
    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007053">
                    
                    <a name="M007053"></a><b>strio.sysread(integer[, outbuf])    &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Similar to <a href="StringIO.html#M007006">read</a>, but raises
<tt>EOFError</tt> at end of string instead of returning <tt>nil</tt>, as
well as <a href="IO.html#M000698">IO#sysread</a> does.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007053_source')" id="l_M007053_source">show</a>
                        
                    </p>
                    <div id="M007053_source" class="dyn-source">
                        <pre>static VALUE
strio_sysread(int argc, VALUE *argv, VALUE self)
{
    VALUE val = strio_read(argc, argv, self);
    if (NIL_P(val)) {
        rb_eof_error();
    }
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007002">
                    
                    <a name="M007002"></a><b>strio.readbyte   &rarr; fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000718">IO#readbyte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007002_source')" id="l_M007002_source">show</a>
                        
                    </p>
                    <div id="M007002_source" class="dyn-source">
                        <pre>static VALUE
strio_readbyte(VALUE self)
{
    VALUE c = strio_getbyte(self);
    if (NIL_P(c)) rb_eof_error();
    return c;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007000">
                    
                    <a name="M007000"></a><b>strio.readchar   &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000717">IO#readchar</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007000_source')" id="l_M007000_source">show</a>
                        
                    </p>
                    <div id="M007000_source" class="dyn-source">
                        <pre>static VALUE
strio_readchar(VALUE self)
{
    VALUE c = strio_getc(self);
    if (NIL_P(c)) rb_eof_error();
    return c;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007004">
                    
                    <a name="M007004"></a><b>strio.readline(sep=$/)     &rarr; string
strio.readline(limit)      &rarr; string or nil
strio.readline(sep, limit) &rarr; string or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000714">IO#readline</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007004_source')" id="l_M007004_source">show</a>
                        
                    </p>
                    <div id="M007004_source" class="dyn-source">
                        <pre>static VALUE
strio_readline(int argc, VALUE *argv, VALUE self)
{
    VALUE line = strio_gets(argc, argv, self);
    if (NIL_P(line)) rb_eof_error();
    return line;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007977">
                    
                    <a name="M007977"></a><b>readline</b>(rs=$/)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007977_source')" id="l_M007977_source">show</a>
                        
                    </p>
                    <div id="M007977_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 23</span>
23:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">rs</span>=<span class="ruby-identifier">$/</span>)
24:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@eof</span>
25:                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">EOFError</span>
26:             <span class="ruby-keyword kw">else</span>
27:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]<span class="ruby-operator">=~</span><span class="ruby-identifier">rs</span>
28:                     <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span>,<span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>]
29:                 <span class="ruby-keyword kw">else</span>
30:                     <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
31:                 <span class="ruby-keyword kw">end</span>
32:                 <span class="ruby-ivar">@pos</span><span class="ruby-operator">+=</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">size</span>
33:                 <span class="ruby-ivar">@eof</span> =<span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@pos</span><span class="ruby-operator">==</span><span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span>
34:                 <span class="ruby-identifier">$_</span> = <span class="ruby-identifier">line</span>
35:             <span class="ruby-keyword kw">end</span>
36:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007005">
                    
                    <a name="M007005"></a><b>strio.readlines(sep=$/)    &rarr;   array
strio.readlines(limit)     &rarr;   array
strio.readlines(sep,limit) &rarr;   array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000674">IO#readlines</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007005_source')" id="l_M007005_source">show</a>
                        
                    </p>
                    <div id="M007005_source" class="dyn-source">
                        <pre>static VALUE
strio_readlines(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    VALUE ary = rb_ary_new(), line;
    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_ary_push(ary, line);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007008">
                    
                    <a name="M007008"></a><b>strio.sysread(integer[, outbuf])    &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Similar to <a href="StringIO.html#M007006">read</a>, but raises
<tt>EOFError</tt> at end of string instead of returning <tt>nil</tt>, as
well as <a href="IO.html#M000698">IO#sysread</a> does.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007008_source')" id="l_M007008_source">show</a>
                        
                    </p>
                    <div id="M007008_source" class="dyn-source">
                        <pre>static VALUE
strio_sysread(int argc, VALUE *argv, VALUE self)
{
    VALUE val = strio_read(argc, argv, self);
    if (NIL_P(val)) {
        rb_eof_error();
    }
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006964">
                    
                    <a name="M006964"></a><b>strio.reopen(other_StrIO)     &rarr; strio
strio.reopen(string, mode)    &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Reinitializes <b>strio</b> with the given <em>other_StrIO</em> or
<em>string</em> and <em>mode</em> (see <a
href="StringIO.html#M006962">StringIO#new</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006964_source')" id="l_M006964_source">show</a>
                        
                    </p>
                    <div id="M006964_source" class="dyn-source">
                        <pre>static VALUE
strio_reopen(int argc, VALUE *argv, VALUE self)
{
    if (!OBJ_TAINTED(self)) rb_secure(4);
    if (argc == 1 &amp;&amp; TYPE(*argv) != T_STRING) {
        return strio_copy(self, *argv);
    }
    strio_init(argc, argv, StringIO(self));
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007978">
                    
                    <a name="M007978"></a><b>rewind</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007978_source')" id="l_M007978_source">show</a>
                        
                    </p>
                    <div id="M007978_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 37</span>
37:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rewind</span>
38:             <span class="ruby-identifier">seek</span>(<span class="ruby-value">0</span>,<span class="ruby-value">0</span>)
39:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006983">
                    
                    <a name="M006983"></a><b>strio.rewind    &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Positions <b>strio</b> to the beginning of input, resetting <tt>lineno</tt>
to zero.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006983_source')" id="l_M006983_source">show</a>
                        
                    </p>
                    <div id="M006983_source" class="dyn-source">
                        <pre>static VALUE
strio_rewind(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return INT2FIX(0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006984">
                    
                    <a name="M006984"></a><b>strio.seek(amount, whence=SEEK_SET) &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Seeks to a given offset <em>amount</em> in the stream according to the
value of <em>whence</em> (see <a href="IO.html#M000724">IO#seek</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006984_source')" id="l_M006984_source">show</a>
                        
                    </p>
                    <div id="M006984_source" class="dyn-source">
                        <pre>static VALUE
strio_seek(int argc, VALUE *argv, VALUE self)
{
    VALUE whence;
    struct StringIO *ptr = StringIO(self);
    long offset;

    rb_scan_args(argc, argv, &quot;11&quot;, NULL, &amp;whence);
    offset = NUM2LONG(argv[0]);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    switch (NIL_P(whence) ? 0 : NUM2LONG(whence)) {
      case 0:
        break;
      case 1:
        offset += ptr-&gt;pos;
        break;
      case 2:
        offset += RSTRING_LEN(ptr-&gt;string);
        break;
      default:
        error_inval(&quot;invalid whence&quot;);
    }
    if (offset &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = offset;
    return INT2FIX(0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007979">
                    
                    <a name="M007979"></a><b>seek</b>(offset,whence)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007979_source')" id="l_M007979_source">show</a>
                        
                    </p>
                    <div id="M007979_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/syck/lib/syck/stringio.rb, line 40</span>
40:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">seek</span>(<span class="ruby-identifier">offset</span>,<span class="ruby-identifier">whence</span>)
41:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">whence</span>
42:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span>
43:                 <span class="ruby-ivar">@pos</span>=<span class="ruby-identifier">offset</span>
44:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>
45:                 <span class="ruby-ivar">@pos</span><span class="ruby-operator">+=</span><span class="ruby-identifier">offset</span>
46:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>
47:                 <span class="ruby-ivar">@pos</span>=<span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">+</span><span class="ruby-identifier">offset</span>
48:             <span class="ruby-keyword kw">end</span>
49:             <span class="ruby-ivar">@eof</span>=(<span class="ruby-ivar">@pos</span><span class="ruby-operator">&gt;=</span><span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span>)
50:             <span class="ruby-value">0</span>
51:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007071">
                    
                    <a name="M007071"></a><b>strio.set_encoding(ext_enc)                => strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Tagged with the encoding specified.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007071_source')" id="l_M007071_source">show</a>
                        
                    </p>
                    <div id="M007071_source" class="dyn-source">
                        <pre>static VALUE
strio_set_encoding(VALUE self, VALUE ext_enc)
{
    rb_encoding* enc;
    VALUE str = StringIO(self)-&gt;string;
    enc = rb_to_encoding(ext_enc);
    rb_enc_associate(str, enc);
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007066">
                    
                    <a name="M007066"></a><b>strio.size   &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the buffer string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007066_source')" id="l_M007066_source">show</a>
                        
                    </p>
                    <div id="M007066_source" class="dyn-source">
                        <pre>static VALUE
strio_size(VALUE self)
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING_LEN(string));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006965">
                    
                    <a name="M006965"></a><b> strio.string     &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns underlying <a href="String.html">String</a> object, the subject of
<a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006965_source')" id="l_M006965_source">show</a>
                        
                    </p>
                    <div id="M006965_source" class="dyn-source">
                        <pre>static VALUE
strio_get_string(VALUE self)
{
    return StringIO(self)-&gt;string;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006966">
                    
                    <a name="M006966"></a><b>strio.string = string  &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Changes underlying <a href="String.html">String</a> object, the subject of
<a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006966_source')" id="l_M006966_source">show</a>
                        
                    </p>
                    <div id="M006966_source" class="dyn-source">
                        <pre>static VALUE
strio_set_string(VALUE self, VALUE string)
{
    struct StringIO *ptr = StringIO(self);

    if (!OBJ_TAINTED(self)) rb_secure(4);
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    StringValue(string);
    ptr-&gt;flags = OBJ_FROZEN(string) ? FMODE_READABLE : FMODE_READWRITE;
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return ptr-&gt;string = string;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006985">
                    
                    <a name="M006985"></a><b>strio.sync    &rarr; true
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> always.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006985_source')" id="l_M006985_source">show</a>
                        
                    </p>
                    <div id="M006985_source" class="dyn-source">
                        <pre>static VALUE
strio_get_sync(VALUE self)
{
    StringIO(self);
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006986">
                    
                    <a name="M006986"></a><b> strio.sync = boolean &rarr; boolean </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the argument unchanged. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006986_source')" id="l_M006986_source">show</a>
                        
                    </p>
                    <div id="M006986_source" class="dyn-source">
                        <pre>#define strio_set_sync strio_first</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007007">
                    
                    <a name="M007007"></a><b>strio.sysread(integer[, outbuf])    &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Similar to <a href="StringIO.html#M007006">read</a>, but raises
<tt>EOFError</tt> at end of string instead of returning <tt>nil</tt>, as
well as <a href="IO.html#M000698">IO#sysread</a> does.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007007_source')" id="l_M007007_source">show</a>
                        
                    </p>
                    <div id="M007007_source" class="dyn-source">
                        <pre>static VALUE
strio_sysread(int argc, VALUE *argv, VALUE self)
{
    VALUE val = strio_read(argc, argv, self);
    if (NIL_P(val)) {
        rb_eof_error();
    }
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007060">
                    
                    <a name="M007060"></a><b>strio.write(string)    &rarr; integer
strio.syswrite(string) &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the given string to the underlying buffer string of <b>strio</b>.
The stream must be opened for writing. If the argument is not a string, it
will be converted to a string using <tt>to_s</tt>. Returns the number of
bytes written. See <a href="IO.html#M000712">IO#write</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007060_source')" id="l_M007060_source">show</a>
                        
                    </p>
                    <div id="M007060_source" class="dyn-source">
                        <pre>static VALUE
strio_write(VALUE self, VALUE str)
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;
    rb_encoding *enc, *enc2;

    RB_GC_GUARD(str);
    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    enc = rb_enc_get(ptr-&gt;string);
    enc2 = rb_enc_get(str);
    if (enc != enc2 &amp;&amp; enc != rb_ascii8bit_encoding()) {
        str = rb_str_conv_enc(str, enc2, enc);
    }
    len = RSTRING_LEN(str);
    if (len == 0) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING_LEN(ptr-&gt;string);
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING_PTR(str), len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        memmove(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos, RSTRING_PTR(str), len);
        OBJ_INFECT(ptr-&gt;string, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006987">
                    
                    <a name="M006987"></a><b>strio.pos     &rarr; integer
strio.tell    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006987_source')" id="l_M006987_source">show</a>
                        
                    </p>
                    <div id="M006987_source" class="dyn-source">
                        <pre>static VALUE
strio_get_pos(VALUE self)
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007068">
                    
                    <a name="M007068"></a><b>strio.truncate(integer)    &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Truncates the buffer string to at most <em>integer</em> bytes. The
<b>strio</b> must be opened for writing.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007068_source')" id="l_M007068_source">show</a>
                        
                    </p>
                    <div id="M007068_source" class="dyn-source">
                        <pre>static VALUE
strio_truncate(VALUE self, VALUE len)
{
    VALUE string = writable(StringIO(self))-&gt;string;
    long l = NUM2LONG(len);
    long plen = RSTRING_LEN(string);
    if (l &lt; 0) {
        error_inval(&quot;negative legnth&quot;);
    }
    rb_str_resize(string, l);
    if (plen &lt; l) {
        MEMZERO(RSTRING_PTR(string) + plen, char, l - plen);
    }
    return len;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007063">
                    
                    <a name="M007063"></a><b>strio.isatty &rarr; nil
strio.tty? &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>false</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007063_source')" id="l_M007063_source">show</a>
                        
                    </p>
                    <div id="M007063_source" class="dyn-source">
                        <pre>#define strio_isatty strio_false</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006999">
                    
                    <a name="M006999"></a><b>strio.ungetbyte(fixnum)   &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000719">IO#ungetbyte</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006999_source')" id="l_M006999_source">show</a>
                        
                    </p>
                    <div id="M006999_source" class="dyn-source">
                        <pre>static VALUE
strio_ungetbyte(VALUE self, VALUE c)
{
    struct StringIO *ptr = readable(StringIO(self));
    char buf[1], *cp = buf;
    long pos = ptr-&gt;pos, cl = 1;
    VALUE str = ptr-&gt;string;

    if (NIL_P(c)) return Qnil;
    if (FIXNUM_P(c)) {
        buf[0] = (char)FIX2INT(c);
    }
    else {
        SafeStringValue(c);
        cp = RSTRING_PTR(c);
        cl = RSTRING_LEN(c);
        if (cl == 0) return Qnil;
    }
    rb_str_modify(str);
    if (cl &gt; pos) {
        char *s;
        long rest = RSTRING_LEN(str) - pos;
        rb_str_resize(str, rest + cl);
        s = RSTRING_PTR(str);
        memmove(s + cl, s + pos, rest);
        pos = 0;
    }
    else {
        pos -= cl;
    }
    memcpy(RSTRING_PTR(str) + pos, cp, cl);
    ptr-&gt;pos = pos;
    RB_GC_GUARD(c);
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006998">
                    
                    <a name="M006998"></a><b>strio.ungetc(string)   &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Pushes back one character (passed as a parameter) onto <b>strio</b> such
that a subsequent buffered read will return it. There is no limitation for
multiple pushbacks including pushing back behind the beginning of the
buffer string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006998_source')" id="l_M006998_source">show</a>
                        
                    </p>
                    <div id="M006998_source" class="dyn-source">
                        <pre>static VALUE
strio_ungetc(VALUE self, VALUE c)
{
    struct StringIO *ptr = readable(StringIO(self));
    long lpos, clen;
    char *p, *pend;
    rb_encoding *enc, *enc2;

    if (NIL_P(c)) return Qnil;
    if (FIXNUM_P(c)) {
        int cc = FIX2INT(c);
        char buf[16];

        enc = rb_enc_get(ptr-&gt;string);
        rb_enc_mbcput(cc, buf, enc);
        c = rb_enc_str_new(buf, rb_enc_codelen(cc, enc), enc);
    }
    else {
        SafeStringValue(c);
        enc = rb_enc_get(ptr-&gt;string);
        enc2 = rb_enc_get(c);
        if (enc != enc2 &amp;&amp; enc != rb_ascii8bit_encoding()) {
            c = rb_str_conv_enc(c, enc2, enc);
        }
    }
    if (RSTRING_LEN(ptr-&gt;string) &lt; ptr-&gt;pos) {
        long len = RSTRING_LEN(ptr-&gt;string);
        rb_str_resize(ptr-&gt;string, ptr-&gt;pos - 1);
        memset(RSTRING_PTR(ptr-&gt;string) + len, 0, ptr-&gt;pos - len - 1);
        rb_str_concat(ptr-&gt;string, c);
        ptr-&gt;pos--;
    }
    else {
        /* get logical position */
        lpos = 0; p = RSTRING_PTR(ptr-&gt;string); pend = p + ptr-&gt;pos;
        for (;;) {
            clen = rb_enc_mbclen(p, pend, enc);
            if (p+clen &gt;= pend) break;
            p += clen;
            lpos++;
        }
        clen = p - RSTRING_PTR(ptr-&gt;string);
        rb_str_update(ptr-&gt;string, lpos, ptr-&gt;pos ? 1 : 0, c);
        ptr-&gt;pos = clen;
    }

    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007054">
                    
                    <a name="M007054"></a><b>strio.write(string)    &rarr; integer
strio.syswrite(string) &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the given string to the underlying buffer string of <b>strio</b>.
The stream must be opened for writing. If the argument is not a string, it
will be converted to a string using <tt>to_s</tt>. Returns the number of
bytes written. See <a href="IO.html#M000712">IO#write</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007054_source')" id="l_M007054_source">show</a>
                        
                    </p>
                    <div id="M007054_source" class="dyn-source">
                        <pre>static VALUE
strio_write(VALUE self, VALUE str)
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;
    rb_encoding *enc, *enc2;

    RB_GC_GUARD(str);
    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    enc = rb_enc_get(ptr-&gt;string);
    enc2 = rb_enc_get(str);
    if (enc != enc2 &amp;&amp; enc != rb_ascii8bit_encoding()) {
        str = rb_str_conv_enc(str, enc2, enc);
    }
    len = RSTRING_LEN(str);
    if (len == 0) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING_LEN(ptr-&gt;string);
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING_PTR(str), len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        memmove(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos, RSTRING_PTR(str), len);
        OBJ_INFECT(ptr-&gt;string, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007061">
                    
                    <a name="M007061"></a><b>strio.write(string)    &rarr; integer
strio.syswrite(string) &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the given string to the underlying buffer string of <b>strio</b>.
The stream must be opened for writing. If the argument is not a string, it
will be converted to a string using <tt>to_s</tt>. Returns the number of
bytes written. See <a href="IO.html#M000712">IO#write</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007061_source')" id="l_M007061_source">show</a>
                        
                    </p>
                    <div id="M007061_source" class="dyn-source">
                        <pre>static VALUE
strio_write(VALUE self, VALUE str)
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;
    rb_encoding *enc, *enc2;

    RB_GC_GUARD(str);
    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    enc = rb_enc_get(ptr-&gt;string);
    enc2 = rb_enc_get(str);
    if (enc != enc2 &amp;&amp; enc != rb_ascii8bit_encoding()) {
        str = rb_str_conv_enc(str, enc2, enc);
    }
    len = RSTRING_LEN(str);
    if (len == 0) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING_LEN(ptr-&gt;string);
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING_PTR(str), len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        memmove(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos, RSTRING_PTR(str), len);
        OBJ_INFECT(ptr-&gt;string, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    