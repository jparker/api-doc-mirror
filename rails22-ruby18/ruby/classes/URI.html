<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>URI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            URI 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/uri_rb.html">lib/uri.rb</a></li>
            
            <li><a href="../files/lib/uri/ldap_rb.html">lib/uri/ldap.rb</a></li>
            
            <li><a href="../files/lib/uri/common_rb.html">lib/uri/common.rb</a></li>
            
            <li><a href="../files/lib/uri/https_rb.html">lib/uri/https.rb</a></li>
            
            <li><a href="../files/lib/uri/ldaps_rb.html">lib/uri/ldaps.rb</a></li>
            
            <li><a href="../files/lib/uri/generic_rb.html">lib/uri/generic.rb</a></li>
            
            <li><a href="../files/lib/uri/mailto_rb.html">lib/uri/mailto.rb</a></li>
            
            <li><a href="../files/lib/uri/ftp_rb.html">lib/uri/ftp.rb</a></li>
            
            <li><a href="../files/lib/uri/http_rb.html">lib/uri/http.rb</a></li>
            
            <li><a href="../files/lib/open-uri_rb.html">lib/open-uri.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="URI.html">URI</a> support for Ruby
</p>
<table>
<tr><td valign="top">Author:</td><td>Akira Yamada <akira@ruby-lang.org>

</td></tr>
<tr><td valign="top">Documentation:</td><td>Akira Yamada <akira@ruby-lang.org>, Dmitry V. Sabanin <sdmitry@lrn.ru>

</td></tr>
<tr><td valign="top">License:</td><td>Copyright &#169; 2001 akira yamada <akira@ruby-lang.org> You can
redistribute it and/or modify it under the same term as Ruby.

</td></tr>
<tr><td valign="top">Revision:</td><td>$Id: uri.rb 16038 2008-04-15 09:41:47Z kazu $

</td></tr>
</table>
<p>
See <a href="URI.html">URI</a> for documentation
</p>
<hr size="1"></hr><h1>uri/common.rb</h1>
<table>
<tr><td valign="top">Author:</td><td>Akira Yamada <akira@ruby-lang.org>

</td></tr>
<tr><td valign="top">Revision:</td><td>$Id: common.rb 14178 2007-12-10 09:31:55Z matz $

</td></tr>
<tr><td valign="top">License:</td><td>You can redistribute it and/or modify it under the same term as Ruby.

</td></tr>
</table>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M004495">extract</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M004494">join</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M004493">parse</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M004496">regexp</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M004475">split</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="URI.html">URI</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="URI/Escape.html">URI::Escape</a></li>
        
        <li><span class="type">MODULE</span> <a href="URI/REGEXP.html">URI::REGEXP</a></li>
        
        <li><span class="type">MODULE</span> <a href="URI/Util.html">URI::Util</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/BadURIError.html">URI::BadURIError</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/Error.html">URI::Error</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/FTP.html">URI::FTP</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/Generic.html">URI::Generic</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/HTTP.html">URI::HTTP</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/HTTPS.html">URI::HTTPS</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/InvalidComponentError.html">URI::InvalidComponentError</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/InvalidURIError.html">URI::InvalidURIError</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/LDAP.html">URI::LDAP</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/LDAPS.html">URI::LDAPS</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/MailTo.html">URI::MailTo</a></li>
        
    </ul>
    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M004495">
                    
                    <a name="M004495"></a><b>extract</b>(str, schemes = nil, &amp;block)
                    
                </div>
                
                <div class="description">
                  <h2>Synopsis</h2>
<pre>
  URI::extract(str[, schemes][,&amp;blk])
</pre>
<h2>Args</h2>
<table>
<tr><td valign="top"><tt>str</tt>:</td><td><a href="String.html">String</a> to extract URIs from.

</td></tr>
<tr><td valign="top"><tt>schemes</tt>:</td><td>Limit <a href="URI.html">URI</a> matching to a specific schemes.

</td></tr>
</table>
<h2>Description</h2>
<p>
Extracts URIs from a string. If block given, iterates through all matched
URIs. Returns nil if block given or array with matches.
</p>
<h2>Usage</h2>
<pre>
  require &quot;uri&quot;

  URI.extract(&quot;text here http://foo.example.org/bla and here mailto:test@example.com and here also.&quot;)
  # =&gt; [&quot;http://foo.example.com/bla&quot;, &quot;mailto:test@example.com&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004495_source')" id="l_M004495_source">show</a>
                        
                    </p>
                    <div id="M004495_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/uri/common.rb, line 551</span>
551:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">schemes</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
552:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
553:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">regexp</span>(<span class="ruby-identifier">schemes</span>)) { <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">$&amp;</span> }
554:       <span class="ruby-keyword kw">nil</span>
555:     <span class="ruby-keyword kw">else</span>
556:       <span class="ruby-identifier">result</span> = []
557:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">regexp</span>(<span class="ruby-identifier">schemes</span>)) { <span class="ruby-identifier">result</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">$&amp;</span> }
558:       <span class="ruby-identifier">result</span>
559:     <span class="ruby-keyword kw">end</span>
560:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004494">
                    
                    <a name="M004494"></a><b>join</b>(*str)
                    
                </div>
                
                <div class="description">
                  <h2>Synopsis</h2>
<pre>
  URI::join(str[, str, ...])
</pre>
<h2>Args</h2>
<table>
<tr><td valign="top"><tt>str</tt>:</td><td>String(s) to work with

</td></tr>
</table>
<h2>Description</h2>
<p>
Joins URIs.
</p>
<h2>Usage</h2>
<pre>
  require 'uri'

  p URI.join(&quot;http://localhost/&quot;,&quot;main.rbx&quot;)
  # =&gt; #&lt;URI::HTTP:0x2022ac02 URL:http://localhost/main.rbx&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004494_source')" id="l_M004494_source">show</a>
                        
                    </p>
                    <div id="M004494_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/uri/common.rb, line 519</span>
519:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">str</span>)
520:     <span class="ruby-identifier">u</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">str</span>[<span class="ruby-value">0</span>])
521:     <span class="ruby-identifier">str</span>[<span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
522:       <span class="ruby-identifier">u</span> = <span class="ruby-identifier">u</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">x</span>)
523:     <span class="ruby-keyword kw">end</span>
524:     <span class="ruby-identifier">u</span>
525:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004493">
                    
                    <a name="M004493"></a><b>parse</b>(uri)
                    
                </div>
                
                <div class="description">
                  <h2>Synopsis</h2>
<pre>
  URI::parse(uri_str)
</pre>
<h2>Args</h2>
<table>
<tr><td valign="top"><tt>uri_str</tt>:</td><td><a href="String.html">String</a> with <a href="URI.html">URI</a>.

</td></tr>
</table>
<h2>Description</h2>
<p>
Creates one of the URI&#8217;s subclasses instance from the string.
</p>
<h2>Raises</h2>
<p>
<a href="URI/InvalidURIError.html">URI::InvalidURIError</a>
</p>
<pre>
  Raised if URI given is not a correct one.
</pre>
<h2>Usage</h2>
<pre>
  require 'uri'

  uri = URI.parse(&quot;http://www.ruby-lang.org/&quot;)
  p uri
  # =&gt; #&lt;URI::HTTP:0x202281be URL:http://www.ruby-lang.org/&gt;
  p uri.scheme
  # =&gt; &quot;http&quot;
  p uri.host
  # =&gt; &quot;www.ruby-lang.org&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004493_source')" id="l_M004493_source">show</a>
                        
                    </p>
                    <div id="M004493_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/uri/common.rb, line 483</span>
483:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
484:     <span class="ruby-identifier">scheme</span>, <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, 
485:       <span class="ruby-identifier">registry</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">opaque</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">fragment</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
486: 
487:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@@schemes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">upcase</span>)
488:       <span class="ruby-ivar">@@schemes</span>[<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">upcase</span>].<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scheme</span>, <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, 
489:                                    <span class="ruby-identifier">registry</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">opaque</span>, <span class="ruby-identifier">query</span>, 
490:                                    <span class="ruby-identifier">fragment</span>)
491:     <span class="ruby-keyword kw">else</span>
492:       <span class="ruby-constant">Generic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scheme</span>, <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, 
493:                   <span class="ruby-identifier">registry</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">opaque</span>, <span class="ruby-identifier">query</span>, 
494:                   <span class="ruby-identifier">fragment</span>)
495:     <span class="ruby-keyword kw">end</span>
496:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004496">
                    
                    <a name="M004496"></a><b>regexp</b>(schemes = nil)
                    
                </div>
                
                <div class="description">
                  <h2>Synopsis</h2>
<pre>
  URI::regexp([match_schemes])
</pre>
<h2>Args</h2>
<table>
<tr><td valign="top"><tt>match_schemes</tt>:</td><td><a href="Array.html">Array</a> of schemes. If given, resulting regexp
matches to URIs whose scheme is one of the match_schemes.

</td></tr>
</table>
<h2>Description</h2>
<p>
Returns a <a href="Regexp.html">Regexp</a> object which matches to URI-like
strings. The <a href="Regexp.html">Regexp</a> object returned by this
method includes arbitrary number of capture group (parentheses). Never rely
on it&#8217;s number.
</p>
<h2>Usage</h2>
<pre>
  require 'uri'

  # extract first URI from html_string
  html_string.slice(URI.regexp)

  # remove ftp URIs
  html_string.sub(URI.regexp(['ftp'])

  # You should not rely on the number of parentheses
  html_string.scan(URI.regexp) do |*matches|
    p $&amp;
  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004496_source')" id="l_M004496_source">show</a>
                        
                    </p>
                    <div id="M004496_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/uri/common.rb, line 593</span>
593:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">regexp</span>(<span class="ruby-identifier">schemes</span> = <span class="ruby-keyword kw">nil</span>)
594:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">schemes</span>
595:       <span class="ruby-constant">ABS_URI_REF</span>
596:     <span class="ruby-keyword kw">else</span>
597:       <span class="ruby-node">/(?=#{Regexp.union(*schemes)}:)#{PATTERN::X_ABS_URI}/</span><span class="ruby-identifier">xn</span>
598:     <span class="ruby-keyword kw">end</span>
599:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004475">
                    
                    <a name="M004475"></a><b>split</b>(uri)
                    
                </div>
                
                <div class="description">
                  <h2>Synopsis</h2>
<pre>
  URI::split(uri)
</pre>
<h2>Args</h2>
<table>
<tr><td valign="top"><tt>uri</tt>:</td><td><a href="String.html">String</a> with <a href="URI.html">URI</a>.

</td></tr>
</table>
<h2>Description</h2>
<p>
Splits the string on following parts and returns array with result:
</p>
<pre>
  * Scheme
  * Userinfo
  * Host
  * Port
  * Registry
  * Path
  * Opaque
  * Query
  * Fragment
</pre>
<h2>Usage</h2>
<pre>
  require 'uri'

  p URI.split(&quot;http://www.ruby-lang.org/&quot;)
  # =&gt; [&quot;http&quot;, nil, &quot;www.ruby-lang.org&quot;, nil, nil, &quot;/&quot;, nil, nil, nil]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004475_source')" id="l_M004475_source">show</a>
                        
                    </p>
                    <div id="M004475_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/uri/common.rb, line 380</span>
380:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
381:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">uri</span>
382:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">''</span>
383:       <span class="ruby-comment cmt"># null uri</span>
384: 
385:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ABS_URI</span>
386:       <span class="ruby-identifier">scheme</span>, <span class="ruby-identifier">opaque</span>, <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, 
387:         <span class="ruby-identifier">registry</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">$~</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
388: 
389:       <span class="ruby-comment cmt"># URI-reference = [ absoluteURI | relativeURI ] [ &quot;#&quot; fragment ]</span>
390: 
391:       <span class="ruby-comment cmt"># absoluteURI   = scheme &quot;:&quot; ( hier_part | opaque_part )</span>
392:       <span class="ruby-comment cmt"># hier_part     = ( net_path | abs_path ) [ &quot;?&quot; query ]</span>
393:       <span class="ruby-comment cmt"># opaque_part   = uric_no_slash *uric</span>
394: 
395:       <span class="ruby-comment cmt"># abs_path      = &quot;/&quot;  path_segments</span>
396:       <span class="ruby-comment cmt"># net_path      = &quot;//&quot; authority [ abs_path ]</span>
397: 
398:       <span class="ruby-comment cmt"># authority     = server | reg_name</span>
399:       <span class="ruby-comment cmt"># server        = [ [ userinfo &quot;@&quot; ] hostport ]</span>
400: 
401:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scheme</span>
402:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, 
403:           <span class="ruby-node">&quot;bad URI(absolute but no scheme): #{uri}&quot;</span>
404:       <span class="ruby-keyword kw">end</span>
405:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opaque</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">registry</span>))
406:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
407:           <span class="ruby-node">&quot;bad URI(absolute but no path): #{uri}&quot;</span> 
408:       <span class="ruby-keyword kw">end</span>
409: 
410:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">REL_URI</span>
411:       <span class="ruby-identifier">scheme</span> = <span class="ruby-keyword kw">nil</span>
412:       <span class="ruby-identifier">opaque</span> = <span class="ruby-keyword kw">nil</span>
413: 
414:       <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, <span class="ruby-identifier">registry</span>, 
415:         <span class="ruby-identifier">rel_segment</span>, <span class="ruby-identifier">abs_path</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">$~</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
416:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rel_segment</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">abs_path</span>
417:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">rel_segment</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">abs_path</span>
418:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">rel_segment</span>
419:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">rel_segment</span>
420:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">abs_path</span>
421:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">abs_path</span>
422:       <span class="ruby-keyword kw">end</span>
423: 
424:       <span class="ruby-comment cmt"># URI-reference = [ absoluteURI | relativeURI ] [ &quot;#&quot; fragment ]</span>
425: 
426:       <span class="ruby-comment cmt"># relativeURI   = ( net_path | abs_path | rel_path ) [ &quot;?&quot; query ]</span>
427: 
428:       <span class="ruby-comment cmt"># net_path      = &quot;//&quot; authority [ abs_path ]</span>
429:       <span class="ruby-comment cmt"># abs_path      = &quot;/&quot;  path_segments</span>
430:       <span class="ruby-comment cmt"># rel_path      = rel_segment [ abs_path ]</span>
431: 
432:       <span class="ruby-comment cmt"># authority     = server | reg_name</span>
433:       <span class="ruby-comment cmt"># server        = [ [ userinfo &quot;@&quot; ] hostport ]</span>
434: 
435:     <span class="ruby-keyword kw">else</span>
436:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-node">&quot;bad URI(is not URI?): #{uri}&quot;</span>
437:     <span class="ruby-keyword kw">end</span>
438: 
439:     <span class="ruby-identifier">path</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opaque</span> <span class="ruby-comment cmt"># (see RFC2396 Section 5.2)</span>
440:     <span class="ruby-identifier">ret</span> = [
441:       <span class="ruby-identifier">scheme</span>, 
442:       <span class="ruby-identifier">userinfo</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>,         <span class="ruby-comment cmt"># X</span>
443:       <span class="ruby-identifier">registry</span>,                        <span class="ruby-comment cmt"># X</span>
444:       <span class="ruby-identifier">path</span>,                         <span class="ruby-comment cmt"># Y</span>
445:       <span class="ruby-identifier">opaque</span>,                        <span class="ruby-comment cmt"># Y</span>
446:       <span class="ruby-identifier">query</span>,
447:       <span class="ruby-identifier">fragment</span>
448:     ]
449:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ret</span>
450:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    