<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>SOAP::EncodingStyle::SOAPHandler</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            SOAP::EncodingStyle::SOAPHandler 
            
                <span class="parent">&lt; 
                    
                    Handler
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/soap/encodingstyle/soapHandler_rb.html">lib/soap/encodingstyle/soapHandler.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M004343">content_ranksize</a>,</li>
                
                <li><a href="#M004344">content_typename</a>,</li>
                
                <li><a href="#M004345">create_arytype</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M004378">decode_arypos</a>,</li>
                
                <li><a href="#M004377">decode_attr_value</a>,</li>
                
                <li><a href="#M004371">decode_attrs</a>,</li>
                
                <li><a href="#M004366">decode_basetype</a>,</li>
                
                <li><a href="#M004368">decode_defined_complextype</a>,</li>
                
                <li><a href="#M004367">decode_defined_simpletype</a>,</li>
                
                <li><a href="#M004365">decode_definedtype</a>,</li>
                
                <li><a href="#M004341">decode_epilogue</a>,</li>
                
                <li><a href="#M004342">decode_parent</a>,</li>
                
                <li><a href="#M004340">decode_prologue</a>,</li>
                
                <li><a href="#M004379">decode_resolve_id</a>,</li>
                
                <li><a href="#M004337">decode_tag</a>,</li>
                
                <li><a href="#M004369">decode_tag_by_type</a>,</li>
                
                <li><a href="#M004364">decode_tag_by_wsdl</a>,</li>
                
                <li><a href="#M004338">decode_tag_end</a>,</li>
                
                <li><a href="#M004339">decode_text</a>,</li>
                
                <li><a href="#M004370">decode_textbuf</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M004347">encode_attr_value</a>,</li>
                
                <li><a href="#M004346">encode_attrs</a>,</li>
                
                <li><a href="#M004321">encode_data</a>,</li>
                
                <li><a href="#M004331">encode_data_end</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M004320">new</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="SOAPHandler/SOAPTemporalObject.html">SOAP::EncodingStyle::SOAPHandler::SOAPTemporalObject</a></li>
        
        <li><span class="type">CLASS</span> <a href="SOAPHandler/SOAPUnknown.html">SOAP::EncodingStyle::SOAPHandler::SOAPUnknown</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">Namespace</td>
            <td>=</td>
            <td class="attr-value">SOAP::EncodingNamespace</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NilLiteralMap</td>
            <td>=</td>
            <td class="attr-value">{     'true' =&gt; true,     '1' =&gt; true,     'false' =&gt; false,     '0' =&gt; false   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">RootLiteralMap</td>
            <td>=</td>
            <td class="attr-value">{     '1' =&gt; 1,     '0' =&gt; 0   }</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M004320">
                    
                    <a name="M004320"></a><b>new</b>(charset = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004320_source')" id="l_M004320_source">show</a>
                        
                    </p>
                    <div id="M004320_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">charset</span> = <span class="ruby-keyword kw">nil</span>)
21:     <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">charset</span>)
22:     <span class="ruby-ivar">@refpool</span> = []
23:     <span class="ruby-ivar">@idpool</span> = []
24:     <span class="ruby-ivar">@textbuf</span> = <span class="ruby-value str">''</span>
25:     <span class="ruby-ivar">@is_first_top_ele</span> = <span class="ruby-keyword kw">true</span>
26:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M004341">
                    
                    <a name="M004341"></a><b>decode_epilogue</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004341_source')" id="l_M004341_source">show</a>
                        
                    </p>
                    <div id="M004341_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_epilogue</span>
212:     <span class="ruby-identifier">decode_resolve_id</span>
213:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004342">
                    
                    <a name="M004342"></a><b>decode_parent</b>(parent, node)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004342_source')" id="l_M004342_source">show</a>
                        
                    </p>
                    <div id="M004342_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 215</span>
215:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_parent</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">node</span>)
216:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>
217:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>
218:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPUnknown</span>
219:       <span class="ruby-identifier">newparent</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>.<span class="ruby-identifier">as_struct</span>
220:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">newparent</span>
221:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">newparent</span>.<span class="ruby-identifier">id</span>
222:         <span class="ruby-ivar">@idpool</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">newparent</span>
223:       <span class="ruby-keyword kw">end</span>
224:       <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">replace_node</span>(<span class="ruby-identifier">newparent</span>)
225:       <span class="ruby-identifier">decode_parent</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">node</span>)
226:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPStruct</span>
227:       <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">elename</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>)
228:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>
229:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPArray</span>
230:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">position</span>
231:         <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>[<span class="ruby-operator">*</span>(<span class="ruby-identifier">decode_arypos</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">position</span>))] = <span class="ruby-identifier">node</span>
232:         <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>.<span class="ruby-identifier">sparse</span> = <span class="ruby-keyword kw">true</span>
233:       <span class="ruby-keyword kw">else</span>
234:         <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">node</span>)
235:       <span class="ruby-keyword kw">end</span>
236:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>
237:     <span class="ruby-keyword kw">else</span>
238:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;illegal parent: #{parent.node}&quot;</span>)
239:     <span class="ruby-keyword kw">end</span>
240:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004340">
                    
                    <a name="M004340"></a><b>decode_prologue</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004340_source')" id="l_M004340_source">show</a>
                        
                    </p>
                    <div id="M004340_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_prologue</span>
206:     <span class="ruby-ivar">@refpool</span>.<span class="ruby-identifier">clear</span>
207:     <span class="ruby-ivar">@idpool</span>.<span class="ruby-identifier">clear</span>
208:     <span class="ruby-ivar">@is_first_top_ele</span> = <span class="ruby-keyword kw">true</span>
209:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004337">
                    
                    <a name="M004337"></a><b>decode_tag</b>(ns, elename, attrs, parent)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004337_source')" id="l_M004337_source">show</a>
                        
                    </p>
                    <div id="M004337_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_tag</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">parent</span>)
146:     <span class="ruby-ivar">@textbuf</span> = <span class="ruby-value str">''</span>
147:     <span class="ruby-identifier">is_nil</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">arytype</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">position</span>, <span class="ruby-identifier">href</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">extraattr</span> =
148:       <span class="ruby-identifier">decode_attrs</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">attrs</span>)
149:     <span class="ruby-identifier">o</span> = <span class="ruby-keyword kw">nil</span>
150:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">is_nil</span>
151:       <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>)
152:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">href</span>
153:       <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPReference</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">href</span>)
154:       <span class="ruby-ivar">@refpool</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">o</span>
155:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@decode_typemap</span>
156:       <span class="ruby-identifier">o</span> = <span class="ruby-identifier">decode_tag_by_wsdl</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>, <span class="ruby-identifier">arytype</span>, <span class="ruby-identifier">extraattr</span>)
157:     <span class="ruby-keyword kw">else</span>
158:       <span class="ruby-identifier">o</span> = <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">node</span>, <span class="ruby-identifier">arytype</span>, <span class="ruby-identifier">extraattr</span>)
159:     <span class="ruby-keyword kw">end</span>
160: 
161:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>)
162:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">offset</span>
163:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">decode_arypos</span>(<span class="ruby-identifier">offset</span>)
164:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">sparse</span> = <span class="ruby-keyword kw">true</span>
165:       <span class="ruby-keyword kw">else</span>
166:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">sparse</span> = <span class="ruby-keyword kw">false</span>
167:       <span class="ruby-keyword kw">end</span>
168:     <span class="ruby-keyword kw">end</span>
169: 
170:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">parent</span>
171:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">id</span>
172:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">root</span>
173:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">position</span> = <span class="ruby-identifier">position</span>
174: 
175:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPTemporalObject</span>)
176:       <span class="ruby-ivar">@idpool</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">o</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">id</span>
177:       <span class="ruby-identifier">decode_parent</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">o</span>)
178:     <span class="ruby-keyword kw">end</span>
179:     <span class="ruby-identifier">o</span>
180:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004338">
                    
                    <a name="M004338"></a><b>decode_tag_end</b>(ns, node)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004338_source')" id="l_M004338_source">show</a>
                        
                    </p>
                    <div id="M004338_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_tag_end</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">node</span>)
183:     <span class="ruby-identifier">o</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">node</span>
184:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPUnknown</span>)
185:       <span class="ruby-identifier">newnode</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\s*\z/</span> <span class="ruby-operator">=~</span> <span class="ruby-ivar">@textbuf</span>
186:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">as_struct</span>
187:       <span class="ruby-keyword kw">else</span>
188:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">as_string</span>
189:       <span class="ruby-keyword kw">end</span>
190:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">newnode</span>.<span class="ruby-identifier">id</span>
191:         <span class="ruby-ivar">@idpool</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">newnode</span>
192:       <span class="ruby-keyword kw">end</span>
193:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">replace_node</span>(<span class="ruby-identifier">newnode</span>)
194:       <span class="ruby-identifier">o</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">node</span>
195:     <span class="ruby-keyword kw">end</span>
196:     <span class="ruby-identifier">decode_textbuf</span>(<span class="ruby-identifier">o</span>)
197:     <span class="ruby-comment cmt"># unlink definedtype</span>
198:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-keyword kw">nil</span>
199:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004339">
                    
                    <a name="M004339"></a><b>decode_text</b>(ns, text)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004339_source')" id="l_M004339_source">show</a>
                        
                    </p>
                    <div id="M004339_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 201</span>
201:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_text</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">text</span>)
202:     <span class="ruby-ivar">@textbuf</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">text</span>
203:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004321">
                    
                    <a name="M004321"></a><b>encode_data</b>(generator, ns, data, parent)
                    
                </div>
                
                <div class="description">
                  <p>
encode interface.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004321_source')" id="l_M004321_source">show</a>
                        
                    </p>
                    <div id="M004321_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_data</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">parent</span>)
33:     <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">encode_attrs</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">parent</span>)
34:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">position</span>
35:       <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">AttrPositionName</span>)] = <span class="ruby-node">&quot;[#{parent.position.join(',')}]&quot;</span>
36:     <span class="ruby-keyword kw">end</span>
37:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_name</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">attrs</span>)
38:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">data</span>
39:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPReference</span>
40:       <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">'href'</span>] = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">refidstr</span>
41:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
42:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPExternalReference</span>
43:       <span class="ruby-identifier">data</span>.<span class="ruby-identifier">referred</span>
44:       <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">'href'</span>] = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">refidstr</span>
45:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
46:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPRawString</span>
47:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
48:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_rawstring</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>)
49:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDString</span>
50:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
51:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_string</span>(<span class="ruby-ivar">@charset</span> <span class="ruby-operator">?</span>
52:         <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">Charset</span>.<span class="ruby-identifier">encoding_to_xml</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-ivar">@charset</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>)
53:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDAnySimpleType</span>
54:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
55:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_string</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">to_s</span>)
56:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPStruct</span>
57:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
58:       <span class="ruby-identifier">data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
59:         <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_child</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">data</span>)
60:       <span class="ruby-keyword kw">end</span>
61:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPArray</span>
62:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attrs</span>)
63:       <span class="ruby-identifier">data</span>.<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">rank</span><span class="ruby-operator">|</span>
64:         <span class="ruby-identifier">data</span>.<span class="ruby-identifier">position</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">sparse</span> <span class="ruby-value">? </span><span class="ruby-identifier">rank</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
65:         <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_child</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">child</span>, <span class="ruby-identifier">data</span>)
66:       <span class="ruby-keyword kw">end</span>
67:     <span class="ruby-keyword kw">else</span>
68:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(
69:         <span class="ruby-node">&quot;unknown object:#{data} in this encodingStyle&quot;</span>)
70:     <span class="ruby-keyword kw">end</span>
71:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004331">
                    
                    <a name="M004331"></a><b>encode_data_end</b>(generator, ns, data, parent)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004331_source')" id="l_M004331_source">show</a>
                        
                    </p>
                    <div id="M004331_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 73</span>
73:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_data_end</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">parent</span>)
74:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_name_end</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>)
75:     <span class="ruby-identifier">cr</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPCompoundtype</span>)
76:     <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">encode_tag_end</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">cr</span>)
77:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M004343">
                    
                    <a name="M004343"></a><b>content_ranksize</b>(typename)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004343_source')" id="l_M004343_source">show</a>
                        
                    </p>
                    <div id="M004343_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 244</span>
244:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_ranksize</span>(<span class="ruby-identifier">typename</span>)
245:     <span class="ruby-identifier">typename</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\[[\d,]*\]$/</span>)[<span class="ruby-value">0</span>]
246:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004344">
                    
                    <a name="M004344"></a><b>content_typename</b>(typename)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004344_source')" id="l_M004344_source">show</a>
                        
                    </p>
                    <div id="M004344_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 248</span>
248:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_typename</span>(<span class="ruby-identifier">typename</span>)
249:     <span class="ruby-identifier">typename</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\[,*\]$/</span>, <span class="ruby-value str">''</span>)
250:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004345">
                    
                    <a name="M004345"></a><b>create_arytype</b>(ns, data)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004345_source')" id="l_M004345_source">show</a>
                        
                    </p>
                    <div id="M004345_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 252</span>
252:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_arytype</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>)
253:     <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">QName</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">arytype</span>.<span class="ruby-identifier">namespace</span>,
254:       <span class="ruby-identifier">content_typename</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">arytype</span>.<span class="ruby-identifier">name</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;[#{data.size.join(',')}]&quot;</span>)
255:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004378">
                    
                    <a name="M004378"></a><b>decode_arypos</b>(position)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004378_source')" id="l_M004378_source">show</a>
                        
                    </p>
                    <div id="M004378_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 549</span>
549:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_arypos</span>(<span class="ruby-identifier">position</span>)
550:     <span class="ruby-regexp re">/^\[(.+)\]$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">position</span>
551:     <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">','</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_i</span> }
552:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004377">
                    
                    <a name="M004377"></a><b>decode_attr_value</b>(ns, qname, value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004377_source')" id="l_M004377_source">show</a>
                        
                    </p>
                    <div id="M004377_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 539</span>
539:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_attr_value</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">qname</span>, <span class="ruby-identifier">value</span>)
540:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A#/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">value</span>
541:       <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPReference</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">value</span>)
542:       <span class="ruby-ivar">@refpool</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">o</span>
543:       <span class="ruby-identifier">o</span>
544:     <span class="ruby-keyword kw">else</span>
545:       <span class="ruby-identifier">value</span>
546:     <span class="ruby-keyword kw">end</span>
547:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004371">
                    
                    <a name="M004371"></a><b>decode_attrs</b>(ns, attrs)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004371_source')" id="l_M004371_source">show</a>
                        
                    </p>
                    <div id="M004371_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 483</span>
483:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_attrs</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">attrs</span>)
484:     <span class="ruby-identifier">is_nil</span> = <span class="ruby-keyword kw">false</span>
485:     <span class="ruby-identifier">type</span> = <span class="ruby-keyword kw">nil</span>
486:     <span class="ruby-identifier">arytype</span> = <span class="ruby-keyword kw">nil</span>
487:     <span class="ruby-identifier">root</span> = <span class="ruby-keyword kw">nil</span>
488:     <span class="ruby-identifier">offset</span> = <span class="ruby-keyword kw">nil</span>
489:     <span class="ruby-identifier">position</span> = <span class="ruby-keyword kw">nil</span>
490:     <span class="ruby-identifier">href</span> = <span class="ruby-keyword kw">nil</span>
491:     <span class="ruby-identifier">id</span> = <span class="ruby-keyword kw">nil</span>
492:     <span class="ruby-identifier">extraattr</span> = {}
493: 
494:     <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
495:       <span class="ruby-identifier">qname</span> = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">key</span>)
496:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">qname</span>.<span class="ruby-identifier">namespace</span>
497:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">InstanceNamespace</span>
498:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">qname</span>.<span class="ruby-identifier">name</span>
499:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NilLiteral</span>
500:           <span class="ruby-identifier">is_nil</span> = <span class="ruby-constant">NilLiteralMap</span>[<span class="ruby-identifier">value</span>] <span class="ruby-keyword kw">or</span>
501:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot accept attribute value: #{value} as the value of xsi:#{XSD::NilLiteral} (expected 'true', 'false', '1', or '0')&quot;</span>)
502:           <span class="ruby-keyword kw">next</span>
503:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AttrType</span>
504:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">value</span>
505:           <span class="ruby-keyword kw">next</span>
506:         <span class="ruby-keyword kw">end</span>
507:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">EncodingNamespace</span>
508:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">qname</span>.<span class="ruby-identifier">name</span>
509:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">AttrArrayType</span>
510:           <span class="ruby-identifier">arytype</span> = <span class="ruby-identifier">value</span>
511:           <span class="ruby-keyword kw">next</span>
512:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">AttrRoot</span>
513:           <span class="ruby-identifier">root</span> = <span class="ruby-constant">RootLiteralMap</span>[<span class="ruby-identifier">value</span>] <span class="ruby-keyword kw">or</span>
514:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(
515:               <span class="ruby-node">&quot;illegal root attribute value: #{value}&quot;</span>)
516:           <span class="ruby-keyword kw">next</span>
517:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">AttrOffset</span>
518:           <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">value</span>
519:           <span class="ruby-keyword kw">next</span>
520:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">AttrPosition</span>
521:           <span class="ruby-identifier">position</span> = <span class="ruby-identifier">value</span>
522:           <span class="ruby-keyword kw">next</span>
523:         <span class="ruby-keyword kw">end</span>
524:       <span class="ruby-keyword kw">end</span>
525:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'href'</span>
526:         <span class="ruby-identifier">href</span> = <span class="ruby-identifier">value</span>
527:         <span class="ruby-keyword kw">next</span>
528:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'id'</span>
529:         <span class="ruby-identifier">id</span> = <span class="ruby-identifier">value</span>
530:         <span class="ruby-keyword kw">next</span>
531:       <span class="ruby-keyword kw">end</span>
532:       <span class="ruby-identifier">qname</span> = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse_local</span>(<span class="ruby-identifier">key</span>)
533:       <span class="ruby-identifier">extraattr</span>[<span class="ruby-identifier">qname</span>] = <span class="ruby-identifier">decode_attr_value</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">qname</span>, <span class="ruby-identifier">value</span>)
534:     <span class="ruby-keyword kw">end</span>
535: 
536:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">is_nil</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">arytype</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">position</span>, <span class="ruby-identifier">href</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">extraattr</span>
537:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004366">
                    
                    <a name="M004366"></a><b>decode_basetype</b>(klass, elename)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004366_source')" id="l_M004366_source">show</a>
                        
                    </p>
                    <div id="M004366_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 380</span>
380:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_basetype</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">elename</span>)
381:     <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>)
382:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004368">
                    
                    <a name="M004368"></a><b>decode_defined_complextype</b>(elename, typename, typedef, arytypestr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004368_source')" id="l_M004368_source">show</a>
                        
                    </p>
                    <div id="M004368_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 390</span>
390:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_defined_complextype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
391:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">typedef</span>.<span class="ruby-identifier">compoundtype</span>
392:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_STRUCT</span>, <span class="ruby-identifier">:TYPE_MAP</span>
393:       <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPStruct</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>)
394:       <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-identifier">typedef</span>
395:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">o</span>
396:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_ARRAY</span>
397:       <span class="ruby-identifier">expected_arytype</span> = <span class="ruby-identifier">typedef</span>.<span class="ruby-identifier">find_arytype</span>
398:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arytypestr</span>
399:         <span class="ruby-identifier">actual_arytype</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">QName</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">expected_arytype</span>.<span class="ruby-identifier">namespace</span>,
400:           <span class="ruby-identifier">content_typename</span>(<span class="ruby-identifier">expected_arytype</span>.<span class="ruby-identifier">name</span>) <span class="ruby-operator">&lt;&lt;</span>
401:           <span class="ruby-identifier">content_ranksize</span>(<span class="ruby-identifier">arytypestr</span>))
402:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPArray</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">actual_arytype</span>)
403:       <span class="ruby-keyword kw">else</span>
404:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPArray</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">typename</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">expected_arytype</span>)
405:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">elename</span> = <span class="ruby-identifier">elename</span>
406:       <span class="ruby-keyword kw">end</span>
407:       <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-identifier">typedef</span>
408:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">o</span>
409:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_EMPTY</span>
410:       <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>)
411:       <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-identifier">typedef</span>
412:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">o</span>
413:     <span class="ruby-keyword kw">else</span>
414:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">RuntimeError</span>.<span class="ruby-identifier">new</span>(
415:         <span class="ruby-node">&quot;Unknown kind of complexType: #{typedef.compoundtype}&quot;</span>)
416:     <span class="ruby-keyword kw">end</span>
417:     <span class="ruby-keyword kw">nil</span>
418:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004367">
                    
                    <a name="M004367"></a><b>decode_defined_simpletype</b>(elename, typename, typedef, arytypestr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004367_source')" id="l_M004367_source">show</a>
                        
                    </p>
                    <div id="M004367_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 384</span>
384:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_defined_simpletype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
385:     <span class="ruby-identifier">o</span> = <span class="ruby-identifier">decode_basetype</span>(<span class="ruby-constant">TypeMap</span>[<span class="ruby-identifier">typedef</span>.<span class="ruby-identifier">base</span>], <span class="ruby-identifier">elename</span>)
386:     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-identifier">typedef</span>
387:     <span class="ruby-identifier">o</span>
388:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004365">
                    
                    <a name="M004365"></a><b>decode_definedtype</b>(elename, typename, typedef, arytypestr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004365_source')" id="l_M004365_source">show</a>
                        
                    </p>
                    <div id="M004365_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 369</span>
369:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_definedtype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
370:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">typedef</span>
371:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;unknown type '#{typename}'&quot;</span>)
372:     <span class="ruby-keyword kw">end</span>
373:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">typedef</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">WSDL</span><span class="ruby-operator">::</span><span class="ruby-constant">XMLSchema</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleType</span>)
374:       <span class="ruby-identifier">decode_defined_simpletype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
375:     <span class="ruby-keyword kw">else</span>
376:       <span class="ruby-identifier">decode_defined_complextype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
377:     <span class="ruby-keyword kw">end</span>
378:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004379">
                    
                    <a name="M004379"></a><b>decode_resolve_id</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004379_source')" id="l_M004379_source">show</a>
                        
                    </p>
                    <div id="M004379_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 554</span>
554:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_resolve_id</span>
555:     <span class="ruby-identifier">count</span> = <span class="ruby-ivar">@refpool</span>.<span class="ruby-identifier">length</span>     <span class="ruby-comment cmt"># To avoid infinite loop</span>
556:     <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@refpool</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
557:       <span class="ruby-ivar">@refpool</span> = <span class="ruby-ivar">@refpool</span>.<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
558:         <span class="ruby-identifier">o</span> = <span class="ruby-ivar">@idpool</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
559:           <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">refid</span>
560:         }
561:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPReference</span>)
562:           <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># link of link.</span>
563:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">o</span>
564:           <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">__setobj__</span>(<span class="ruby-identifier">o</span>)
565:           <span class="ruby-keyword kw">false</span>
566:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">o</span> = <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">rootnode</span>.<span class="ruby-identifier">external_content</span>[<span class="ruby-identifier">ref</span>.<span class="ruby-identifier">refid</span>]
567:           <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">__setobj__</span>(<span class="ruby-identifier">o</span>)
568:           <span class="ruby-keyword kw">false</span>
569:         <span class="ruby-keyword kw">else</span>
570:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">EncodingStyleError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;unresolved reference: #{ref.refid}&quot;</span>)
571:         <span class="ruby-keyword kw">end</span>
572:       }
573:       <span class="ruby-identifier">count</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
574:     <span class="ruby-keyword kw">end</span>
575:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004369">
                    
                    <a name="M004369"></a><b>decode_tag_by_type</b>(ns, elename, typestr, parent, arytypestr, extraattr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004369_source')" id="l_M004369_source">show</a>
                        
                    </p>
                    <div id="M004369_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 420</span>
420:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>, <span class="ruby-identifier">extraattr</span>)
421:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arytypestr</span>
422:       <span class="ruby-identifier">type</span> = <span class="ruby-identifier">typestr</span> <span class="ruby-value">? </span><span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">typestr</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">ValueArrayName</span>
423:       <span class="ruby-identifier">node</span> = <span class="ruby-constant">SOAPArray</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">arytypestr</span>))
424:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">extraattr</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">extraattr</span>)
425:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">node</span>
426:     <span class="ruby-keyword kw">end</span>
427: 
428:     <span class="ruby-identifier">type</span> = <span class="ruby-keyword kw">nil</span>
429:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">typestr</span>
430:       <span class="ruby-identifier">type</span> = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">typestr</span>)
431:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>)
432:       <span class="ruby-identifier">type</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">arytype</span>
433:     <span class="ruby-keyword kw">else</span>
434:       <span class="ruby-comment cmt"># Since it's in dynamic(without any type) encoding process,</span>
435:       <span class="ruby-comment cmt"># assumes entity as its type itself.</span>
436:       <span class="ruby-comment cmt">#   &lt;SOAP-ENC:Array ...&gt; =&gt; type Array in SOAP-ENC.</span>
437:       <span class="ruby-comment cmt">#   &lt;Country xmlns=&quot;foo&quot;&gt; =&gt; type Country in foo.</span>
438:       <span class="ruby-identifier">type</span> = <span class="ruby-identifier">elename</span>
439:     <span class="ruby-keyword kw">end</span>
440: 
441:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">klass</span> = <span class="ruby-constant">TypeMap</span>[<span class="ruby-identifier">type</span>])
442:       <span class="ruby-identifier">node</span> = <span class="ruby-identifier">decode_basetype</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">elename</span>)
443:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">extraattr</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">extraattr</span>)
444:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">node</span>
445:     <span class="ruby-keyword kw">end</span>
446: 
447:     <span class="ruby-comment cmt"># Unknown type... Struct or String</span>
448:     <span class="ruby-constant">SOAPUnknown</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">extraattr</span>)
449:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004364">
                    
                    <a name="M004364"></a><b>decode_tag_by_wsdl</b>(ns, elename, typestr, parent, arytypestr, extraattr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004364_source')" id="l_M004364_source">show</a>
                        
                    </p>
                    <div id="M004364_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 313</span>
313:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_tag_by_wsdl</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>, <span class="ruby-identifier">extraattr</span>)
314:     <span class="ruby-identifier">o</span> = <span class="ruby-keyword kw">nil</span>
315:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SOAPBody</span>
316:       <span class="ruby-comment cmt"># root element: should branch by root attribute?</span>
317:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_first_top_ele</span>
318:         <span class="ruby-comment cmt"># Unqualified name is allowed here.</span>
319:         <span class="ruby-ivar">@is_first_top_ele</span> = <span class="ruby-keyword kw">false</span>
320:         <span class="ruby-identifier">type</span> = <span class="ruby-ivar">@decode_typemap</span>[<span class="ruby-identifier">elename</span>] <span class="ruby-operator">||</span>
321:           <span class="ruby-ivar">@decode_typemap</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-identifier">elename</span>.<span class="ruby-identifier">name</span>)
322:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span>
323:           <span class="ruby-identifier">o</span> = <span class="ruby-constant">SOAPStruct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elename</span>)
324:           <span class="ruby-identifier">o</span>.<span class="ruby-identifier">definedtype</span> = <span class="ruby-identifier">type</span>
325:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">o</span>
326:         <span class="ruby-keyword kw">end</span>
327:       <span class="ruby-keyword kw">end</span>
328:       <span class="ruby-comment cmt"># multi-ref element.</span>
329:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">typestr</span>
330:         <span class="ruby-identifier">typename</span> = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">typestr</span>)
331:         <span class="ruby-identifier">typedef</span> = <span class="ruby-ivar">@decode_typemap</span>[<span class="ruby-identifier">typename</span>]
332:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">typedef</span>
333:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_definedtype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
334:         <span class="ruby-keyword kw">end</span>
335:       <span class="ruby-keyword kw">end</span>
336:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>,
337:         <span class="ruby-identifier">extraattr</span>)
338:     <span class="ruby-keyword kw">end</span>
339: 
340:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyTypeName</span>
341:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>,
342:         <span class="ruby-identifier">extraattr</span>)
343:     <span class="ruby-keyword kw">end</span>
344: 
345:     <span class="ruby-comment cmt"># parent.definedtype == nil means the parent is SOAPUnknown.  SOAPUnknown</span>
346:     <span class="ruby-comment cmt"># is generated by decode_tag_by_type when its type is anyType.</span>
347:     <span class="ruby-identifier">parenttype</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">definedtype</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@decode_typemap</span>[<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">type</span>]
348:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parenttype</span>
349:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>,
350:         <span class="ruby-identifier">extraattr</span>)
351:     <span class="ruby-keyword kw">end</span>
352: 
353:     <span class="ruby-identifier">definedtype_name</span> = <span class="ruby-identifier">parenttype</span>.<span class="ruby-identifier">child_type</span>(<span class="ruby-identifier">elename</span>)
354:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">definedtype_name</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">klass</span> = <span class="ruby-constant">TypeMap</span>[<span class="ruby-identifier">definedtype_name</span>])
355:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_basetype</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">elename</span>)
356:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">definedtype_name</span> <span class="ruby-operator">==</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyTypeName</span>
357:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">decode_tag_by_type</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">typestr</span>, <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">arytypestr</span>,
358:         <span class="ruby-identifier">extraattr</span>)
359:     <span class="ruby-keyword kw">end</span>
360: 
361:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">definedtype_name</span>
362:       <span class="ruby-identifier">typedef</span> = <span class="ruby-ivar">@decode_typemap</span>[<span class="ruby-identifier">definedtype_name</span>]
363:     <span class="ruby-keyword kw">else</span>
364:       <span class="ruby-identifier">typedef</span> = <span class="ruby-identifier">parenttype</span>.<span class="ruby-identifier">child_defined_complextype</span>(<span class="ruby-identifier">elename</span>)
365:     <span class="ruby-keyword kw">end</span>
366:     <span class="ruby-identifier">decode_definedtype</span>(<span class="ruby-identifier">elename</span>, <span class="ruby-identifier">definedtype_name</span>, <span class="ruby-identifier">typedef</span>, <span class="ruby-identifier">arytypestr</span>)
367:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004370">
                    
                    <a name="M004370"></a><b>decode_textbuf</b>(node)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004370_source')" id="l_M004370_source">show</a>
                        
                    </p>
                    <div id="M004370_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 451</span>
451:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode_textbuf</span>(<span class="ruby-identifier">node</span>)
452:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">node</span>
453:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDHexBinary</span>, <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDBase64Binary</span>
454:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set_encoded</span>(<span class="ruby-ivar">@textbuf</span>)
455:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDString</span>
456:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@charset</span>
457:         <span class="ruby-ivar">@textbuf</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">Charset</span>.<span class="ruby-identifier">encoding_from_xml</span>(<span class="ruby-ivar">@textbuf</span>, <span class="ruby-ivar">@charset</span>)
458:       <span class="ruby-keyword kw">end</span>
459:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">definedtype</span>
460:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">definedtype</span>.<span class="ruby-identifier">check_lexical_format</span>(<span class="ruby-ivar">@textbuf</span>)
461:       <span class="ruby-keyword kw">end</span>
462:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@textbuf</span>)
463:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPNil</span>
464:       <span class="ruby-comment cmt"># Nothing to do.</span>
465:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">SOAPBasetype</span>
466:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@textbuf</span>)
467:     <span class="ruby-keyword kw">else</span>
468:       <span class="ruby-comment cmt"># Nothing to do...</span>
469:     <span class="ruby-keyword kw">end</span>
470:     <span class="ruby-ivar">@textbuf</span> = <span class="ruby-value str">''</span>
471:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004347">
                    
                    <a name="M004347"></a><b>encode_attr_value</b>(generator, ns, qname, value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004347_source')" id="l_M004347_source">show</a>
                        
                    </p>
                    <div id="M004347_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 303</span>
303:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_attr_value</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">qname</span>, <span class="ruby-identifier">value</span>)
304:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPType</span>)
305:       <span class="ruby-identifier">ref</span> = <span class="ruby-constant">SOAPReference</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)
306:       <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">add_reftarget</span>(<span class="ruby-identifier">qname</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
307:       <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">refidstr</span>
308:     <span class="ruby-keyword kw">else</span>
309:       <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>
310:     <span class="ruby-keyword kw">end</span>
311:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004346">
                    
                    <a name="M004346"></a><b>encode_attrs</b>(generator, ns, data, parent)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004346_source')" id="l_M004346_source">show</a>
                        
                    </p>
                    <div id="M004346_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/encodingstyle/soapHandler.rb, line 257</span>
257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_attrs</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">parent</span>)
258:     <span class="ruby-identifier">attrs</span> = {}
259:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">attrs</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPReference</span>)
260: 
261:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">encodingstyle</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EncodingNamespace</span>
262:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@generate_explicit_type</span>
263:         <span class="ruby-constant">SOAPGenerator</span>.<span class="ruby-identifier">assign_ns</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-constant">EnvelopeNamespace</span>)
264:         <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">AttrEncodingStyleName</span>)] = <span class="ruby-constant">EncodingNamespace</span>
265:       <span class="ruby-keyword kw">end</span>
266:       <span class="ruby-identifier">data</span>.<span class="ruby-identifier">encodingstyle</span> = <span class="ruby-constant">EncodingNamespace</span>
267:     <span class="ruby-keyword kw">end</span>
268: 
269:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPNil</span>)
270:       <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AttrNilName</span>)] = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NilValue</span>
271:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@generate_explicit_type</span>
272:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">namespace</span>
273:         <span class="ruby-constant">SOAPGenerator</span>.<span class="ruby-identifier">assign_ns</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">namespace</span>)
274:       <span class="ruby-keyword kw">end</span>
275:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>)
276:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">arytype</span>.<span class="ruby-identifier">namespace</span>
277:           <span class="ruby-constant">SOAPGenerator</span>.<span class="ruby-identifier">assign_ns</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>.<span class="ruby-identifier">arytype</span>.<span class="ruby-identifier">namespace</span>)
278:         <span class="ruby-keyword kw">end</span>
279:         <span class="ruby-constant">SOAPGenerator</span>.<span class="ruby-identifier">assign_ns</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-constant">EncodingNamespace</span>)
280:         <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">AttrArrayTypeName</span>)] = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-identifier">create_arytype</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">data</span>))
281:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">name</span>
282:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AttrTypeName</span>)] = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>)
283:         <span class="ruby-keyword kw">end</span>
284:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">arytype</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>)
285:         <span class="ruby-comment cmt"># No need to add.</span>
286:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">namespace</span>
287:         <span class="ruby-comment cmt"># No need to add.</span>
288:       <span class="ruby-keyword kw">else</span>
289:         <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AttrTypeName</span>)] = <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">type</span>)
290:       <span class="ruby-keyword kw">end</span>
291:     <span class="ruby-keyword kw">end</span>
292: 
293:     <span class="ruby-identifier">data</span>.<span class="ruby-identifier">extraattr</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
294:       <span class="ruby-constant">SOAPGenerator</span>.<span class="ruby-identifier">assign_ns</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">key</span>.<span class="ruby-identifier">namespace</span>)
295:       <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">ns</span>.<span class="ruby-identifier">name</span>(<span class="ruby-identifier">key</span>)] = <span class="ruby-identifier">encode_attr_value</span>(<span class="ruby-identifier">generator</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
296:     <span class="ruby-keyword kw">end</span>
297:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">id</span>
298:       <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">'id'</span>] = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">id</span>
299:     <span class="ruby-keyword kw">end</span>
300:     <span class="ruby-identifier">attrs</span>
301:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    