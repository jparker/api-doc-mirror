<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>SOAP::Mapping::WSDLEncodedRegistry</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            SOAP::Mapping::WSDLEncodedRegistry 
            
                <span class="parent">&lt; 
                    
                    Registry
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/soap/mapping/wsdlencodedregistry_rb.html">lib/soap/mapping/wsdlencodedregistry.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M003714">add_elements2stubobj</a>,</li>
                
                <li><a href="#M003712">any2obj</a>,</li>
                
                <li><a href="#M003702">any2soap</a>,</li>
                
                <li><a href="#M003709">array2soap</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M003707">base2soap</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M003706">complexobj2soap</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M003711">elements2soap</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M003710">map2soap</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M003699">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M003700">obj2soap</a>,</li>
                
                <li><a href="#M003704">obj2typesoap</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M003715">schema_element_definition</a>,</li>
                
                <li><a href="#M003705">simpleobj2soap</a>,</li>
                
                <li><a href="#M003701">soap2obj</a>,</li>
                
                <li><a href="#M003703">soap2soap</a>,</li>
                
                <li><a href="#M003713">soap2stubobj</a>,</li>
                
                <li><a href="#M003708">struct2soap</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Mapping.html">SOAP::Mapping</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">MapKeyName</td>
            <td>=</td>
            <td class="attr-value">XSD::QName.new(nil, &quot;key&quot;)</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">MapValueName</td>
            <td>=</td>
            <td class="attr-value">XSD::QName.new(nil, &quot;value&quot;)</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>definedelements</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>definedtypes</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>excn_handler_obj2soap</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>excn_handler_soap2obj</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M003699">
                    
                    <a name="M003699"></a><b>new</b>(definedtypes = XSD::NamedElements::Empty)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003699_source')" id="l_M003699_source">show</a>
                        
                    </p>
                    <div id="M003699_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">definedtypes</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedElements</span><span class="ruby-operator">::</span><span class="ruby-constant">Empty</span>)
29:     <span class="ruby-ivar">@definedtypes</span> = <span class="ruby-identifier">definedtypes</span>
30:     <span class="ruby-comment cmt"># @definedelements = definedelements  needed?</span>
31:     <span class="ruby-ivar">@excn_handler_obj2soap</span> = <span class="ruby-keyword kw">nil</span>
32:     <span class="ruby-ivar">@excn_handler_soap2obj</span> = <span class="ruby-keyword kw">nil</span>
33:     <span class="ruby-comment cmt"># For mapping AnyType element.</span>
34:     <span class="ruby-ivar">@rubytype_factory</span> = <span class="ruby-constant">RubytypeFactory</span>.<span class="ruby-identifier">new</span>(
35:       <span class="ruby-identifier">:allow_untyped_struct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
36:       <span class="ruby-identifier">:allow_original_mapping</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
37:     )
38:     <span class="ruby-ivar">@schema_element_cache</span> = {}
39:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003700">
                    
                    <a name="M003700"></a><b>obj2soap</b>(obj, qname = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003700_source')" id="l_M003700_source">show</a>
                        
                    </p>
                    <div id="M003700_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span> = <span class="ruby-keyword kw">nil</span>)
42:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-keyword kw">nil</span>
43:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> = <span class="ruby-ivar">@definedtypes</span>[<span class="ruby-identifier">qname</span>]
44:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj2typesoap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
45:     <span class="ruby-keyword kw">else</span>
46:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">any2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
47:     <span class="ruby-keyword kw">end</span>
48:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
49:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_obj2soap</span>
50:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-ivar">@excn_handler_obj2soap</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_obj</span><span class="ruby-operator">|</span>
51:         <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">yield_obj</span>, <span class="ruby-keyword kw">self</span>)
52:       }
53:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
54:     <span class="ruby-keyword kw">end</span>
55:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">qname</span>
56:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{obj.class.name} as #{qname}&quot;</span>)
57:     <span class="ruby-keyword kw">else</span>
58:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{obj.class.name} to SOAP/OM&quot;</span>)
59:     <span class="ruby-keyword kw">end</span>
60:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003701">
                    
                    <a name="M003701"></a><b>soap2obj</b>(node, obj_class = nil)
                    
                </div>
                
                <div class="description">
                  <p>
map anything for now: must refer <a href="../../WSDL.html">WSDL</a> while
mapping. [ToDo]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003701_source')" id="l_M003701_source">show</a>
                        
                    </p>
                    <div id="M003701_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 63</span>
63:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">soap2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span> = <span class="ruby-keyword kw">nil</span>)
64:     <span class="ruby-keyword kw">begin</span>
65:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">any2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span>)
66:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">MappingError</span>
67:     <span class="ruby-keyword kw">end</span>
68:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>
69:       <span class="ruby-keyword kw">begin</span>
70:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">node</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_node</span><span class="ruby-operator">|</span>
71:             <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_soap2obj</span>(<span class="ruby-identifier">yield_node</span>, <span class="ruby-keyword kw">self</span>)
72:           }
73:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
74:       <span class="ruby-keyword kw">end</span>
75:     <span class="ruby-keyword kw">end</span>
76:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{node.type.name} to Ruby object&quot;</span>)
77:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M003714">
                    
                    <a name="M003714"></a><b>add_elements2stubobj</b>(node, obj)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003714_source')" id="l_M003714_source">show</a>
                        
                    </p>
                    <div id="M003714_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 234</span>
234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_elements2stubobj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj</span>)
235:     <span class="ruby-identifier">elements</span>, <span class="ruby-identifier">as_array</span> = <span class="ruby-identifier">schema_element_definition</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span>)
236:     <span class="ruby-identifier">vars</span> = {}
237:     <span class="ruby-identifier">node</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
238:       <span class="ruby-identifier">item</span> = <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> }
239:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item</span>
240:         <span class="ruby-identifier">elename</span>, <span class="ruby-identifier">class_name</span> = <span class="ruby-identifier">item</span>
241:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">class_from_name</span>(<span class="ruby-identifier">class_name</span>)
242:           <span class="ruby-comment cmt"># klass must be a SOAPBasetype or a class</span>
243:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">SOAP</span><span class="ruby-operator">::</span><span class="ruby-constant">SOAPBasetype</span>)
244:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:data</span>)
245:               <span class="ruby-identifier">child</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">data</span>).<span class="ruby-identifier">data</span>
246:             <span class="ruby-keyword kw">else</span>
247:               <span class="ruby-identifier">child</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>).<span class="ruby-identifier">data</span>
248:             <span class="ruby-keyword kw">end</span>
249:           <span class="ruby-keyword kw">else</span>
250:             <span class="ruby-identifier">child</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_soap2obj</span>(<span class="ruby-identifier">value</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">klass</span>)
251:           <span class="ruby-keyword kw">end</span>
252:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">module_from_name</span>(<span class="ruby-identifier">class_name</span>)
253:           <span class="ruby-comment cmt"># simpletype</span>
254:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:data</span>)
255:             <span class="ruby-identifier">child</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">data</span>
256:           <span class="ruby-keyword kw">else</span>
257:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(
258:               <span class="ruby-node">&quot;cannot map to a module value: #{class_name}&quot;</span>)
259:           <span class="ruby-keyword kw">end</span>
260:         <span class="ruby-keyword kw">else</span>
261:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;unknown class: #{class_name}&quot;</span>)
262:         <span class="ruby-keyword kw">end</span>
263:       <span class="ruby-keyword kw">else</span>      <span class="ruby-comment cmt"># untyped element is treated as anyType.</span>
264:         <span class="ruby-identifier">child</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_soap2obj</span>(<span class="ruby-identifier">value</span>, <span class="ruby-keyword kw">self</span>)
265:       <span class="ruby-keyword kw">end</span>
266:       <span class="ruby-identifier">vars</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">child</span>
267:     <span class="ruby-keyword kw">end</span>
268:     <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">set_attributes</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">vars</span>)
269:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003712">
                    
                    <a name="M003712"></a><b>any2obj</b>(node, obj_class)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003712_source')" id="l_M003712_source">show</a>
                        
                    </p>
                    <div id="M003712_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 214</span>
214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">any2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span>)
215:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj_class</span>
216:       <span class="ruby-identifier">typestr</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeGen</span><span class="ruby-operator">::</span><span class="ruby-constant">GenSupport</span>.<span class="ruby-identifier">safeconstname</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">elename</span>.<span class="ruby-identifier">name</span>)
217:       <span class="ruby-identifier">obj_class</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">class_from_name</span>(<span class="ruby-identifier">typestr</span>)
218:     <span class="ruby-keyword kw">end</span>
219:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj_class</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">obj_class</span>.<span class="ruby-identifier">class_variables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'@@schema_element'</span>)
220:       <span class="ruby-identifier">soap2stubobj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span>)
221:     <span class="ruby-keyword kw">else</span>
222:       <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_soap2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">DefaultRegistry</span>, <span class="ruby-identifier">obj_class</span>)
223:     <span class="ruby-keyword kw">end</span>
224:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003702">
                    
                    <a name="M003702"></a><b>any2soap</b>(obj, qname)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003702_source')" id="l_M003702_source">show</a>
                        
                    </p>
                    <div id="M003702_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 81</span>
81:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">any2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
82:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>
83:       <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span>
84:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">qname</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">qname</span> <span class="ruby-operator">==</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyTypeName</span>
85:       <span class="ruby-ivar">@rubytype_factory</span>.<span class="ruby-identifier">obj2soap</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">obj</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">self</span>)
86:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NSDBase</span>)
87:       <span class="ruby-identifier">soap2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
88:     <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">type</span> = <span class="ruby-constant">TypeMap</span>[<span class="ruby-identifier">qname</span>])
89:       <span class="ruby-identifier">base2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
90:     <span class="ruby-keyword kw">else</span>
91:       <span class="ruby-keyword kw">nil</span>
92:     <span class="ruby-keyword kw">end</span>
93:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003709">
                    
                    <a name="M003709"></a><b>array2soap</b>(obj, type_qname, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003709_source')" id="l_M003709_source">show</a>
                        
                    </p>
                    <div id="M003709_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 172</span>
172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">array2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type_qname</span>, <span class="ruby-identifier">type</span>)
173:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>      <span class="ruby-comment cmt"># ToDo: check nillable.</span>
174:     <span class="ruby-identifier">arytype</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">child_type</span>
175:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-constant">SOAPArray</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ValueArrayName</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">arytype</span>)
176:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>
177:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
178:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
179:         <span class="ruby-identifier">soap_obj</span>.<span class="ruby-identifier">add</span>(<span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">item</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">arytype</span>))
180:       <span class="ruby-keyword kw">end</span>
181:     <span class="ruby-keyword kw">end</span>
182:     <span class="ruby-identifier">soap_obj</span>
183:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003707">
                    
                    <a name="M003707"></a><b>base2soap</b>(obj, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003707_source')" id="l_M003707_source">show</a>
                        
                    </p>
                    <div id="M003707_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 149</span>
149:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
150:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-keyword kw">nil</span>
151:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">XSDString</span>
152:       <span class="ruby-identifier">str</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">Charset</span>.<span class="ruby-identifier">encoding_conv</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">to_s</span>,
153:         <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-identifier">:SOAPExternalCES</span>], <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">Charset</span>.<span class="ruby-identifier">encoding</span>)
154:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>)
155:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
156:     <span class="ruby-keyword kw">else</span>
157:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">obj</span>)
158:     <span class="ruby-keyword kw">end</span>
159:     <span class="ruby-identifier">soap_obj</span>
160:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003706">
                    
                    <a name="M003706"></a><b>complexobj2soap</b>(obj, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003706_source')" id="l_M003706_source">show</a>
                        
                    </p>
                    <div id="M003706_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">complexobj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
132:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">compoundtype</span>
133:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_STRUCT</span>
134:       <span class="ruby-identifier">struct2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>)
135:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_ARRAY</span>
136:       <span class="ruby-identifier">array2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>)
137:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_MAP</span>
138:       <span class="ruby-identifier">map2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>)
139:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_SIMPLE</span>
140:       <span class="ruby-identifier">simpleobj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">simplecontent</span>)
141:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:TYPE_EMPTY</span>
142:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;should be empty&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>
143:       <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span>
144:     <span class="ruby-keyword kw">else</span>
145:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;unknown compound type: #{type.compoundtype}&quot;</span>)
146:     <span class="ruby-keyword kw">end</span>
147:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003711">
                    
                    <a name="M003711"></a><b>elements2soap</b>(obj, soap_obj, elements)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003711_source')" id="l_M003711_source">show</a>
                        
                    </p>
                    <div id="M003711_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">elements2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>, <span class="ruby-identifier">elements</span>)
206:     <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
207:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">element</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">name</span>
208:       <span class="ruby-identifier">child_obj</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">name</span>)
209:       <span class="ruby-identifier">soap_obj</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">name</span>,
210:         <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">child_obj</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">element</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">name</span>))
211:     <span class="ruby-keyword kw">end</span>
212:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003710">
                    
                    <a name="M003710"></a><b>map2soap</b>(obj, type_qname, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003710_source')" id="l_M003710_source">show</a>
                        
                    </p>
                    <div id="M003710_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type_qname</span>, <span class="ruby-identifier">type</span>)
188:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>      <span class="ruby-comment cmt"># ToDo: check nillable.</span>
189:     <span class="ruby-identifier">keytype</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">child_type</span>(<span class="ruby-constant">MapKeyName</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyTypeName</span>
190:     <span class="ruby-identifier">valuetype</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">child_type</span>(<span class="ruby-constant">MapValueName</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyTypeName</span>
191:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-constant">SOAPStruct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">MapQName</span>)
192:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>
193:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
194:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
195:         <span class="ruby-identifier">elem</span> = <span class="ruby-constant">SOAPStruct</span>.<span class="ruby-identifier">new</span>
196:         <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value str">&quot;key&quot;</span>, <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">key</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">keytype</span>))
197:         <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value str">&quot;value&quot;</span>, <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">value</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">valuetype</span>))
198:         <span class="ruby-comment cmt"># ApacheAxis allows only 'item' here.</span>
199:         <span class="ruby-identifier">soap_obj</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value str">&quot;item&quot;</span>, <span class="ruby-identifier">elem</span>)
200:       <span class="ruby-keyword kw">end</span>
201:     <span class="ruby-keyword kw">end</span>
202:     <span class="ruby-identifier">soap_obj</span>
203:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003704">
                    
                    <a name="M003704"></a><b>obj2typesoap</b>(obj, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003704_source')" id="l_M003704_source">show</a>
                        
                    </p>
                    <div id="M003704_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj2typesoap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
117:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">WSDL</span><span class="ruby-operator">::</span><span class="ruby-constant">XMLSchema</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleType</span>)
118:       <span class="ruby-identifier">simpleobj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
119:     <span class="ruby-keyword kw">else</span>
120:       <span class="ruby-identifier">complexobj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
121:     <span class="ruby-keyword kw">end</span>
122:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003715">
                    
                    <a name="M003715"></a><b>schema_element_definition</b>(klass)
                    
                </div>
                
                <div class="description">
                  <p>
it caches @@schema_element. this means that @@schema_element must not be
changed while a lifetime of a <a
href="WSDLLiteralRegistry.html">WSDLLiteralRegistry</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003715_source')" id="l_M003715_source">show</a>
                        
                    </p>
                    <div id="M003715_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 273</span>
273:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">schema_element_definition</span>(<span class="ruby-identifier">klass</span>)
274:     <span class="ruby-ivar">@schema_element_cache</span>[<span class="ruby-identifier">klass</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">schema_element_definition</span>(<span class="ruby-identifier">klass</span>)
275:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003705">
                    
                    <a name="M003705"></a><b>simpleobj2soap</b>(obj, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003705_source')" id="l_M003705_source">show</a>
                        
                    </p>
                    <div id="M003705_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">simpleobj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
125:     <span class="ruby-identifier">type</span>.<span class="ruby-identifier">check_lexical_format</span>(<span class="ruby-identifier">obj</span>)
126:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>      <span class="ruby-comment cmt"># ToDo: check nillable.</span>
127:     <span class="ruby-identifier">o</span> = <span class="ruby-identifier">base2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-constant">TypeMap</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">base</span>])
128:     <span class="ruby-identifier">o</span>
129:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003703">
                    
                    <a name="M003703"></a><b>soap2soap</b>(obj, type_qname)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003703_source')" id="l_M003703_source">show</a>
                        
                    </p>
                    <div id="M003703_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 95</span>
 95:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">soap2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type_qname</span>)
 96:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPBasetype</span>)
 97:       <span class="ruby-identifier">obj</span>
 98:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPStruct</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">type</span> = <span class="ruby-ivar">@definedtypes</span>[<span class="ruby-identifier">type_qname</span>])
 99:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj</span>
100:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
101:       <span class="ruby-identifier">elements2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">content</span>.<span class="ruby-identifier">elements</span>)
102:       <span class="ruby-identifier">soap_obj</span>
103:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPArray</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">type</span> = <span class="ruby-ivar">@definedtypes</span>[<span class="ruby-identifier">type_qname</span>])
104:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj</span>
105:       <span class="ruby-identifier">contenttype</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">child_type</span>
106:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
107:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">replace</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ele</span><span class="ruby-operator">|</span>
108:         <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">ele</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">contenttype</span>)
109:       <span class="ruby-keyword kw">end</span>
110:       <span class="ruby-identifier">soap_obj</span>
111:     <span class="ruby-keyword kw">else</span>
112:       <span class="ruby-keyword kw">nil</span>
113:     <span class="ruby-keyword kw">end</span>
114:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003713">
                    
                    <a name="M003713"></a><b>soap2stubobj</b>(node, obj_class)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003713_source')" id="l_M003713_source">show</a>
                        
                    </p>
                    <div id="M003713_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 226</span>
226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">soap2stubobj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span>)
227:     <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">create_empty_object</span>(<span class="ruby-identifier">obj_class</span>)
228:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SOAPNil</span>)
229:       <span class="ruby-identifier">add_elements2stubobj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj</span>)
230:     <span class="ruby-keyword kw">end</span>
231:     <span class="ruby-identifier">obj</span>
232:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003708">
                    
                    <a name="M003708"></a><b>struct2soap</b>(obj, type_qname, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003708_source')" id="l_M003708_source">show</a>
                        
                    </p>
                    <div id="M003708_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/soap/mapping/wsdlencodedregistry.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">struct2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type_qname</span>, <span class="ruby-identifier">type</span>)
163:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">SOAPNil</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>      <span class="ruby-comment cmt"># ToDo: check nillable.</span>
164:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-constant">SOAPStruct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">type_qname</span>)
165:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">nil?</span>
166:       <span class="ruby-identifier">mark_marshalled_obj</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>)
167:       <span class="ruby-identifier">elements2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">soap_obj</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">content</span>.<span class="ruby-identifier">elements</span>)
168:     <span class="ruby-keyword kw">end</span>
169:     <span class="ruby-identifier">soap_obj</span>
170:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    