<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Thread</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Thread 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/eval_c.html">eval.c</a></li>
            
            <li><a href="../files/lib/thread_rb.html">lib/thread.rb</a></li>
            
            <li><a href="../files/ext/thread/thread_c.html">ext/thread/thread.c</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<tt>Thread</tt> encapsulates the behavior of a thread of execution,
including the main thread of the Ruby script.
</p>
<p>
In the descriptions of the methods in this class, the parameter
<em>sym</em> refers to a symbol, which is either a quoted string or a
<tt>Symbol</tt> (such as <tt>:name</tt>).
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M001154">[]</a>,</li>
                
                <li><a href="#M001155">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001132">abort_on_exception</a>,</li>
                
                <li><a href="#M001148">abort_on_exception</a>,</li>
                
                <li><a href="#M001149">abort_on_exception=</a>,</li>
                
                <li><a href="#M001133">abort_on_exception=</a>,</li>
                
                <li><a href="#M001145">alive?</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M001130">critical</a>,</li>
                
                <li><a href="#M001131">critical=</a>,</li>
                
                <li><a href="#M001127">current</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M001736">exclusive</a>,</li>
                
                <li><a href="#M006756">exclusive</a>,</li>
                
                <li><a href="#M001125">exit</a>,</li>
                
                <li><a href="#M001138">exit</a>,</li>
                
                <li><a href="#M001141">exit!</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M001122">fork</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M001153">group</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M001158">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M001144">join</a></li>
                
            </ul>
        </dd>
    
        <dt>K</dt>
        <dd>
            <ul>
                
                <li><a href="#M001156">key?</a>,</li>
                
                <li><a href="#M001157">keys</a>,</li>
                
                <li><a href="#M001136">kill</a>,</li>
                
                <li><a href="#M001124">kill</a>,</li>
                
                <li><a href="#M001139">kill!</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M001129">list</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M001128">main</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M001120">new</a>,</li>
                
                <li><a href="#M001119">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M001126">pass</a>,</li>
                
                <li><a href="#M001150">priority</a>,</li>
                
                <li><a href="#M001151">priority=</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M001147">raise</a>,</li>
                
                <li><a href="#M001134">run</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M001152">safe_level</a>,</li>
                
                <li><a href="#M001121">start</a>,</li>
                
                <li><a href="#M001143">status</a>,</li>
                
                <li><a href="#M001123">stop</a>,</li>
                
                <li><a href="#M001146">stop?</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M001137">terminate</a>,</li>
                
                <li><a href="#M001140">terminate!</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M001142">value</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M001135">wakeup</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M001132">
                    
                    <a name="M001132"></a><b>Thread.abort_on_exception   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status of the global ``abort on exception&#8217;&#8217;
condition. The default is <tt>false</tt>. When set to <tt>true</tt>, or if
the global <tt>$DEBUG</tt> flag is <tt>true</tt> (perhaps because the
command line option <tt>-d</tt> was specified) all threads will abort (the
process will <tt>exit(0)</tt>) if an exception is raised in any thread. See
also <tt>Thread::<a
href="Thread.html#M001132">abort_on_exception</a>=</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001132_source')" id="l_M001132_source">show</a>
                        
                    </p>
                    <div id="M001132_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_s_abort_exc()
{
    return ruby_thread_abort?Qtrue:Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001133">
                    
                    <a name="M001133"></a><b>Thread.abort_on_exception= boolean   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When set to <tt>true</tt>, all threads will abort if an exception is
raised. Returns the new state.
</p>
<pre>
   Thread.abort_on_exception = true
   t1 = Thread.new do
     puts  &quot;In new thread&quot;
     raise &quot;Exception from thread&quot;
   end
   sleep(1)
   puts &quot;not reached&quot;
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   In new thread
   prog.rb:4: Exception from thread (RuntimeError)
    from prog.rb:2:in `initialize'
    from prog.rb:2:in `new'
    from prog.rb:2
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001133_source')" id="l_M001133_source">show</a>
                        
                    </p>
                    <div id="M001133_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_s_abort_exc_set(self, val)
    VALUE self, val;
{
    rb_secure(4);
    ruby_thread_abort = RTEST(val);
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001130">
                    
                    <a name="M001130"></a><b>Thread.critical   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status of the global ``thread critical&#8217;&#8217; condition.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001130_source')" id="l_M001130_source">show</a>
                        
                    </p>
                    <div id="M001130_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_critical_get()
{
    return rb_thread_critical?Qtrue:Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001131">
                    
                    <a name="M001131"></a><b>Thread.critical= boolean   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Sets the status of the global ``thread critical&#8217;&#8217; condition and
returns it. When set to <tt>true</tt>, prohibits scheduling of any existing
thread. Does not block new threads from being created and run. Certain
thread operations (such as stopping or killing a thread, sleeping in the
current thread, and raising an exception) may cause a thread to be
scheduled even when in a critical section. <tt>Thread::critical</tt> is not
intended for daily use: it is primarily there to support folks writing
threading libraries.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001131_source')" id="l_M001131_source">show</a>
                        
                    </p>
                    <div id="M001131_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_critical_set(obj, val)
    VALUE obj, val;
{
    rb_thread_critical = RTEST(val);
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001127">
                    
                    <a name="M001127"></a><b>Thread.current   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the currently executing thread.
</p>
<pre>
   Thread.current   #=&gt; #&lt;Thread:0x401bdf4c run&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001127_source')" id="l_M001127_source">show</a>
                        
                    </p>
                    <div id="M001127_source" class="dyn-source">
                        <pre>VALUE
rb_thread_current()
{
    return curr_thread-&gt;thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001736">
                    
                    <a name="M001736"></a><b>exclusive</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Wraps a block in <a href="Thread.html#M001130">Thread.critical</a>,
restoring the original value upon exit from the critical section.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001736_source')" id="l_M001736_source">show</a>
                        
                    </p>
                    <div id="M001736_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thread.rb, line 24</span>
24:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">exclusive</span>
25:     <span class="ruby-identifier">_old</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span>
26:     <span class="ruby-keyword kw">begin</span>
27:       <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span> = <span class="ruby-keyword kw">true</span>
28:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">yield</span>
29:     <span class="ruby-keyword kw">ensure</span>
30:       <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span> = <span class="ruby-identifier">_old</span>
31:     <span class="ruby-keyword kw">end</span>
32:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006756">
                    
                    <a name="M006756"></a><b>Thread.exclusive { block }   => obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Wraps a block in <a href="Thread.html#M001130">Thread.critical</a>,
restoring the original value upon exit from the critical section, and
returns the value of the block.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006756_source')" id="l_M006756_source">show</a>
                        
                    </p>
                    <div id="M006756_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_exclusive(void)
{
    return thread_exclusive(rb_yield, Qundef);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001125">
                    
                    <a name="M001125"></a><b>Thread.exit   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates the currently running thread and schedules another thread to be
run. If this thread is already marked to be killed, <tt>exit</tt> returns
the <tt>Thread</tt>. If this is the main thread, or the last thread, exit
the process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001125_source')" id="l_M001125_source">show</a>
                        
                    </p>
                    <div id="M001125_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_exit()
{
    return rb_thread_kill(curr_thread-&gt;thread);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001122">
                    
                    <a name="M001122"></a><b>Thread.start([args]*) {|args| block }   => thread
Thread.fork([args]*) {|args| block }    => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Basically the same as <tt>Thread::new</tt>. However, if class
<tt>Thread</tt> is subclassed, then calling <tt>start</tt> in that subclass
will not invoke the subclass&#8217;s <tt>initialize</tt> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001122_source')" id="l_M001122_source">show</a>
                        
                    </p>
                    <div id="M001122_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_start(klass, args)
    VALUE klass, args;
{
    if (!rb_block_given_p()) {
        rb_raise(rb_eThreadError, &quot;must be called with a block&quot;);
    }
    return rb_thread_start_0(rb_thread_yield, args, rb_thread_alloc(klass));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001124">
                    
                    <a name="M001124"></a><b>Thread.kill(thread)   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Causes the given <em>thread</em> to exit (see <tt>Thread::exit</tt>).
</p>
<pre>
   count = 0
   a = Thread.new { loop { count += 1 } }
   sleep(0.1)       #=&gt; 0
   Thread.kill(a)   #=&gt; #&lt;Thread:0x401b3d30 dead&gt;
   count            #=&gt; 93947
   a.alive?         #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001124_source')" id="l_M001124_source">show</a>
                        
                    </p>
                    <div id="M001124_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_s_kill(obj, th)
    VALUE obj, th;
{
    return rb_thread_kill(th);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001129">
                    
                    <a name="M001129"></a><b>Thread.list   => array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of <tt>Thread</tt> objects for all threads that are either
runnable or stopped.
</p>
<pre>
   Thread.new { sleep(200) }
   Thread.new { 1000000.times {|i| i*i } }
   Thread.new { Thread.stop }
   Thread.list.each {|t| p t}
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   #&lt;Thread:0x401b3e84 sleep&gt;
   #&lt;Thread:0x401b3f38 run&gt;
   #&lt;Thread:0x401b3fb0 sleep&gt;
   #&lt;Thread:0x401bdf4c run&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001129_source')" id="l_M001129_source">show</a>
                        
                    </p>
                    <div id="M001129_source" class="dyn-source">
                        <pre>VALUE
rb_thread_list()
{
    rb_thread_t th;
    VALUE ary = rb_ary_new();

    FOREACH_THREAD(th) {
        switch (th-&gt;status) {
          case THREAD_RUNNABLE:
          case THREAD_STOPPED:
          case THREAD_TO_KILL:
            rb_ary_push(ary, th-&gt;thread);
          default:
            break;
        }
    }
    END_FOREACH(th);

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001128">
                    
                    <a name="M001128"></a><b>Thread.main   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the main thread for the process.
</p>
<pre>
   Thread.main   #=&gt; #&lt;Thread:0x401bdf4c run&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001128_source')" id="l_M001128_source">show</a>
                        
                    </p>
                    <div id="M001128_source" class="dyn-source">
                        <pre>VALUE
rb_thread_main()
{
    return main_thread-&gt;thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001120">
                    
                    <a name="M001120"></a><b>Thread.new([arg]*) {|args| block }   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates and runs a new thread to execute the instructions given in
<em>block</em>. Any arguments passed to <tt>Thread::new</tt> are passed
into the block.
</p>
<pre>
   x = Thread.new { sleep 0.1; print &quot;x&quot;; print &quot;y&quot;; print &quot;z&quot; }
   a = Thread.new { print &quot;a&quot;; print &quot;b&quot;; sleep 0.2; print &quot;c&quot; }
   x.join # Let the threads finish before
   a.join # main thread exits...
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   abxyzc
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001120_source')" id="l_M001120_source">show</a>
                        
                    </p>
                    <div id="M001120_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_initialize(thread, args)
    VALUE thread, args;
{
    rb_thread_t th;

    if (!rb_block_given_p()) {
        rb_raise(rb_eThreadError, &quot;must be called with a block&quot;);
    }
    th = rb_thread_check(thread);
    if (th-&gt;stk_max) {
        NODE *node = th-&gt;node;
        if (!node) {
            rb_raise(rb_eThreadError, &quot;already initialized thread&quot;);
        }
        rb_raise(rb_eThreadError, &quot;already initialized thread - %s:%d&quot;,
                 node-&gt;nd_file, nd_line(node));
    }
    return rb_thread_start_0(rb_thread_yield, args, th);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001119">
                    
                    <a name="M001119"></a><b>Thread.new([arg]*) {|args| block }   => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates and runs a new thread to execute the instructions given in
<em>block</em>. Any arguments passed to <tt>Thread::new</tt> are passed
into the block.
</p>
<pre>
   x = Thread.new { sleep 0.1; print &quot;x&quot;; print &quot;y&quot;; print &quot;z&quot; }
   a = Thread.new { print &quot;a&quot;; print &quot;b&quot;; sleep 0.2; print &quot;c&quot; }
   x.join # Let the threads finish before
   a.join # main thread exits...
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   abxyzc
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001119_source')" id="l_M001119_source">show</a>
                        
                    </p>
                    <div id="M001119_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_s_new(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    rb_thread_t th = rb_thread_alloc(klass);
    volatile VALUE *pos;

    pos = th-&gt;stk_pos;
    rb_obj_call_init(th-&gt;thread, argc, argv);
    if (th-&gt;stk_pos == 0) {
        rb_raise(rb_eThreadError, &quot;uninitialized thread - check `%s#initialize'&quot;,
                 rb_class2name(klass));
    }

    return th-&gt;thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001126">
                    
                    <a name="M001126"></a><b>Thread.pass   => nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes the thread scheduler to pass execution to another thread.
</p>
<pre>
   a = Thread.new { print &quot;a&quot;; Thread.pass;
                    print &quot;b&quot;; Thread.pass;
                    print &quot;c&quot; }
   b = Thread.new { print &quot;x&quot;; Thread.pass;
                    print &quot;y&quot;; Thread.pass;
                    print &quot;z&quot; }
   a.join
   b.join
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   axbycz
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001126_source')" id="l_M001126_source">show</a>
                        
                    </p>
                    <div id="M001126_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_pass()
{
    rb_thread_schedule();
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001121">
                    
                    <a name="M001121"></a><b>Thread.start([args]*) {|args| block }   => thread
Thread.fork([args]*) {|args| block }    => thread
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Basically the same as <tt>Thread::new</tt>. However, if class
<tt>Thread</tt> is subclassed, then calling <tt>start</tt> in that subclass
will not invoke the subclass&#8217;s <tt>initialize</tt> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001121_source')" id="l_M001121_source">show</a>
                        
                    </p>
                    <div id="M001121_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_start(klass, args)
    VALUE klass, args;
{
    if (!rb_block_given_p()) {
        rb_raise(rb_eThreadError, &quot;must be called with a block&quot;);
    }
    return rb_thread_start_0(rb_thread_yield, args, rb_thread_alloc(klass));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001123">
                    
                    <a name="M001123"></a><b>Thread.stop   => nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Stops execution of the current thread, putting it into a
``sleep&#8217;&#8217; state, and schedules execution of another thread.
Resets the ``critical&#8217;&#8217; condition to <tt>false</tt>.
</p>
<pre>
   a = Thread.new { print &quot;a&quot;; Thread.stop; print &quot;c&quot; }
   Thread.pass
   print &quot;b&quot;
   a.run
   a.join
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   abc
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001123_source')" id="l_M001123_source">show</a>
                        
                    </p>
                    <div id="M001123_source" class="dyn-source">
                        <pre>VALUE
rb_thread_stop()
{
    enum rb_thread_status last_status = THREAD_RUNNABLE;

    rb_thread_critical = 0;
    if (curr_thread == curr_thread-&gt;next) {
        rb_raise(rb_eThreadError, &quot;stopping only thread\n\tnote: use sleep to stop forever&quot;);
    }
    if (curr_thread-&gt;status == THREAD_TO_KILL)
        last_status = THREAD_TO_KILL;
    curr_thread-&gt;status = THREAD_STOPPED;
    rb_thread_schedule();
    curr_thread-&gt;status = last_status;

    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M001154">
                    
                    <a name="M001154"></a><b>thr[sym]   => obj or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attribute Reference&#8212;Returns the value of a thread-local variable,
using either a symbol or a string name. If the specified variable does not
exist, returns <tt>nil</tt>.
</p>
<pre>
   a = Thread.new { Thread.current[&quot;name&quot;] = &quot;A&quot;; Thread.stop }
   b = Thread.new { Thread.current[:name]  = &quot;B&quot;; Thread.stop }
   c = Thread.new { Thread.current[&quot;name&quot;] = &quot;C&quot;; Thread.stop }
   Thread.list.each {|x| puts &quot;#{x.inspect}: #{x[:name]}&quot; }
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   #&lt;Thread:0x401b3b3c sleep&gt;: C
   #&lt;Thread:0x401b3bc8 sleep&gt;: B
   #&lt;Thread:0x401b3c68 sleep&gt;: A
   #&lt;Thread:0x401bdf4c run&gt;:
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001154_source')" id="l_M001154_source">show</a>
                        
                    </p>
                    <div id="M001154_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_aref(thread, id)
    VALUE thread, id;
{
    return rb_thread_local_aref(thread, rb_to_id(id));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001155">
                    
                    <a name="M001155"></a><b>thr[sym] = obj   => obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attribute Assignment&#8212;Sets or creates the value of a thread-local
variable, using either a symbol or a string. See also <tt>Thread#[]</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001155_source')" id="l_M001155_source">show</a>
                        
                    </p>
                    <div id="M001155_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_aset(thread, id, val)
    VALUE thread, id, val;
{
    return rb_thread_local_aset(thread, rb_to_id(id), val);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001148">
                    
                    <a name="M001148"></a><b>thr.abort_on_exception   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status of the thread-local ``abort on exception&#8217;&#8217;
condition for <em>thr</em>. The default is <tt>false</tt>. See also
<tt>Thread::<a href="Thread.html#M001132">abort_on_exception</a>=</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001148_source')" id="l_M001148_source">show</a>
                        
                    </p>
                    <div id="M001148_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_abort_exc(thread)
    VALUE thread;
{
    return rb_thread_check(thread)-&gt;abort?Qtrue:Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001149">
                    
                    <a name="M001149"></a><b>thr.abort_on_exception= boolean   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When set to <tt>true</tt>, causes all threads (including the main program)
to abort if an exception is raised in <em>thr</em>. The process will
effectively <tt>exit(0)</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001149_source')" id="l_M001149_source">show</a>
                        
                    </p>
                    <div id="M001149_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_abort_exc_set(thread, val)
    VALUE thread, val;
{
    rb_secure(4);
    rb_thread_check(thread)-&gt;abort = RTEST(val);
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001145">
                    
                    <a name="M001145"></a><b>thr.alive?   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <em>thr</em> is running or sleeping.
</p>
<pre>
   thr = Thread.new { }
   thr.join                #=&gt; #&lt;Thread:0x401b3fb0 dead&gt;
   Thread.current.alive?   #=&gt; true
   thr.alive?              #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001145_source')" id="l_M001145_source">show</a>
                        
                    </p>
                    <div id="M001145_source" class="dyn-source">
                        <pre>VALUE
rb_thread_alive_p(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    if (rb_thread_dead(th)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001138">
                    
                    <a name="M001138"></a><b>thr.exit        => thr
thr.kill        => thr
thr.terminate   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> and schedules another thread to be run, returning
the terminated <tt>Thread</tt>. If this is the main thread, or the last
thread, exits the process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001138_source')" id="l_M001138_source">show</a>
                        
                    </p>
                    <div id="M001138_source" class="dyn-source">
                        <pre>VALUE
rb_thread_kill(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    rb_kill_thread(th, 0);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001141">
                    
                    <a name="M001141"></a><b>thr.exit!        => thr
thr.kill!        => thr
thr.terminate!   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> without calling ensure clauses and schedules
another thread to be run, returning the terminated <tt>Thread</tt>. If this
is the main thread, or the last thread, exits the process.
</p>
<p>
See <tt><a href="Thread.html#M001125">Thread#exit</a></tt> for the safer
version.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001141_source')" id="l_M001141_source">show</a>
                        
                    </p>
                    <div id="M001141_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_kill_bang(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);
    rb_kill_thread(th, THREAD_NO_ENSURE);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001153">
                    
                    <a name="M001153"></a><b>thr.group   => thgrp or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <tt>ThreadGroup</tt> which contains <em>thr</em>, or nil if the
thread is not a member of any group.
</p>
<pre>
   Thread.main.group   #=&gt; #&lt;ThreadGroup:0x4029d914&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001153_source')" id="l_M001153_source">show</a>
                        
                    </p>
                    <div id="M001153_source" class="dyn-source">
                        <pre>VALUE
rb_thread_group(thread)
    VALUE thread;
{
    VALUE group = rb_thread_check(thread)-&gt;thgroup;
    if (!group) {
        group = Qnil;
    }
    return group;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001158">
                    
                    <a name="M001158"></a><b>thr.inspect   => string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Dump the name, id, and status of <em>thr</em> to a string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001158_source')" id="l_M001158_source">show</a>
                        
                    </p>
                    <div id="M001158_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_inspect(thread)
    VALUE thread;
{
    const char *cname = rb_obj_classname(thread);
    rb_thread_t th = rb_thread_check(thread);
    const char *status = thread_status_name(th-&gt;status);
    VALUE str;
    size_t len = strlen(cname)+7+16+9+1;

    str = rb_str_new(0, len); /* 7:tags 16:addr 9:status 1:nul */
    snprintf(RSTRING(str)-&gt;ptr, len, &quot;#&lt;%s:0x%lx %s&gt;&quot;, cname, thread, status);
    RSTRING(str)-&gt;len = strlen(RSTRING(str)-&gt;ptr);
    OBJ_INFECT(str, thread);

    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001144">
                    
                    <a name="M001144"></a><b>thr.join          => thr
thr.join(limit)   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
The calling thread will suspend execution and run <em>thr</em>. Does not
return until <em>thr</em> exits or until <em>limit</em> seconds have
passed. If the time limit expires, <tt>nil</tt> will be returned, otherwise
<em>thr</em> is returned.
</p>
<p>
Any threads not joined will be killed when the main program exits. If
<em>thr</em> had previously raised an exception and the <tt><a
href="Thread.html#M001132">abort_on_exception</a></tt> and <tt>$DEBUG</tt>
flags are not set (so the exception has not yet been processed) it will be
processed at this time.
</p>
<pre>
   a = Thread.new { print &quot;a&quot;; sleep(10); print &quot;b&quot;; print &quot;c&quot; }
   x = Thread.new { print &quot;x&quot;; Thread.pass; print &quot;y&quot;; print &quot;z&quot; }
   x.join # Let x thread finish, a will be killed on exit.
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   axyz
</pre>
<p>
The following example illustrates the <em>limit</em> parameter.
</p>
<pre>
   y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
   puts &quot;Waiting&quot; until y.join(0.15)
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   tick...
   Waiting
   tick...
   Waitingtick...

   tick...
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001144_source')" id="l_M001144_source">show</a>
                        
                    </p>
                    <div id="M001144_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_join_m(argc, argv, thread)
    int argc;
    VALUE *argv;
    VALUE thread;
{
    VALUE limit;
    double delay = DELAY_INFTY;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;limit);
    if (!NIL_P(limit)) delay = rb_num2dbl(limit);
    if (!rb_thread_join0(rb_thread_check(thread), delay))
        return Qnil;
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001156">
                    
                    <a name="M001156"></a><b>thr.key?(sym)   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the given string (or symbol) exists as a
thread-local variable.
</p>
<pre>
   me = Thread.current
   me[:oliver] = &quot;a&quot;
   me.key?(:oliver)    #=&gt; true
   me.key?(:stanley)   #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001156_source')" id="l_M001156_source">show</a>
                        
                    </p>
                    <div id="M001156_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_key_p(thread, id)
    VALUE thread, id;
{
    rb_thread_t th = rb_thread_check(thread);

    if (!th-&gt;locals) return Qfalse;
    if (st_lookup(th-&gt;locals, rb_to_id(id), 0))
        return Qtrue;
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001157">
                    
                    <a name="M001157"></a><b>thr.keys   => array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an an array of the names of the thread-local variables (as
Symbols).
</p>
<pre>
   thr = Thread.new do
     Thread.current[:cat] = 'meow'
     Thread.current[&quot;dog&quot;] = 'woof'
   end
   thr.join   #=&gt; #&lt;Thread:0x401b3f10 dead&gt;
   thr.keys   #=&gt; [:dog, :cat]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001157_source')" id="l_M001157_source">show</a>
                        
                    </p>
                    <div id="M001157_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_keys(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);
    VALUE ary = rb_ary_new();

    if (th-&gt;locals) {
        st_foreach(th-&gt;locals, thread_keys_i, ary);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001136">
                    
                    <a name="M001136"></a><b>thr.exit        => thr
thr.kill        => thr
thr.terminate   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> and schedules another thread to be run, returning
the terminated <tt>Thread</tt>. If this is the main thread, or the last
thread, exits the process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001136_source')" id="l_M001136_source">show</a>
                        
                    </p>
                    <div id="M001136_source" class="dyn-source">
                        <pre>VALUE
rb_thread_kill(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    rb_kill_thread(th, 0);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001139">
                    
                    <a name="M001139"></a><b>thr.exit!        => thr
thr.kill!        => thr
thr.terminate!   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> without calling ensure clauses and schedules
another thread to be run, returning the terminated <tt>Thread</tt>. If this
is the main thread, or the last thread, exits the process.
</p>
<p>
See <tt><a href="Thread.html#M001125">Thread#exit</a></tt> for the safer
version.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001139_source')" id="l_M001139_source">show</a>
                        
                    </p>
                    <div id="M001139_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_kill_bang(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);
    rb_kill_thread(th, THREAD_NO_ENSURE);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001150">
                    
                    <a name="M001150"></a><b>thr.priority   => integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the priority of <em>thr</em>. Default is inherited from the current
thread which creating the new thread, or zero for the initial main thread;
higher-priority threads will run before lower-priority threads.
</p>
<pre>
   Thread.current.priority   #=&gt; 0
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001150_source')" id="l_M001150_source">show</a>
                        
                    </p>
                    <div id="M001150_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_priority(thread)
    VALUE thread;
{
    return INT2NUM(rb_thread_check(thread)-&gt;priority);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001151">
                    
                    <a name="M001151"></a><b>thr.priority= integer   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Sets the priority of <em>thr</em> to <em>integer</em>. Higher-priority
threads will run before lower-priority threads.
</p>
<pre>
   count1 = count2 = 0
   a = Thread.new do
         loop { count1 += 1 }
       end
   a.priority = -1

   b = Thread.new do
         loop { count2 += 1 }
       end
   b.priority = -2
   sleep 1   #=&gt; 1
   Thread.critical = 1
   count1    #=&gt; 622504
   count2    #=&gt; 5832
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001151_source')" id="l_M001151_source">show</a>
                        
                    </p>
                    <div id="M001151_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_priority_set(thread, prio)
    VALUE thread, prio;
{
    rb_thread_t th;

    rb_secure(4);
    th = rb_thread_check(thread);

    th-&gt;priority = NUM2INT(prio);
    rb_thread_schedule();
    return prio;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001147">
                    
                    <a name="M001147"></a><b>thr.raise(exception)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Raises an exception (see <tt>Kernel::raise</tt>) from <em>thr</em>. The
caller does not have to be <em>thr</em>.
</p>
<pre>
   Thread.abort_on_exception = true
   a = Thread.new { sleep(200) }
   a.raise(&quot;Gotcha&quot;)
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   prog.rb:3: Gotcha (RuntimeError)
    from prog.rb:2:in `initialize'
    from prog.rb:2:in `new'
    from prog.rb:2
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001147_source')" id="l_M001147_source">show</a>
                        
                    </p>
                    <div id="M001147_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_raise_m(argc, argv, thread)
    int argc;
    VALUE *argv;
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    if (ruby_safe_level &gt; th-&gt;safe) {
        rb_secure(4);
    }
    rb_thread_raise(argc, argv, th);
    return Qnil;                /* not reached */
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001134">
                    
                    <a name="M001134"></a><b>thr.run   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Wakes up <em>thr</em>, making it eligible for scheduling. If not in a
critical section, then invokes the scheduler.
</p>
<pre>
   a = Thread.new { puts &quot;a&quot;; Thread.stop; puts &quot;c&quot; }
   Thread.pass
   puts &quot;Got here&quot;
   a.run
   a.join
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   a
   Got here
   c
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001134_source')" id="l_M001134_source">show</a>
                        
                    </p>
                    <div id="M001134_source" class="dyn-source">
                        <pre>VALUE
rb_thread_run(thread)
    VALUE thread;
{
    rb_thread_wakeup(thread);
    if (!rb_thread_critical) rb_thread_schedule();

    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001152">
                    
                    <a name="M001152"></a><b>thr.safe_level   => integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the safe level in effect for <em>thr</em>. Setting thread-local
safe levels can help when implementing sandboxes which run insecure code.
</p>
<pre>
   thr = Thread.new { $SAFE = 3; sleep }
   Thread.current.safe_level   #=&gt; 0
   thr.safe_level              #=&gt; 3
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001152_source')" id="l_M001152_source">show</a>
                        
                    </p>
                    <div id="M001152_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_safe_level(thread)
    VALUE thread;
{
    rb_thread_t th;

    th = rb_thread_check(thread);
    if (th == curr_thread) {
        return INT2NUM(ruby_safe_level);
    }
    return INT2NUM(th-&gt;safe);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001143">
                    
                    <a name="M001143"></a><b>thr.status   => string, false or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status of <em>thr</em>: ``<tt>sleep</tt>&#8217;&#8217; if
<em>thr</em> is sleeping or waiting on I/O, ``<tt>run</tt>&#8217;&#8217; if
<em>thr</em> is executing, ``<tt>aborting</tt>&#8217;&#8217; if
<em>thr</em> is aborting, <tt>false</tt> if <em>thr</em> terminated
normally, and <tt>nil</tt> if <em>thr</em> terminated with an exception.
</p>
<pre>
   a = Thread.new { raise(&quot;die now&quot;) }
   b = Thread.new { Thread.stop }
   c = Thread.new { Thread.exit }
   d = Thread.new { sleep }
   Thread.critical = true
   d.kill                  #=&gt; #&lt;Thread:0x401b3678 aborting&gt;
   a.status                #=&gt; nil
   b.status                #=&gt; &quot;sleep&quot;
   c.status                #=&gt; false
   d.status                #=&gt; &quot;aborting&quot;
   Thread.current.status   #=&gt; &quot;run&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001143_source')" id="l_M001143_source">show</a>
                        
                    </p>
                    <div id="M001143_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_status(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    if (rb_thread_dead(th)) {
        if (!NIL_P(th-&gt;errinfo) &amp;&amp; (th-&gt;flags &amp; RAISED_EXCEPTION))
            return Qnil;
        return Qfalse;
    }

    return rb_str_new2(thread_status_name(th-&gt;status));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001146">
                    
                    <a name="M001146"></a><b>thr.stop?   => true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <em>thr</em> is dead or sleeping.
</p>
<pre>
   a = Thread.new { Thread.stop }
   b = Thread.current
   a.stop?   #=&gt; true
   b.stop?   #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001146_source')" id="l_M001146_source">show</a>
                        
                    </p>
                    <div id="M001146_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_stop_p(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    if (rb_thread_dead(th)) return Qtrue;
    if (th-&gt;status == THREAD_STOPPED) return Qtrue;
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001137">
                    
                    <a name="M001137"></a><b>thr.exit        => thr
thr.kill        => thr
thr.terminate   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> and schedules another thread to be run, returning
the terminated <tt>Thread</tt>. If this is the main thread, or the last
thread, exits the process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001137_source')" id="l_M001137_source">show</a>
                        
                    </p>
                    <div id="M001137_source" class="dyn-source">
                        <pre>VALUE
rb_thread_kill(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    rb_kill_thread(th, 0);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001140">
                    
                    <a name="M001140"></a><b>thr.exit!        => thr
thr.kill!        => thr
thr.terminate!   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Terminates <em>thr</em> without calling ensure clauses and schedules
another thread to be run, returning the terminated <tt>Thread</tt>. If this
is the main thread, or the last thread, exits the process.
</p>
<p>
See <tt><a href="Thread.html#M001125">Thread#exit</a></tt> for the safer
version.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001140_source')" id="l_M001140_source">show</a>
                        
                    </p>
                    <div id="M001140_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_kill_bang(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);
    rb_kill_thread(th, THREAD_NO_ENSURE);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001142">
                    
                    <a name="M001142"></a><b>thr.value   => obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Waits for <em>thr</em> to complete (via <tt><a
href="Thread.html#M001144">Thread#join</a></tt>) and returns its value.
</p>
<pre>
   a = Thread.new { 2 + 2 }
   a.value   #=&gt; 4
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001142_source')" id="l_M001142_source">show</a>
                        
                    </p>
                    <div id="M001142_source" class="dyn-source">
                        <pre>static VALUE
rb_thread_value(thread)
    VALUE thread;
{
    rb_thread_t th = rb_thread_check(thread);

    while (!rb_thread_join0(th, DELAY_INFTY));

    return th-&gt;result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001135">
                    
                    <a name="M001135"></a><b>thr.wakeup   => thr
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Marks <em>thr</em> as eligible for scheduling (it may still remain blocked
on I/O, however). Does not invoke the scheduler (see <tt><a
href="Thread.html#M001134">Thread#run</a></tt>).
</p>
<pre>
   c = Thread.new { Thread.stop; puts &quot;hey!&quot; }
   c.wakeup
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   hey!
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001135_source')" id="l_M001135_source">show</a>
                        
                    </p>
                    <div id="M001135_source" class="dyn-source">
                        <pre>VALUE
rb_thread_wakeup(thread)
    VALUE thread;
{
    if (!RTEST(rb_thread_wakeup_alive(thread)))
        rb_raise(rb_eThreadError, &quot;killed thread&quot;);
    return thread;
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    