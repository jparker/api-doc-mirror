<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>StringIO</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            StringIO 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/yaml/stringio_rb.html">lib/yaml/stringio.rb</a></li>
            
            <li><a href="../files/ext/stringio/stringio_c.html">ext/stringio/stringio.c</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Pseudo I/O on <a href="String.html">String</a> object.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M007345"><<</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M007307">binmode</a>,</li>
                
                <li><a href="#M007331">bytes</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M007333">chars</a>,</li>
                
                <li><a href="#M007308">close</a>,</li>
                
                <li><a href="#M007309">close_read</a>,</li>
                
                <li><a href="#M007310">close_write</a>,</li>
                
                <li><a href="#M007311">closed?</a>,</li>
                
                <li><a href="#M007312">closed_read?</a>,</li>
                
                <li><a href="#M007313">closed_write?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M007327">each</a>,</li>
                
                <li><a href="#M007330">each_byte</a>,</li>
                
                <li><a href="#M007332">each_char</a>,</li>
                
                <li><a href="#M007328">each_line</a>,</li>
                
                <li><a href="#M006098">eof</a>,</li>
                
                <li><a href="#M007314">eof</a>,</li>
                
                <li><a href="#M007315">eof?</a>,</li>
                
                <li><a href="#M006099">eof?</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M007316">fcntl</a>,</li>
                
                <li><a href="#M007365">fileno</a>,</li>
                
                <li><a href="#M007317">flush</a>,</li>
                
                <li><a href="#M007318">fsync</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M007335">getbyte</a>,</li>
                
                <li><a href="#M007334">getc</a>,</li>
                
                <li><a href="#M007339">gets</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M007362">isatty</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M007367">length</a>,</li>
                
                <li><a href="#M007305">lineno</a>,</li>
                
                <li><a href="#M007306">lineno=</a>,</li>
                
                <li><a href="#M007329">lines</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M006096">new</a>,</li>
                
                <li><a href="#M007300">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M007299">open</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M007326">path</a>,</li>
                
                <li><a href="#M007364">pid</a>,</li>
                
                <li><a href="#M006097">pos</a>,</li>
                
                <li><a href="#M007319">pos</a>,</li>
                
                <li><a href="#M007320">pos=</a>,</li>
                
                <li><a href="#M007346">print</a>,</li>
                
                <li><a href="#M007358">printf</a>,</li>
                
                <li><a href="#M007359">putc</a>,</li>
                
                <li><a href="#M007360">puts</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M007342">read</a>,</li>
                
                <li><a href="#M007338">readbyte</a>,</li>
                
                <li><a href="#M007337">readchar</a>,</li>
                
                <li><a href="#M006100">readline</a>,</li>
                
                <li><a href="#M007340">readline</a>,</li>
                
                <li><a href="#M007341">readlines</a>,</li>
                
                <li><a href="#M007302">reopen</a>,</li>
                
                <li><a href="#M007321">rewind</a>,</li>
                
                <li><a href="#M006101">rewind</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M006102">seek</a>,</li>
                
                <li><a href="#M007322">seek</a>,</li>
                
                <li><a href="#M007366">size</a>,</li>
                
                <li><a href="#M007303">string</a>,</li>
                
                <li><a href="#M007304">string=</a>,</li>
                
                <li><a href="#M007323">sync</a>,</li>
                
                <li><a href="#M007324">sync=</a>,</li>
                
                <li><a href="#M007343">sysread</a>,</li>
                
                <li><a href="#M007361">syswrite</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M007325">tell</a>,</li>
                
                <li><a href="#M007368">truncate</a>,</li>
                
                <li><a href="#M007363">tty?</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M007336">ungetc</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M007344">write</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="Marshal.html">Marshal</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M006096">
                    
                    <a name="M006096"></a><b>new</b>(string=&quot;&quot;)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006096_source')" id="l_M006096_source">show</a>
                        
                    </p>
                    <div id="M006096_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 9</span>
 9:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">string</span>=<span class="ruby-value str">&quot;&quot;</span>)
10:             <span class="ruby-ivar">@string</span>=<span class="ruby-identifier">string</span>
11:             <span class="ruby-ivar">@pos</span>=<span class="ruby-value">0</span>
12:             <span class="ruby-ivar">@eof</span>=(<span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>)
13:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007300">
                    
                    <a name="M007300"></a><b> StringIO.new(string=""[, mode])
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates new <a href="StringIO.html">StringIO</a> instance from with
<em>string</em> and <em>mode</em>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007300_source')" id="l_M007300_source">show</a>
                        
                    </p>
                    <div id="M007300_source" class="dyn-source">
                        <pre>static VALUE
strio_initialize(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = check_strio(self);

    if (!ptr) {
        DATA_PTR(self) = ptr = strio_alloc();
    }
    rb_call_super(0, 0);
    strio_init(argc, argv, ptr);
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007299">
                    
                    <a name="M007299"></a><b> StringIO.open(string=""[, mode]) {|strio| ...}
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Equivalent to <a href="StringIO.html#M006096">StringIO.new</a> except that
when it is called with a block, it yields with the new instance and closes
it, and returns the result which returned from the block.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007299_source')" id="l_M007299_source">show</a>
                        
                    </p>
                    <div id="M007299_source" class="dyn-source">
                        <pre>static VALUE
strio_s_open(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    VALUE obj = rb_class_new_instance(argc, argv, klass);
    if (!rb_block_given_p()) return obj;
    return rb_ensure(rb_yield, obj, strio_finalize, obj);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M007345">
                    
                    <a name="M007345"></a><b>strio << obj     &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See IO#<<.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007345_source')" id="l_M007345_source">show</a>
                        
                    </p>
                    <div id="M007345_source" class="dyn-source">
                        <pre>#define strio_addstr rb_io_addstr</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007307">
                    
                    <a name="M007307"></a><b> strio.binmode &rarr; true </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <b>strio</b> itself. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007307_source')" id="l_M007307_source">show</a>
                        
                    </p>
                    <div id="M007307_source" class="dyn-source">
                        <pre>#define strio_binmode strio_self</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007331">
                    
                    <a name="M007331"></a><b>strio.each_byte {|byte| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000528">IO#each_byte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007331_source')" id="l_M007331_source">show</a>
                        
                    </p>
                    <div id="M007331_source" class="dyn-source">
                        <pre>static VALUE
strio_each_byte(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));

    RETURN_ENUMERATOR(self, 0, 0);

    while (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) {
        char c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
        rb_yield(CHR2FIX(c));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007333">
                    
                    <a name="M007333"></a><b>strio.each_char {|char| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000529">IO#each_char</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007333_source')" id="l_M007333_source">show</a>
                        
                    </p>
                    <div id="M007333_source" class="dyn-source">
                        <pre>static VALUE
strio_each_char(self)
    VALUE self;
{
    struct StringIO *sio;
    VALUE str;
    const char *ptr;
    size_t len;

    RETURN_ENUMERATOR(self, 0, 0);

    sio = readable(StringIO(self));
    str = sio-&gt;string;
    ptr = RSTRING_PTR(str);
    len = RSTRING_LEN(str);

    while (sio-&gt;pos &lt; len) {
        int pos = sio-&gt;pos;
        char c = ptr[pos];
        int n = mbclen(c);

        if (len &lt; pos + n) n = len - pos;

        sio-&gt;pos += n;
        rb_yield(rb_str_substr(str, pos, n));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007308">
                    
                    <a name="M007308"></a><b>strio.close  &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes strio. The <b>strio</b> is unavailable for any further data
operations; an <tt>IOError</tt> is raised if such an attempt is made.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007308_source')" id="l_M007308_source">show</a>
                        
                    </p>
                    <div id="M007308_source" class="dyn-source">
                        <pre>static VALUE
strio_close(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007309">
                    
                    <a name="M007309"></a><b>strio.close_read    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes the read end of a <a href="StringIO.html">StringIO</a>. Will raise
an <tt>IOError</tt> if the <b>strio</b> is not readable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007309_source')" id="l_M007309_source">show</a>
                        
                    </p>
                    <div id="M007309_source" class="dyn-source">
                        <pre>static VALUE
strio_close_read(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!READABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_READABLE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007310">
                    
                    <a name="M007310"></a><b>strio.close_write    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes the write end of a <a href="StringIO.html">StringIO</a>. Will raise
an <tt>IOError</tt> if the <b>strio</b> is not writeable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007310_source')" id="l_M007310_source">show</a>
                        
                    </p>
                    <div id="M007310_source" class="dyn-source">
                        <pre>static VALUE
strio_close_write(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!WRITABLE(ptr)) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }
    ptr-&gt;flags &amp;= ~FMODE_WRITABLE;
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007311">
                    
                    <a name="M007311"></a><b>strio.closed?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is completely closed, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007311_source')" id="l_M007311_source">show</a>
                        
                    </p>
                    <div id="M007311_source" class="dyn-source">
                        <pre>static VALUE
strio_closed(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (!CLOSED(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007312">
                    
                    <a name="M007312"></a><b>strio.closed_read?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is not readable, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007312_source')" id="l_M007312_source">show</a>
                        
                    </p>
                    <div id="M007312_source" class="dyn-source">
                        <pre>static VALUE
strio_closed_read(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (READABLE(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007313">
                    
                    <a name="M007313"></a><b>strio.closed_write?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <b>strio</b> is not writable, <tt>false</tt>
otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007313_source')" id="l_M007313_source">show</a>
                        
                    </p>
                    <div id="M007313_source" class="dyn-source">
                        <pre>static VALUE
strio_closed_write(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    if (WRITABLE(ptr)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007327">
                    
                    <a name="M007327"></a><b>strio.each(sep_string=$/)      {|line| block }  &rarr; strio
strio.each_line(sep_string=$/) {|line| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000526">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007327_source')" id="l_M007327_source">show</a>
                        
                    </p>
                    <div id="M007327_source" class="dyn-source">
                        <pre>static VALUE
strio_each(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007330">
                    
                    <a name="M007330"></a><b>strio.each_byte {|byte| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000528">IO#each_byte</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007330_source')" id="l_M007330_source">show</a>
                        
                    </p>
                    <div id="M007330_source" class="dyn-source">
                        <pre>static VALUE
strio_each_byte(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));

    RETURN_ENUMERATOR(self, 0, 0);

    while (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) {
        char c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
        rb_yield(CHR2FIX(c));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007332">
                    
                    <a name="M007332"></a><b>strio.each_char {|char| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000529">IO#each_char</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007332_source')" id="l_M007332_source">show</a>
                        
                    </p>
                    <div id="M007332_source" class="dyn-source">
                        <pre>static VALUE
strio_each_char(self)
    VALUE self;
{
    struct StringIO *sio;
    VALUE str;
    const char *ptr;
    size_t len;

    RETURN_ENUMERATOR(self, 0, 0);

    sio = readable(StringIO(self));
    str = sio-&gt;string;
    ptr = RSTRING_PTR(str);
    len = RSTRING_LEN(str);

    while (sio-&gt;pos &lt; len) {
        int pos = sio-&gt;pos;
        char c = ptr[pos];
        int n = mbclen(c);

        if (len &lt; pos + n) n = len - pos;

        sio-&gt;pos += n;
        rb_yield(rb_str_substr(str, pos, n));
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007328">
                    
                    <a name="M007328"></a><b>strio.each(sep_string=$/)      {|line| block }  &rarr; strio
strio.each_line(sep_string=$/) {|line| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000526">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007328_source')" id="l_M007328_source">show</a>
                        
                    </p>
                    <div id="M007328_source" class="dyn-source">
                        <pre>static VALUE
strio_each(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007314">
                    
                    <a name="M007314"></a><b>strio.eof     &rarr; true or false
strio.eof?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007314_source')" id="l_M007314_source">show</a>
                        
                    </p>
                    <div id="M007314_source" class="dyn-source">
                        <pre>static VALUE
strio_eof(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING(ptr-&gt;string)-&gt;len) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006098">
                    
                    <a name="M006098"></a><b>eof</b>()
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="StringIO.html#M006099">eof?</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006098_source')" id="l_M006098_source">show</a>
                        
                    </p>
                    <div id="M006098_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 17</span>
17:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eof</span>
18:             <span class="ruby-ivar">@eof</span>
19:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006099">
                    
                    <a name="M006099"></a><b>eof?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="StringIO.html#M006098">eof</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M007315">
                    
                    <a name="M007315"></a><b>strio.eof     &rarr; true or false
strio.eof?    &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if <b>strio</b> is at end of file. The stringio must be opened
for reading or an <tt>IOError</tt> will be raised.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007315_source')" id="l_M007315_source">show</a>
                        
                    </p>
                    <div id="M007315_source" class="dyn-source">
                        <pre>static VALUE
strio_eof(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    if (ptr-&gt;pos &lt; RSTRING(ptr-&gt;string)-&gt;len) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007316">
                    
                    <a name="M007316"></a><b> strio.fcntl </b>
                    
                </div>
                
                <div class="description">
                  <p>
Raises <a href="NotImplementedError.html">NotImplementedError</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007316_source')" id="l_M007316_source">show</a>
                        
                    </p>
                    <div id="M007316_source" class="dyn-source">
                        <pre>#define strio_fcntl strio_unimpl</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007365">
                    
                    <a name="M007365"></a><b> strio.fileno &rarr; nil </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>nil</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007365_source')" id="l_M007365_source">show</a>
                        
                    </p>
                    <div id="M007365_source" class="dyn-source">
                        <pre>#define strio_fileno strio_nil</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007317">
                    
                    <a name="M007317"></a><b> strio.flush &rarr; strio </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <b>strio</b> itself. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007317_source')" id="l_M007317_source">show</a>
                        
                    </p>
                    <div id="M007317_source" class="dyn-source">
                        <pre>#define strio_flush strio_self</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007318">
                    
                    <a name="M007318"></a><b> strio.fsync &rarr; 0 </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns 0. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007318_source')" id="l_M007318_source">show</a>
                        
                    </p>
                    <div id="M007318_source" class="dyn-source">
                        <pre>#define strio_fsync strio_0</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007335">
                    
                    <a name="M007335"></a><b>strio.getc   &rarr; fixnum or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000552">IO#getc</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007335_source')" id="l_M007335_source">show</a>
                        
                    </p>
                    <div id="M007335_source" class="dyn-source">
                        <pre>static VALUE
strio_getc(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    int c;
    if (ptr-&gt;pos &gt;= RSTRING(ptr-&gt;string)-&gt;len) {
        ptr-&gt;flags |= STRIO_EOF;
        return Qnil;
    }
    c = RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++];
    return CHR2FIX(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007334">
                    
                    <a name="M007334"></a><b>strio.getc   &rarr; fixnum or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000552">IO#getc</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007334_source')" id="l_M007334_source">show</a>
                        
                    </p>
                    <div id="M007334_source" class="dyn-source">
                        <pre>static VALUE
strio_getc(self)
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    int c;
    if (ptr-&gt;pos &gt;= RSTRING(ptr-&gt;string)-&gt;len) {
        ptr-&gt;flags |= STRIO_EOF;
        return Qnil;
    }
    c = RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++];
    return CHR2FIX(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007339">
                    
                    <a name="M007339"></a><b>strio.gets(sep_string=$/)   &rarr; string or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000550">IO#gets</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007339_source')" id="l_M007339_source">show</a>
                        
                    </p>
                    <div id="M007339_source" class="dyn-source">
                        <pre>static VALUE
strio_gets(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE str = strio_getline(argc, argv, readable(StringIO(self)));

    rb_lastline_set(str);
    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007362">
                    
                    <a name="M007362"></a><b>strio.isatty &rarr; nil
strio.tty? &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>false</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007362_source')" id="l_M007362_source">show</a>
                        
                    </p>
                    <div id="M007362_source" class="dyn-source">
                        <pre>#define strio_isatty strio_false</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007367">
                    
                    <a name="M007367"></a><b>strio.size   &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the buffer string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007367_source')" id="l_M007367_source">show</a>
                        
                    </p>
                    <div id="M007367_source" class="dyn-source">
                        <pre>static VALUE
strio_size(self)
    VALUE self;
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING(string)-&gt;len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007305">
                    
                    <a name="M007305"></a><b>strio.lineno    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current line number in <b>strio</b>. The stringio must be
opened for reading. <tt>lineno</tt> counts the number of times
<tt>gets</tt> is called, rather than the number of newlines encountered.
The two values will differ if <tt>gets</tt> is called with a separator
other than newline. See also the <tt>$.</tt> variable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007305_source')" id="l_M007305_source">show</a>
                        
                    </p>
                    <div id="M007305_source" class="dyn-source">
                        <pre>static VALUE
strio_get_lineno(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;lineno);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007306">
                    
                    <a name="M007306"></a><b>strio.lineno = integer    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Manually sets the current line number to the given value. <tt>$.</tt> is
updated only on the next read.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007306_source')" id="l_M007306_source">show</a>
                        
                    </p>
                    <div id="M007306_source" class="dyn-source">
                        <pre>static VALUE
strio_set_lineno(self, lineno)
    VALUE self, lineno;
{
    StringIO(self)-&gt;lineno = NUM2LONG(lineno);
    return lineno;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007329">
                    
                    <a name="M007329"></a><b>strio.each(sep_string=$/)      {|line| block }  &rarr; strio
strio.each_line(sep_string=$/) {|line| block }  &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000526">IO#each</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007329_source')" id="l_M007329_source">show</a>
                        
                    </p>
                    <div id="M007329_source" class="dyn-source">
                        <pre>static VALUE
strio_each(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE line;

    RETURN_ENUMERATOR(self, argc, argv);

    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_yield(line);
    }
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007326">
                    
                    <a name="M007326"></a><b> strio.path &rarr; nil </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>nil</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007326_source')" id="l_M007326_source">show</a>
                        
                    </p>
                    <div id="M007326_source" class="dyn-source">
                        <pre>#define strio_path strio_nil</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007364">
                    
                    <a name="M007364"></a><b> strio.pid &rarr; nil </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>nil</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007364_source')" id="l_M007364_source">show</a>
                        
                    </p>
                    <div id="M007364_source" class="dyn-source">
                        <pre>#define strio_pid strio_nil</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006097">
                    
                    <a name="M006097"></a><b>pos</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006097_source')" id="l_M006097_source">show</a>
                        
                    </p>
                    <div id="M006097_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pos</span>
15:             <span class="ruby-ivar">@pos</span>
16:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007319">
                    
                    <a name="M007319"></a><b>strio.pos     &rarr; integer
strio.tell    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007319_source')" id="l_M007319_source">show</a>
                        
                    </p>
                    <div id="M007319_source" class="dyn-source">
                        <pre>static VALUE
strio_get_pos(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007320">
                    
                    <a name="M007320"></a><b>strio.pos = integer    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Seeks to the given position (in bytes) in <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007320_source')" id="l_M007320_source">show</a>
                        
                    </p>
                    <div id="M007320_source" class="dyn-source">
                        <pre>static VALUE
strio_set_pos(self, pos)
    VALUE self;
    VALUE pos;
{
    struct StringIO *ptr = StringIO(self);
    long p = NUM2LONG(pos);
    if (p &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = p;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return pos;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007346">
                    
                    <a name="M007346"></a><b>strio.print()             &rarr; nil
strio.print(obj, ...)     &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000522">IO#print</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007346_source')" id="l_M007346_source">show</a>
                        
                    </p>
                    <div id="M007346_source" class="dyn-source">
                        <pre>#define strio_print rb_io_print</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007358">
                    
                    <a name="M007358"></a><b>strio.printf(format_string [, obj, ...] )   &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000525">IO#printf</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007358_source')" id="l_M007358_source">show</a>
                        
                    </p>
                    <div id="M007358_source" class="dyn-source">
                        <pre>#define strio_printf rb_io_printf</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007359">
                    
                    <a name="M007359"></a><b>strio.putc(obj)    &rarr; obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000523">IO#putc</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007359_source')" id="l_M007359_source">show</a>
                        
                    </p>
                    <div id="M007359_source" class="dyn-source">
                        <pre>static VALUE
strio_putc(self, ch)
    VALUE self, ch;
{
    struct StringIO *ptr = writable(StringIO(self));
    int c = NUM2CHR(ch);
    long olen;

    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    strio_extend(ptr, ptr-&gt;pos, 1);
    RSTRING(ptr-&gt;string)-&gt;ptr[ptr-&gt;pos++] = c;
    OBJ_INFECT(ptr-&gt;string, self);
    return ch;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007360">
                    
                    <a name="M007360"></a><b>strio.puts(obj, ...)    &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000524">IO#puts</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007360_source')" id="l_M007360_source">show</a>
                        
                    </p>
                    <div id="M007360_source" class="dyn-source">
                        <pre>#define strio_puts rb_io_puts</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007342">
                    
                    <a name="M007342"></a><b>strio.read([length [, buffer]])    &rarr; string, buffer, or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000516">IO#read</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007342_source')" id="l_M007342_source">show</a>
                        
                    </p>
                    <div id="M007342_source" class="dyn-source">
                        <pre>static VALUE
strio_read(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = readable(StringIO(self));
    VALUE str = Qnil;
    long len, olen;

    switch (argc) {
      case 2:
        str = argv[1];
        StringValue(str);
        rb_str_modify(str);
      case 1:
        if (!NIL_P(argv[0])) {
            len = olen = NUM2LONG(argv[0]);
            if (len &lt; 0) {
                rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
            }
            if (len &gt; 0 &amp;&amp; ptr-&gt;pos &gt;= RSTRING(ptr-&gt;string)-&gt;len) {
                ptr-&gt;flags |= STRIO_EOF;
                if (!NIL_P(str)) rb_str_resize(str, 0);
                return Qnil;
            }
            else if (ptr-&gt;flags &amp; STRIO_EOF) {
                if (!NIL_P(str)) rb_str_resize(str, 0);
                return Qnil;
            }
            break;
        }
        /* fall through */
      case 0:
        olen = -1;
        len = RSTRING(ptr-&gt;string)-&gt;len;
        if (len &lt;= ptr-&gt;pos) {
            ptr-&gt;flags |= STRIO_EOF;
            if (NIL_P(str)) {
                str = rb_str_new(0, 0);
            }
            else {
                rb_str_resize(str, 0);
            }
            return str;
        }
        else {
            len -= ptr-&gt;pos;
        }
        break;
      default:
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 0)&quot;, argc);
    }
    if (NIL_P(str)) {
        str = rb_str_substr(ptr-&gt;string, ptr-&gt;pos, len);
    }
    else {
        long rest = RSTRING(ptr-&gt;string)-&gt;len - ptr-&gt;pos;
        if (len &gt; rest) len = rest;
        rb_str_resize(str, len);
        MEMCPY(RSTRING(str)-&gt;ptr, RSTRING(ptr-&gt;string)-&gt;ptr + ptr-&gt;pos, char, len);
    }
    if (NIL_P(str)) {
        if (!(ptr-&gt;flags &amp; STRIO_EOF)) str = rb_str_new(0, 0);
        len = 0;
    }
    else {
        ptr-&gt;pos += len = RSTRING(str)-&gt;len;
    }
    if (olen &lt; 0 || olen &gt; len) ptr-&gt;flags |= STRIO_EOF;
    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007338">
                    
                    <a name="M007338"></a><b>strio.readchar   &rarr; fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000554">IO#readchar</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007338_source')" id="l_M007338_source">show</a>
                        
                    </p>
                    <div id="M007338_source" class="dyn-source">
                        <pre>static VALUE
strio_readchar(self)
    VALUE self;
{
    VALUE c = strio_getc(self);
    if (NIL_P(c)) rb_eof_error();
    return c;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007337">
                    
                    <a name="M007337"></a><b>strio.readchar   &rarr; fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000554">IO#readchar</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007337_source')" id="l_M007337_source">show</a>
                        
                    </p>
                    <div id="M007337_source" class="dyn-source">
                        <pre>static VALUE
strio_readchar(self)
    VALUE self;
{
    VALUE c = strio_getc(self);
    if (NIL_P(c)) rb_eof_error();
    return c;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007340">
                    
                    <a name="M007340"></a><b>strio.readline(sep_string=$/)   &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000551">IO#readline</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007340_source')" id="l_M007340_source">show</a>
                        
                    </p>
                    <div id="M007340_source" class="dyn-source">
                        <pre>static VALUE
strio_readline(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE line = strio_gets(argc, argv, self);
    if (NIL_P(line)) rb_eof_error();
    return line;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006100">
                    
                    <a name="M006100"></a><b>readline</b>(rs=$/)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006100_source')" id="l_M006100_source">show</a>
                        
                    </p>
                    <div id="M006100_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 21</span>
21:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">rs</span>=<span class="ruby-identifier">$/</span>)
22:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@eof</span>
23:                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">EOFError</span>
24:             <span class="ruby-keyword kw">else</span>
25:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]<span class="ruby-operator">=~</span><span class="ruby-identifier">rs</span>
26:                     <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span>,<span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>]
27:                 <span class="ruby-keyword kw">else</span>
28:                     <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@string</span>[<span class="ruby-ivar">@pos</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
29:                 <span class="ruby-keyword kw">end</span>
30:                 <span class="ruby-ivar">@pos</span><span class="ruby-operator">+=</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">size</span>
31:                 <span class="ruby-ivar">@eof</span> =<span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@pos</span><span class="ruby-operator">==</span><span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span>
32:                 <span class="ruby-identifier">$_</span> = <span class="ruby-identifier">line</span>
33:             <span class="ruby-keyword kw">end</span>
34:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007341">
                    
                    <a name="M007341"></a><b>strio.readlines(sep_string=$/)  &rarr;   array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
See <a href="IO.html#M000515">IO#readlines</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007341_source')" id="l_M007341_source">show</a>
                        
                    </p>
                    <div id="M007341_source" class="dyn-source">
                        <pre>static VALUE
strio_readlines(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    VALUE ary = rb_ary_new(), line;
    while (!NIL_P(line = strio_getline(argc, argv, readable(ptr)))) {
        rb_ary_push(ary, line);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007302">
                    
                    <a name="M007302"></a><b>strio.reopen(other_StrIO)     &rarr; strio
strio.reopen(string, mode)    &rarr; strio
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Reinitializes <b>strio</b> with the given <em>other_StrIO</em> or
<em>string</em> and <em>mode</em> (see <a
href="StringIO.html#M006096">StringIO#new</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007302_source')" id="l_M007302_source">show</a>
                        
                    </p>
                    <div id="M007302_source" class="dyn-source">
                        <pre>static VALUE
strio_reopen(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    if (!OBJ_TAINTED(self)) rb_secure(4);
    if (argc == 1 &amp;&amp; TYPE(*argv) != T_STRING) {
        return strio_copy(self, *argv);
    }
    strio_init(argc, argv, StringIO(self));
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007321">
                    
                    <a name="M007321"></a><b>strio.rewind    &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Positions <b>strio</b> to the beginning of input, resetting <tt>lineno</tt>
to zero.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007321_source')" id="l_M007321_source">show</a>
                        
                    </p>
                    <div id="M007321_source" class="dyn-source">
                        <pre>static VALUE
strio_rewind(self)
    VALUE self;
{
    struct StringIO *ptr = StringIO(self);
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return INT2FIX(0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006101">
                    
                    <a name="M006101"></a><b>rewind</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006101_source')" id="l_M006101_source">show</a>
                        
                    </p>
                    <div id="M006101_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 35</span>
35:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rewind</span>
36:             <span class="ruby-identifier">seek</span>(<span class="ruby-value">0</span>,<span class="ruby-value">0</span>)
37:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006102">
                    
                    <a name="M006102"></a><b>seek</b>(offset,whence)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006102_source')" id="l_M006102_source">show</a>
                        
                    </p>
                    <div id="M006102_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/yaml/stringio.rb, line 38</span>
38:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">seek</span>(<span class="ruby-identifier">offset</span>,<span class="ruby-identifier">whence</span>)
39:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">whence</span>
40:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span>
41:                 <span class="ruby-ivar">@pos</span>=<span class="ruby-identifier">offset</span>
42:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>
43:                 <span class="ruby-ivar">@pos</span><span class="ruby-operator">+=</span><span class="ruby-identifier">offset</span>
44:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>
45:                 <span class="ruby-ivar">@pos</span>=<span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">+</span><span class="ruby-identifier">offset</span>
46:             <span class="ruby-keyword kw">end</span>
47:             <span class="ruby-ivar">@eof</span>=(<span class="ruby-ivar">@pos</span><span class="ruby-operator">&gt;=</span><span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span>)
48:             <span class="ruby-value">0</span>
49:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007322">
                    
                    <a name="M007322"></a><b>strio.seek(amount, whence=SEEK_SET) &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Seeks to a given offset <em>amount</em> in the stream according to the
value of <em>whence</em> (see <a href="IO.html#M000560">IO#seek</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007322_source')" id="l_M007322_source">show</a>
                        
                    </p>
                    <div id="M007322_source" class="dyn-source">
                        <pre>static VALUE
strio_seek(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE whence;
    struct StringIO *ptr = StringIO(self);
    long offset;

    rb_scan_args(argc, argv, &quot;11&quot;, NULL, &amp;whence);
    offset = NUM2LONG(argv[0]);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    switch (NIL_P(whence) ? 0 : NUM2LONG(whence)) {
      case 0:
        break;
      case 1:
        offset += ptr-&gt;pos;
        break;
      case 2:
        offset += RSTRING(ptr-&gt;string)-&gt;len;
        break;
      default:
        error_inval(&quot;invalid whence&quot;);
    }
    if (offset &lt; 0) {
        error_inval(0);
    }
    ptr-&gt;pos = offset;
    ptr-&gt;flags &amp;= ~STRIO_EOF;
    return INT2FIX(0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007366">
                    
                    <a name="M007366"></a><b>strio.size   &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the buffer string.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007366_source')" id="l_M007366_source">show</a>
                        
                    </p>
                    <div id="M007366_source" class="dyn-source">
                        <pre>static VALUE
strio_size(self)
    VALUE self;
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
        rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING(string)-&gt;len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007303">
                    
                    <a name="M007303"></a><b> strio.string     &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns underlying <a href="String.html">String</a> object, the subject of
<a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007303_source')" id="l_M007303_source">show</a>
                        
                    </p>
                    <div id="M007303_source" class="dyn-source">
                        <pre>static VALUE
strio_get_string(self)
    VALUE self;
{
    return StringIO(self)-&gt;string;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007304">
                    
                    <a name="M007304"></a><b>strio.string = string  &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Changes underlying <a href="String.html">String</a> object, the subject of
<a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007304_source')" id="l_M007304_source">show</a>
                        
                    </p>
                    <div id="M007304_source" class="dyn-source">
                        <pre>static VALUE
strio_set_string(self, string)
    VALUE self, string;
{
    struct StringIO *ptr = StringIO(self);

    if (!OBJ_TAINTED(self)) rb_secure(4);
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    StringValue(string);
    ptr-&gt;flags = OBJ_FROZEN(string) ? FMODE_READABLE : FMODE_READWRITE;
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return ptr-&gt;string = string;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007323">
                    
                    <a name="M007323"></a><b>strio.sync    &rarr; true
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> always.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007323_source')" id="l_M007323_source">show</a>
                        
                    </p>
                    <div id="M007323_source" class="dyn-source">
                        <pre>static VALUE
strio_get_sync(self)
    VALUE self;
{
    StringIO(self);
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007324">
                    
                    <a name="M007324"></a><b> strio.sync = boolean &rarr; boolean </b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the argument unchanged. Just for compatibility to <a
href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007324_source')" id="l_M007324_source">show</a>
                        
                    </p>
                    <div id="M007324_source" class="dyn-source">
                        <pre>#define strio_set_sync strio_first</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007343">
                    
                    <a name="M007343"></a><b>strio.sysread(integer[, outbuf])    &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Similar to <a href="StringIO.html#M007342">read</a>, but raises
<tt>EOFError</tt> at end of string instead of returning <tt>nil</tt>, as
well as <a href="IO.html#M000536">IO#sysread</a> does.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007343_source')" id="l_M007343_source">show</a>
                        
                    </p>
                    <div id="M007343_source" class="dyn-source">
                        <pre>static VALUE
strio_sysread(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE val = strio_read(argc, argv, self);
    if (NIL_P(val) || RSTRING(val)-&gt;len == 0) {
        rb_eof_error();
    }
    return val;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007361">
                    
                    <a name="M007361"></a><b>strio.write(string)    &rarr; integer
strio.syswrite(string) &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the given string to the underlying buffer string of <b>strio</b>.
The stream must be opened for writing. If the argument is not a string, it
will be converted to a string using <tt>to_s</tt>. Returns the number of
bytes written. See <a href="IO.html#M000549">IO#write</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007361_source')" id="l_M007361_source">show</a>
                        
                    </p>
                    <div id="M007361_source" class="dyn-source">
                        <pre>static VALUE
strio_write(self, str)
    VALUE self, str;
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;

    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    len = RSTRING(str)-&gt;len;
    if (!len) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING(str)-&gt;ptr, len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        rb_str_update(ptr-&gt;string, ptr-&gt;pos, len, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007325">
                    
                    <a name="M007325"></a><b>strio.pos     &rarr; integer
strio.tell    &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current offset (in bytes) of <b>strio</b>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007325_source')" id="l_M007325_source">show</a>
                        
                    </p>
                    <div id="M007325_source" class="dyn-source">
                        <pre>static VALUE
strio_get_pos(self)
    VALUE self;
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007368">
                    
                    <a name="M007368"></a><b>strio.truncate(integer)    &rarr; 0
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Truncates the buffer string to at most <em>integer</em> bytes. The
<b>strio</b> must be opened for writing.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007368_source')" id="l_M007368_source">show</a>
                        
                    </p>
                    <div id="M007368_source" class="dyn-source">
                        <pre>static VALUE
strio_truncate(self, len)
    VALUE self, len;
{
    VALUE string = writable(StringIO(self))-&gt;string;
    long l = NUM2LONG(len);
    long plen = RSTRING(string)-&gt;len;
    if (l &lt; 0) {
        error_inval(&quot;negative legnth&quot;);
    }
    rb_str_resize(string, l);
    if (plen &lt; l) {
        MEMZERO(RSTRING(string)-&gt;ptr + plen, char, l - plen);
    }
    return len;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007363">
                    
                    <a name="M007363"></a><b>strio.isatty &rarr; nil
strio.tty? &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>false</tt>. Just for compatibility to <a href="IO.html">IO</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007363_source')" id="l_M007363_source">show</a>
                        
                    </p>
                    <div id="M007363_source" class="dyn-source">
                        <pre>#define strio_isatty strio_false</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007336">
                    
                    <a name="M007336"></a><b>strio.ungetc(integer)   &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Pushes back one character (passed as a parameter) onto <b>strio</b> such
that a subsequent buffered read will return it. Pushing back behind the
beginning of the buffer string is not possible. Nothing will be done if
such an attempt is made. In other case, there is no limitation for multiple
pushbacks.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007336_source')" id="l_M007336_source">show</a>
                        
                    </p>
                    <div id="M007336_source" class="dyn-source">
                        <pre>static VALUE
strio_ungetc(self, ch)
    VALUE self, ch;
{
    struct StringIO *ptr = readable(StringIO(self));
    int cc = NUM2INT(ch);
    long len, pos = ptr-&gt;pos;

    if (cc != EOF) {
        len = RSTRING(ptr-&gt;string)-&gt;len;
        if (pos == 0) {
            char *p;
            rb_str_resize(ptr-&gt;string, len + 1);
            p = RSTRING(ptr-&gt;string)-&gt;ptr;
            memmove(p + 1, p, len);
        }
        else {
            if (len &lt; pos-- ||
                (unsigned char)RSTRING(ptr-&gt;string)-&gt;ptr[pos] !=
                (unsigned char)cc) {
                strio_extend(ptr, pos, 1);
            }
            --ptr-&gt;pos;
        }
        RSTRING(ptr-&gt;string)-&gt;ptr[pos] = cc;
        OBJ_INFECT(ptr-&gt;string, self);
        ptr-&gt;flags &amp;= ~STRIO_EOF;
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007344">
                    
                    <a name="M007344"></a><b>strio.write(string)    &rarr; integer
strio.syswrite(string) &rarr; integer
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the given string to the underlying buffer string of <b>strio</b>.
The stream must be opened for writing. If the argument is not a string, it
will be converted to a string using <tt>to_s</tt>. Returns the number of
bytes written. See <a href="IO.html#M000549">IO#write</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007344_source')" id="l_M007344_source">show</a>
                        
                    </p>
                    <div id="M007344_source" class="dyn-source">
                        <pre>static VALUE
strio_write(self, str)
    VALUE self, str;
{
    struct StringIO *ptr = writable(StringIO(self));
    long len, olen;

    if (TYPE(str) != T_STRING)
        str = rb_obj_as_string(str);
    len = RSTRING(str)-&gt;len;
    if (!len) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING(ptr-&gt;string)-&gt;len;
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
        ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
        rb_str_cat(ptr-&gt;string, RSTRING(str)-&gt;ptr, len);
    }
    else {
        strio_extend(ptr, ptr-&gt;pos, len);
        rb_str_update(ptr-&gt;string, ptr-&gt;pos, len, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    