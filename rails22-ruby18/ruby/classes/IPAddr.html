<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>IPAddr</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            IPAddr 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/ipaddr_rb.html">lib/ipaddr.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="IPAddr.html">IPAddr</a> provides a set of methods to manipulate an
IP address. Both IPv4 and IPv6 are supported.
</p>
<h2>Example</h2>
<pre>
  require 'ipaddr'

  ipaddr1 = IPAddr.new &quot;3ffe:505:2::1&quot;

  p ipaddr1                   #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&gt;

  p ipaddr1.to_s              #=&gt; &quot;3ffe:505:2::1&quot;

  ipaddr2 = ipaddr1.mask(48)  #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0000/ffff:ffff:ffff:0000:0000:0000:0000:0000&gt;

  p ipaddr2.to_s              #=&gt; &quot;3ffe:505:2::&quot;

  ipaddr3 = IPAddr.new &quot;192.168.2.0/24&quot;

  p ipaddr3                   #=&gt; #&lt;IPAddr: IPv4:192.168.2.0/255.255.255.0&gt;
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M001570">&</a>,</li>
                
                <li><a href="#M001573"><<</a>,</li>
                
                <li><a href="#M001594"><=></a>,</li>
                
                <li><a href="#M001575">==</a>,</li>
                
                <li><a href="#M001578">===</a>,</li>
                
                <li><a href="#M001572">>></a>,</li>
                
                <li><a href="#M001654">_reverse</a>,</li>
                
                <li><a href="#M001655">_to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001653">addr_mask</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M001644">coerce_other</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M001582">hton</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M001652">in6_addr</a>,</li>
                
                <li><a href="#M001645">in_addr</a>,</li>
                
                <li><a href="#M001577">include?</a>,</li>
                
                <li><a href="#M001640">inspect</a>,</li>
                
                <li><a href="#M001591">ip6_arpa</a>,</li>
                
                <li><a href="#M001592">ip6_int</a>,</li>
                
                <li><a href="#M001583">ipv4?</a>,</li>
                
                <li><a href="#M001588">ipv4_compat</a>,</li>
                
                <li><a href="#M001586">ipv4_compat?</a>,</li>
                
                <li><a href="#M001587">ipv4_mapped</a>,</li>
                
                <li><a href="#M001585">ipv4_mapped?</a>,</li>
                
                <li><a href="#M001584">ipv6?</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M001576">mask</a>,</li>
                
                <li><a href="#M001642">mask!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M001589">native</a>,</li>
                
                <li><a href="#M001643">new</a>,</li>
                
                <li><a href="#M001568">new_ntoh</a>,</li>
                
                <li><a href="#M001569">ntop</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M001590">reverse</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M001641">set</a>,</li>
                
                <li><a href="#M001593">succ</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M001579">to_i</a>,</li>
                
                <li><a href="#M001639">to_range</a>,</li>
                
                <li><a href="#M001580">to_s</a>,</li>
                
                <li><a href="#M001581">to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M001571">|</a>,</li>
                
                <li><a href="#M001574">~</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="Marshal.html">Marshal</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">IN4MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffff</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffffffffffffffffffffffffffff</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6FORMAT</td>
            <td>=</td>
            <td class="attr-value">([&quot;%.4x&quot;] * 8).join(':')</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>family</td>
            <td class='attr-desc'><p>
Returns the address family of this IP address.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M001643">
                    
                    <a name="M001643"></a><b>new</b>(addr = '::', family = Socket::AF_UNSPEC)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr object either from a human readable IP address
representation in string, or from a packed <a
href="IPAddr.html#M001645">in_addr</a> value followed by an address family.
</p>
<p>
In the former case, the following are the valid formats that will be
recognized: &#8220;address&#8221;, &#8220;address/prefixlen&#8220; and
&#8220;address/mask&#8220;, where IPv6 address may be enclosed in square
brackets (`[&#8217; and `]&#8217;). If a prefixlen or a mask is specified,
it returns a masked IP address. Although the address family is determined
automatically from a specified string, you can specify one explicitly by
the optional second argument.
</p>
<p>
Otherwise an IP addess is generated from a packed <a
href="IPAddr.html#M001645">in_addr</a> value and an address family.
</p>
<p>
The <a href="IPAddr.html">IPAddr</a> class defines many methods and
operators, and some of those, such as &amp;, |, include? and ==, accept a
string, or a packed <a href="IPAddr.html#M001645">in_addr</a> value instead
of an <a href="IPAddr.html">IPAddr</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001643_source')" id="l_M001643_source">show</a>
                        
                    </p>
                    <div id="M001643_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 443</span>
443:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">addr</span> = <span class="ruby-value str">'::'</span>, <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>)
444:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">addr</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
445:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>
446:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
447:         <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">family</span>)
448:         <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
449:         <span class="ruby-keyword kw">return</span>
450:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>
451:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family must be specified&quot;</span>
452:       <span class="ruby-keyword kw">else</span>
453:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unsupported address family: #{family}&quot;</span>
454:       <span class="ruby-keyword kw">end</span>
455:     <span class="ruby-keyword kw">end</span>
456:     <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)
457:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\[(.*)\]$/i</span>
458:       <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
459:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
460:     <span class="ruby-keyword kw">end</span>
461:     <span class="ruby-comment cmt"># It seems AI_NUMERICHOST doesn't do the job.</span>
462:     <span class="ruby-comment cmt">#Socket.getaddrinfo(left, nil, Socket::AF_INET6, Socket::SOCK_STREAM, nil,</span>
463:     <span class="ruby-comment cmt">#                  Socket::AI_NUMERICHOST)</span>
464:     <span class="ruby-keyword kw">begin</span>
465:       <span class="ruby-constant">IPSocket</span>.<span class="ruby-identifier">getaddress</span>(<span class="ruby-identifier">prefix</span>)               <span class="ruby-comment cmt"># test if address is vaild</span>
466:     <span class="ruby-keyword kw">rescue</span>
467:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
468:     <span class="ruby-keyword kw">end</span>
469:     <span class="ruby-ivar">@addr</span> = <span class="ruby-ivar">@family</span> = <span class="ruby-keyword kw">nil</span>
470:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
471:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">prefix</span>)
472:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@addr</span>
473:         <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
474:       <span class="ruby-keyword kw">end</span>
475:     <span class="ruby-keyword kw">end</span>
476:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
477:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">prefix</span>)
478:       <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
479:     <span class="ruby-keyword kw">end</span>
480:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">family</span>
481:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family mismatch&quot;</span>
482:     <span class="ruby-keyword kw">end</span>
483:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span>
484:       <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
485:     <span class="ruby-keyword kw">else</span>
486:       <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
487:     <span class="ruby-keyword kw">end</span>
488:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001568">
                    
                    <a name="M001568"></a><b>new_ntoh</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr containing the given network byte ordered string form
of an IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001568_source')" id="l_M001568_source">show</a>
                        
                    </p>
                    <div id="M001568_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 95</span>
95:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">new_ntoh</span>(<span class="ruby-identifier">addr</span>)
96:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>))
97:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001569">
                    
                    <a name="M001569"></a><b>ntop</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Convert a network byte ordered string form of an IP address into human
readable form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001569_source')" id="l_M001569_source">show</a>
                        
                    </p>
                    <div id="M001569_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>)
102:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">size</span>
103:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">4</span>
104:       <span class="ruby-identifier">s</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'C4'</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
105:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">16</span>
106:       <span class="ruby-identifier">s</span> = <span class="ruby-constant">IN6FORMAT</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'n8'</span>)
107:     <span class="ruby-keyword kw">else</span>
108:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
109:     <span class="ruby-keyword kw">end</span>
110:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>
111:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M001570">
                    
                    <a name="M001570"></a><b>&amp;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise AND.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001570_source')" id="l_M001570_source">show</a>
                        
                    </p>
                    <div id="M001570_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 114</span>
114:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&amp;</span>(<span class="ruby-identifier">other</span>)
115:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
116:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001573">
                    
                    <a name="M001573"></a><b>&lt;&lt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise left shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001573_source')" id="l_M001573_source">show</a>
                        
                    </p>
                    <div id="M001573_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">num</span>)
130:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">num</span>))
131:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001594">
                    
                    <a name="M001594"></a><b>&lt;=&gt;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Compares the ipaddr with another.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001594_source')" id="l_M001594_source">show</a>
                        
                    </p>
                    <div id="M001594_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 325</span>
325:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other</span>)
326:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
327: 
328:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
329: 
330:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
331:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001575">
                    
                    <a name="M001575"></a><b>==</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if two ipaddrs are equal.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001575_source')" id="l_M001575_source">show</a>
                        
                    </p>
                    <div id="M001575_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
140:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
141:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
142:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001578">
                    
                    <a name="M001578"></a><b>===</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="IPAddr.html#M001577">include?</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M001572">
                    
                    <a name="M001572"></a><b>&gt;&gt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise right-shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001572_source')" id="l_M001572_source">show</a>
                        
                    </p>
                    <div id="M001572_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&gt;&gt;</span>(<span class="ruby-identifier">num</span>)
125:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">num</span>)
126:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001582">
                    
                    <a name="M001582"></a><b>hton</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a network byte ordered string form of the IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001582_source')" id="l_M001582_source">show</a>
                        
                    </p>
                    <div id="M001582_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 225</span>
225:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hton</span>
226:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
227:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
228:       <span class="ruby-keyword kw">return</span> [<span class="ruby-ivar">@addr</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'N'</span>)
229:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
230:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">7</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
231:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">112</span> <span class="ruby-operator">-</span> <span class="ruby-value">16</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffff</span>
232:       }.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'n8'</span>)
233:     <span class="ruby-keyword kw">else</span>
234:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001577">
                    
                    <a name="M001577"></a><b>include?</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the given ipaddr is in the range.
</p>
<p>
e.g.:
</p>
<pre>
  require 'ipaddr'
  net1 = IPAddr.new(&quot;192.168.2.0/24&quot;)
  net2 = IPAddr.new(&quot;192.168.2.100&quot;)
  net3 = IPAddr.new(&quot;192.168.3.0&quot;)
  p net1.include?(net2)     #=&gt; true
  p net1.include?(net3)     #=&gt; false
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="IPAddr.html#M001578">===</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001577_source')" id="l_M001577_source">show</a>
                        
                    </p>
                    <div id="M001577_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 159</span>
159:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other</span>)
160:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
161:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4_mapped?</span>
162:       <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0xffffffffffffffffffffffff</span>
163:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
164:       <span class="ruby-keyword kw">end</span>
165:       <span class="ruby-identifier">mask_addr</span> = (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
166:       <span class="ruby-identifier">addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
167:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
168:     <span class="ruby-keyword kw">else</span>
169:       <span class="ruby-identifier">mask_addr</span> = <span class="ruby-ivar">@mask_addr</span>
170:       <span class="ruby-identifier">addr</span> = <span class="ruby-ivar">@addr</span>
171:       <span class="ruby-identifier">family</span> = <span class="ruby-ivar">@family</span>
172:     <span class="ruby-keyword kw">end</span>
173:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ipv4_mapped?</span>
174:       <span class="ruby-identifier">other_addr</span> = (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
175:       <span class="ruby-identifier">other_family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
176:     <span class="ruby-keyword kw">else</span>
177:       <span class="ruby-identifier">other_addr</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
178:       <span class="ruby-identifier">other_family</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span>
179:     <span class="ruby-keyword kw">end</span>
180: 
181:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other_family</span>
182:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
183:     <span class="ruby-keyword kw">end</span>
184:     <span class="ruby-keyword kw">return</span> ((<span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>) <span class="ruby-operator">==</span> (<span class="ruby-identifier">other_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>))
185:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001640">
                    
                    <a name="M001640"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing a human-readable representation of the ipaddr.
(&#8220;#<IPAddr: family:address/mask>&#8221;)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001640_source')" id="l_M001640_source">show</a>
                        
                    </p>
                    <div id="M001640_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 352</span>
352:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
353:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
354:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
355:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv4&quot;</span>
356:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
357:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv6&quot;</span>
358:     <span class="ruby-keyword kw">else</span>
359:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
360:     <span class="ruby-keyword kw">end</span>
361:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;#&lt;%s: %s:%s/%s&gt;&quot;</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>,
362:                    <span class="ruby-identifier">af</span>, <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>), <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@mask_addr</span>))
363:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001591">
                    
                    <a name="M001591"></a><b>ip6_arpa</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC3172.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001591_source')" id="l_M001591_source">show</a>
                        
                    </p>
                    <div id="M001591_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 304</span>
304:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_arpa</span>
305:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
306:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
307:     <span class="ruby-keyword kw">end</span>
308:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.arpa&quot;</span>
309:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001592">
                    
                    <a name="M001592"></a><b>ip6_int</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC1886.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001592_source')" id="l_M001592_source">show</a>
                        
                    </p>
                    <div id="M001592_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 312</span>
312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_int</span>
313:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
314:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
315:     <span class="ruby-keyword kw">end</span>
316:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.int&quot;</span>
317:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001583">
                    
                    <a name="M001583"></a><b>ipv4?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001583_source')" id="l_M001583_source">show</a>
                        
                    </p>
                    <div id="M001583_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 239</span>
239:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4?</span>
240:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
241:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001588">
                    
                    <a name="M001588"></a><b>ipv4_compat</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001588_source')" id="l_M001588_source">show</a>
                        
                    </p>
                    <div id="M001588_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 273</span>
273:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat</span>
274:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
275:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
276:     <span class="ruby-keyword kw">end</span>
277:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
278:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001586">
                    
                    <a name="M001586"></a><b>ipv4_compat?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001586_source')" id="l_M001586_source">show</a>
                        
                    </p>
                    <div id="M001586_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 254</span>
254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat?</span>
255:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">||</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
256:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
257:     <span class="ruby-keyword kw">end</span>
258:     <span class="ruby-identifier">a</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
259:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>
260:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001587">
                    
                    <a name="M001587"></a><b>ipv4_mapped</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001587_source')" id="l_M001587_source">show</a>
                        
                    </p>
                    <div id="M001587_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 264</span>
264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped</span>
265:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
266:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
267:     <span class="ruby-keyword kw">end</span>
268:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xffff00000000</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
269:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001585">
                    
                    <a name="M001585"></a><b>ipv4_mapped?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001585_source')" id="l_M001585_source">show</a>
                        
                    </p>
                    <div id="M001585_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 249</span>
249:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped?</span>
250:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0xffff</span>
251:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001584">
                    
                    <a name="M001584"></a><b>ipv6?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001584_source')" id="l_M001584_source">show</a>
                        
                    </p>
                    <div id="M001584_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 244</span>
244:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv6?</span>
245:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
246:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001576">
                    
                    <a name="M001576"></a><b>mask</b>(prefixlen)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by masking IP address with the given
prefixlen/netmask. (e.g. 8, 64, &#8220;255.255.255.0&#8220;, etc.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001576_source')" id="l_M001576_source">show</a>
                        
                    </p>
                    <div id="M001576_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask</span>(<span class="ruby-identifier">prefixlen</span>)
147:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
148:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001589">
                    
                    <a name="M001589"></a><b>native</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the IPv6 address into a native
IPv4 address. If the IP address is not an IPv4-mapped or IPv4-compatible
IPv6 address, returns self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001589_source')" id="l_M001589_source">show</a>
                        
                    </p>
                    <div id="M001589_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 283</span>
283:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">native</span>
284:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_mapped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_compat?</span>
285:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
286:     <span class="ruby-keyword kw">end</span>
287:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>)
288:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001590">
                    
                    <a name="M001590"></a><b>reverse</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup. It returns a string in RFC3172
form for an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001590_source')" id="l_M001590_source">show</a>
                        
                    </p>
                    <div id="M001590_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 292</span>
292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse</span>
293:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
294:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
295:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.in-addr.arpa&quot;</span>
296:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
297:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ip6_arpa</span>
298:     <span class="ruby-keyword kw">else</span>
299:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
300:     <span class="ruby-keyword kw">end</span>
301:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001593">
                    
                    <a name="M001593"></a><b>succ</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the successor to the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001593_source')" id="l_M001593_source">show</a>
                        
                    </p>
                    <div id="M001593_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">succ</span>
321:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@family</span>)
322:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001579">
                    
                    <a name="M001579"></a><b>to_i</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the integer representation of the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001579_source')" id="l_M001579_source">show</a>
                        
                    </p>
                    <div id="M001579_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 189</span>
189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_i</span>
190:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span>
191:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001639">
                    
                    <a name="M001639"></a><b>to_range</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="Range.html">Range</a> object for the network address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001639_source')" id="l_M001639_source">show</a>
                        
                    </p>
                    <div id="M001639_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 335</span>
335:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_range</span>
336:     <span class="ruby-identifier">begin_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-ivar">@mask_addr</span>)
337: 
338:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
339:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
340:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
341:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
342:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
343:     <span class="ruby-keyword kw">else</span>
344:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
345:     <span class="ruby-keyword kw">end</span>
346: 
347:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">begin_addr</span>, <span class="ruby-ivar">@family</span>)<span class="ruby-operator">..</span><span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">end_addr</span>, <span class="ruby-ivar">@family</span>)
348:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001580">
                    
                    <a name="M001580"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001580_source')" id="l_M001580_source">show</a>
                        
                    </p>
                    <div id="M001580_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
195:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">to_string</span>
196:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4?</span>
197: 
198:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\b0{1,3}([\da-f]+)\b/i</span>, <span class="ruby-value str">'\1'</span>)
199:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
200:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\A0:0:0:0:0:0:0:0\Z/</span>, <span class="ruby-value str">'::'</span>)
201:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
202:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
203:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
204:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
205:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
206:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0\b/</span>, <span class="ruby-value str">':'</span>)
207:       <span class="ruby-keyword kw">break</span>
208:     <span class="ruby-keyword kw">end</span>
209:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:{3,}/</span>, <span class="ruby-value str">'::'</span>)
210: 
211:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A::(ffff:)?([\da-f]{1,4}):([\da-f]{1,4})\Z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">str</span>
212:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'::%s%d.%d.%d.%d'</span>, <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>)
213:     <span class="ruby-keyword kw">end</span>
214: 
215:     <span class="ruby-identifier">str</span>
216:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001581">
                    
                    <a name="M001581"></a><b>to_string</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation in canonical
form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001581_source')" id="l_M001581_source">show</a>
                        
                    </p>
                    <div id="M001581_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 220</span>
220:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_string</span>
221:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>)
222:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001571">
                    
                    <a name="M001571"></a><b>|</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise OR.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001571_source')" id="l_M001571_source">show</a>
                        
                    </p>
                    <div id="M001571_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">other</span>)
120:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
121:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001574">
                    
                    <a name="M001574"></a><b>~</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise negation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001574_source')" id="l_M001574_source">show</a>
                        
                    </p>
                    <div id="M001574_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">~</span>
135:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-operator">~@</span><span class="ruby-identifier">addr</span>))
136:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M001642">
                    
                    <a name="M001642"></a><b>mask!</b>(mask)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001642_source')" id="l_M001642_source">show</a>
                        
                    </p>
                    <div id="M001642_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">mask</span>)
388:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
389:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>
390:         <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">to_i</span>
391:       <span class="ruby-keyword kw">else</span>
392:         <span class="ruby-identifier">m</span> = <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">mask</span>)
393:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
394:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family is not same&quot;</span>
395:         <span class="ruby-keyword kw">end</span>
396:         <span class="ruby-ivar">@mask_addr</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_i</span>
397:         <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;=</span> <span class="ruby-ivar">@mask_addr</span>
398:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
399:       <span class="ruby-keyword kw">end</span>
400:     <span class="ruby-keyword kw">else</span>
401:       <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>
402:     <span class="ruby-keyword kw">end</span>
403:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
404:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
405:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">32</span>
406:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
407:       <span class="ruby-keyword kw">end</span>
408:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">32</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
409:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
410:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
411:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">128</span>
412:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
413:       <span class="ruby-keyword kw">end</span>
414:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">128</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
415:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
416:     <span class="ruby-keyword kw">else</span>
417:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
418:     <span class="ruby-keyword kw">end</span>
419:     <span class="ruby-ivar">@addr</span> = ((<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
420:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
421:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001641">
                    
                    <a name="M001641"></a><b>set</b>(addr, *family)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001641_source')" id="l_M001641_source">show</a>
                        
                    </p>
                    <div id="M001641_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 367</span>
367:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">family</span>)
368:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">:</span> <span class="ruby-ivar">@family</span>
369:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
370:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN4MASK</span>
371:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
372:       <span class="ruby-keyword kw">end</span>
373:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
374:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN6MASK</span>
375:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
376:       <span class="ruby-keyword kw">end</span>
377:     <span class="ruby-keyword kw">else</span>
378:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
379:     <span class="ruby-keyword kw">end</span>
380:     <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">addr</span>
381:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
382:       <span class="ruby-ivar">@family</span> = <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
383:     <span class="ruby-keyword kw">end</span>
384:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
385:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M001654">
                    
                    <a name="M001654"></a><b>_reverse</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001654_source')" id="l_M001654_source">show</a>
                        
                    </p>
                    <div id="M001654_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 545</span>
545:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_reverse</span>
546:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
547:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
548:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
549:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
550:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
551:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
552:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-ivar">@addr</span>).<span class="ruby-identifier">reverse!</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.(?!$)/</span>, <span class="ruby-value str">'\&amp;.'</span>)
553:     <span class="ruby-keyword kw">else</span>
554:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
555:     <span class="ruby-keyword kw">end</span>
556:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001655">
                    
                    <a name="M001655"></a><b>_to_string</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001655_source')" id="l_M001655_source">show</a>
                        
                    </p>
                    <div id="M001655_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 558</span>
558:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-identifier">addr</span>)
559:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
560:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
561:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
562:         (<span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">24</span> <span class="ruby-operator">-</span> <span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
563:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
564:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
565:       <span class="ruby-keyword kw">return</span> ((<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>).<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.{4}(?!$)/</span>, <span class="ruby-value str">'\&amp;:'</span>))
566:     <span class="ruby-keyword kw">else</span>
567:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
568:     <span class="ruby-keyword kw">end</span>
569:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001653">
                    
                    <a name="M001653"></a><b>addr_mask</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001653_source')" id="l_M001653_source">show</a>
                        
                    </p>
                    <div id="M001653_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 534</span>
534:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">addr_mask</span>(<span class="ruby-identifier">addr</span>)
535:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
536:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
537:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>
538:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
539:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN6MASK</span>
540:     <span class="ruby-keyword kw">else</span>
541:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
542:     <span class="ruby-keyword kw">end</span>
543:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001644">
                    
                    <a name="M001644"></a><b>coerce_other</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001644_source')" id="l_M001644_source">show</a>
                        
                    </p>
                    <div id="M001644_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 490</span>
490:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
491:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
492:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">IPAddr</span>
493:       <span class="ruby-identifier">other</span>
494:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
495:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>)
496:     <span class="ruby-keyword kw">else</span>
497:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>, <span class="ruby-ivar">@family</span>)
498:     <span class="ruby-keyword kw">end</span>
499:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001652">
                    
                    <a name="M001652"></a><b>in6_addr</b>(left)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001652_source')" id="l_M001652_source">show</a>
                        
                    </p>
                    <div id="M001652_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 510</span>
510:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">left</span>)
511:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">left</span>
512:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::ffff:(\d+\.\d+\.\d+\.\d+)$/i</span>
513:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>) <span class="ruby-operator">+</span> <span class="ruby-value">0xffff00000000</span>
514:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::(\d+\.\d+\.\d+\.\d+)$/i</span>
515:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>)
516:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[^0-9a-f:]/i</span>
517:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
518:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(.*)::(.*)$/</span>
519:       <span class="ruby-identifier">left</span>, <span class="ruby-identifier">right</span> = <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>
520:     <span class="ruby-keyword kw">else</span>
521:       <span class="ruby-identifier">right</span> = <span class="ruby-value str">''</span>
522:     <span class="ruby-keyword kw">end</span>
523:     <span class="ruby-identifier">l</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
524:     <span class="ruby-identifier">r</span> = <span class="ruby-identifier">right</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
525:     <span class="ruby-identifier">rest</span> = <span class="ruby-value">8</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">size</span>
526:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
527:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
528:     <span class="ruby-keyword kw">end</span>
529:     <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">l</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">r</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
530:       <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">hex</span>
531:     }
532:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001645">
                    
                    <a name="M001645"></a><b>in_addr</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001645_source')" id="l_M001645_source">show</a>
                        
                    </p>
                    <div id="M001645_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 501</span>
501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">addr</span>)
502:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+\.\d+\.\d+\.\d+$/</span>
503:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
504:         <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_i</span>
505:       }
506:     <span class="ruby-keyword kw">end</span>
507:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
508:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    