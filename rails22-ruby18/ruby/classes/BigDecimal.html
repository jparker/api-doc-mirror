<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>BigDecimal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            BigDecimal 
            
                <span class="parent">&lt; 
                    
                    <a href="Numeric.html">Numeric</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/bigdecimal/bigdecimal_c.html">ext/bigdecimal/bigdecimal.c</a></li>
            
            <li><a href="../files/ext/bigdecimal/lib/bigdecimal/util_rb.html">ext/bigdecimal/lib/bigdecimal/util.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="Class.html">Class</a> and method registration
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M007458">%</a>,</li>
                
                <li><a href="#M007455">*</a>,</li>
                
                <li><a href="#M007472">**</a>,</li>
                
                <li><a href="#M007451">+</a>,</li>
                
                <li><a href="#M007452">-</a>,</li>
                
                <li><a href="#M007456">/</a>,</li>
                
                <li><a href="#M007477"><</a>,</li>
                
                <li><a href="#M007478"><=</a>,</li>
                
                <li><a href="#M007473"><=></a>,</li>
                
                <li><a href="#M007474">==</a>,</li>
                
                <li><a href="#M007475">===</a>,</li>
                
                <li><a href="#M007479">></a>,</li>
                
                <li><a href="#M007480">>=</a>,</li>
                
                <li><a href="#M007439">_load</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M007464">abs</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M007470">ceil</a>,</li>
                
                <li><a href="#M007483">coerce</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M007461">divmod</a>,</li>
                
                <li><a href="#M007437">double_fig</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M007476">eql?</a>,</li>
                
                <li><a href="#M007485">exponent</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M007489">finite?</a>,</li>
                
                <li><a href="#M007466">fix</a>,</li>
                
                <li><a href="#M007469">floor</a>,</li>
                
                <li><a href="#M007468">frac</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M007488">infinite?</a>,</li>
                
                <li><a href="#M007484">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M007436">limit</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M007435">mode</a>,</li>
                
                <li><a href="#M007459">modulo</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M007487">nan?</a>,</li>
                
                <li><a href="#M007434">new</a>,</li>
                
                <li><a href="#M007482">nonzero?</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M007471">power</a>,</li>
                
                <li><a href="#M007441">precs</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M007457">quo</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M007460">remainder</a>,</li>
                
                <li><a href="#M007467">round</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M007486">sign</a>,</li>
                
                <li><a href="#M007450">split</a>,</li>
                
                <li><a href="#M007465">sqrt</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M007774">to_digits</a>,</li>
                
                <li><a href="#M007463">to_f</a>,</li>
                
                <li><a href="#M007448">to_i</a>,</li>
                
                <li><a href="#M007449">to_int</a>,</li>
                
                <li><a href="#M007775">to_r</a>,</li>
                
                <li><a href="#M007447">to_s</a>,</li>
                
                <li><a href="#M007490">truncate</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M007440">ver</a></li>
                
            </ul>
        </dd>
    
        <dt>Z</dt>
        <dd>
            <ul>
                
                <li><a href="#M007481">zero?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">BASE</td>
            <td>=</td>
            <td class="attr-value">INT2FIX((S_INT)VpBaseVal())</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Base value used in internal calculations. On a 32 bit system, <a
href="BigDecimal.html#BASE">BASE</a> is 10000, indicating that calculation
is done in groups of 4 digits. (If it were larger, BASE**2 wouldn&#8217;t
fit in 32 bits, so you couldn&#8217;t guarantee that two groups could
always be multiplied together without overflow.)
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_ALL</td>
            <td>=</td>
            <td class="attr-value">0xff</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines whether overflow, underflow or zero divide result in an
exception being thrown. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_NaN</td>
            <td>=</td>
            <td class="attr-value">0x02</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when the result of a computation is not a number
(NaN). See <a href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_INFINITY</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when the result of a computation is infinity. See
<a href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_UNDERFLOW</td>
            <td>=</td>
            <td class="attr-value">0x04</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when the result of a computation is an underflow (a
result too small to be represented). See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_OVERFLOW</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when the result of a computation is an underflow (a
result too large to be represented). See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXCEPTION_ZERODIVIDE</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when a division by zero is performed. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_MODE</td>
            <td>=</td>
            <td class="attr-value">0x100</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Determines what happens when a result must be rounded in order to fit in
the appropriate number of significant digits. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_UP</td>
            <td>=</td>
            <td class="attr-value">1</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that values should be rounded away from zero. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_DOWN</td>
            <td>=</td>
            <td class="attr-value">2</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that values should be rounded towards zero. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_HALF_UP</td>
            <td>=</td>
            <td class="attr-value">3</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that digits >= 5 should be rounded up, others rounded down. See
<a href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_HALF_DOWN</td>
            <td>=</td>
            <td class="attr-value">4</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that digits >= 6 should be rounded up, others rounded down. See
<a href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_CEILING</td>
            <td>=</td>
            <td class="attr-value">5</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Round towards +infinity. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_FLOOR</td>
            <td>=</td>
            <td class="attr-value">6</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Round towards -infinity. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ROUND_HALF_EVEN</td>
            <td>=</td>
            <td class="attr-value">7</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Round towards the even neighbor. See <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_NaN</td>
            <td>=</td>
            <td class="attr-value">0</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is not a number. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_ZERO</td>
            <td>=</td>
            <td class="attr-value">1</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is +0. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_ZERO</td>
            <td>=</td>
            <td class="attr-value">-1</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is -0. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_FINITE</td>
            <td>=</td>
            <td class="attr-value">2</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is positive and finite. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_FINITE</td>
            <td>=</td>
            <td class="attr-value">-2</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is negative and finite. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_INFINITE</td>
            <td>=</td>
            <td class="attr-value">3</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is positive and infinite. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_INFINITE</td>
            <td>=</td>
            <td class="attr-value">-3</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Indicates that a value is negative and infinite. See <a
href="BigDecimal.html#M007486">BigDecimal.sign</a>.
</p>
</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M007439">
                    
                    <a name="M007439"></a><b>_load</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Internal method used to provide marshalling support. See the <a
href="Marshal.html">Marshal</a> module.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007439_source')" id="l_M007439_source">show</a>
                        
                    </p>
                    <div id="M007439_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_load(VALUE self, VALUE str)
{
    ENTER(2);
    Real *pv;
    unsigned char *pch;
    unsigned char ch;
    unsigned long m=0;

    SafeStringValue(str);
    pch = (unsigned char *)RSTRING_PTR(str);
    /* First get max prec */
    while((*pch)!=(unsigned char)'\0' &amp;&amp; (ch=*pch++)!=(unsigned char)':') {
        if(!ISDIGIT(ch)) {
            rb_raise(rb_eTypeError, &quot;load failed: invalid character in the marshaled string&quot;);
        }
        m = m*10 + (unsigned long)(ch-'0');
    }
    if(m&gt;VpBaseFig()) m -= VpBaseFig();
    GUARD_OBJ(pv,VpNewRbClass(m,(char *)pch,self));
    m /= VpBaseFig();
    if(m &amp;&amp; pv-&gt;MaxPrec&gt;m) pv-&gt;MaxPrec = m+1;
    return ToValue(pv);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007437">
                    
                    <a name="M007437"></a><b>BigDecimal.double_fig
</b>
                    
                </div>
                
                <div class="description">
                  <p>
The <a href="BigDecimal.html#M007437">BigDecimal.double_fig</a> class
method returns the number of digits a <a href="Float.html">Float</a> number
is allowed to have. The result depends upon the CPU and OS in use.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007437_source')" id="l_M007437_source">show</a>
                        
                    </p>
                    <div id="M007437_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_double_fig(VALUE self)
{
    return INT2FIX(VpDblFig());
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007436">
                    
                    <a name="M007436"></a><b>BigDecimal.limit(digits)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Limit the number of significant digits in newly created <a
href="BigDecimal.html">BigDecimal</a> numbers to the specified value.
Rounding is performed as necessary, as specified by <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>
<p>
A limit of 0, the default, means no upper limit.
</p>
<p>
The limit specified by this method takes priority over any limit specified
to instance methods such as ceil, floor, truncate, or round.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007436_source')" id="l_M007436_source">show</a>
                        
                    </p>
                    <div id="M007436_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_limit(int argc, VALUE *argv, VALUE self)
{
    VALUE  nFig;
    VALUE  nCur = INT2NUM(VpGetPrecLimit());

    if(rb_scan_args(argc,argv,&quot;01&quot;,&amp;nFig)==1) {
        int nf;
        if(nFig==Qnil) return nCur;
        Check_Type(nFig, T_FIXNUM);
        nf = FIX2INT(nFig);
        if(nf&lt;0) {
            rb_raise(rb_eArgError, &quot;argument must be positive&quot;);
        }
        VpSetPrecLimit(nf);
    }
    return nCur;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007435">
                    
                    <a name="M007435"></a><b>BigDecimal.mode(mode, value)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Controls handling of arithmetic exceptions and rounding. If no value is
supplied, the current value is returned.
</p>
<p>
Six values of the mode parameter control the handling of arithmetic
exceptions:
</p>
<p>
BigDecimal::EXCEPTION_NaN BigDecimal::EXCEPTION_INFINITY
BigDecimal::EXCEPTION_UNDERFLOW BigDecimal::EXCEPTION_OVERFLOW
BigDecimal::EXCEPTION_ZERODIVIDE BigDecimal::EXCEPTION_ALL
</p>
<p>
For each mode parameter above, if the value set is false, computation
continues after an arithmetic exception of the appropriate type. When
computation continues, results are as follows:
</p>
<table>
<tr><td valign="top"><a href="BigDecimal.html#EXCEPTION_NaN">EXCEPTION_NaN</a>:</td><td>NaN

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#EXCEPTION_INFINITY">EXCEPTION_INFINITY</a>:</td><td>+infinity or -infinity

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#EXCEPTION_UNDERFLOW">EXCEPTION_UNDERFLOW</a>:</td><td>0

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#EXCEPTION_OVERFLOW">EXCEPTION_OVERFLOW</a>:</td><td>+infinity or -infinity

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#EXCEPTION_ZERODIVIDE">EXCEPTION_ZERODIVIDE</a>:</td><td>+infinity or -infinity

</td></tr>
</table>
<p>
One value of the mode parameter controls the rounding of numeric values:
BigDecimal::ROUND_MODE. The values it can take are:
</p>
<table>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_UP">ROUND_UP</a>:</td><td>round away from zero

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_DOWN">ROUND_DOWN</a>:</td><td>round towards zero (truncate)

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_HALF_UP">ROUND_HALF_UP</a>:</td><td>round up if the appropriate digit >= 5, otherwise truncate (default)

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_HALF_DOWN">ROUND_HALF_DOWN</a>:</td><td>round up if the appropriate digit >= 6, otherwise truncate

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_HALF_EVEN">ROUND_HALF_EVEN</a>:</td><td>round towards the even neighbor (Banker&#8217;s rounding)

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_CEILING">ROUND_CEILING</a>:</td><td>round towards positive infinity (ceil)

</td></tr>
<tr><td valign="top"><a href="BigDecimal.html#ROUND_FLOOR">ROUND_FLOOR</a>:</td><td>round towards negative infinity (floor)

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007435_source')" id="l_M007435_source">show</a>
                        
                    </p>
                    <div id="M007435_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_mode(int argc, VALUE *argv, VALUE self)
{
    VALUE which;
    VALUE val;
    unsigned long f,fo;
 
    if(rb_scan_args(argc,argv,&quot;11&quot;,&amp;which,&amp;val)==1) val = Qnil;

    Check_Type(which, T_FIXNUM);
    f = (unsigned long)FIX2INT(which);

    if(f&amp;VP_EXCEPTION_ALL) {
        /* Exception mode setting */
        fo = VpGetException();
        if(val==Qnil) return INT2FIX(fo);
        if(val!=Qfalse &amp;&amp; val!=Qtrue) {
            rb_raise(rb_eTypeError, &quot;second argument must be true or false&quot;);
            return Qnil; /* Not reached */
        }
        if(f&amp;VP_EXCEPTION_INFINITY) {
            VpSetException((unsigned short)((val==Qtrue)?(fo|VP_EXCEPTION_INFINITY):
                           (fo&amp;(~VP_EXCEPTION_INFINITY))));
        }
        if(f&amp;VP_EXCEPTION_NaN) {
            VpSetException((unsigned short)((val==Qtrue)?(fo|VP_EXCEPTION_NaN):
                           (fo&amp;(~VP_EXCEPTION_NaN))));
        }
        fo = VpGetException();
        return INT2FIX(fo);
    }
    if(VP_ROUND_MODE==f) {
        /* Rounding mode setting */
        fo = VpGetRoundMode();
        if(val==Qnil) return INT2FIX(fo);
        Check_Type(val, T_FIXNUM);
        if(!VpIsRoundMode(FIX2INT(val))) {
            rb_raise(rb_eTypeError, &quot;invalid rounding mode&quot;);
            return Qnil;
        }
        fo = VpSetRoundMode((unsigned long)FIX2INT(val));
        return INT2FIX(fo);
    }
    rb_raise(rb_eTypeError, &quot;first argument for BigDecimal#mode invalid&quot;);
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007434">
                    
                    <a name="M007434"></a><b>new(initial, digits)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Create a new <a href="BigDecimal.html">BigDecimal</a> object.
</p>
<table>
<tr><td valign="top">initial:</td><td>The initial value, as a <a href="String.html">String</a>. Spaces are
ignored, unrecognized characters terminate the value.

</td></tr>
<tr><td valign="top">digits:</td><td>The number of significant digits, as a <a href="Fixnum.html">Fixnum</a>. If
omitted or 0, the number of significant digits is determined from the
initial value.

</td></tr>
</table>
<p>
The actual number of significant digits used in computation is usually
larger than the specified number.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007434_source')" id="l_M007434_source">show</a>
                        
                    </p>
                    <div id="M007434_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_new(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *pv;
    S_LONG mf;
    VALUE  nFig;
    VALUE  iniValue;

    if(rb_scan_args(argc,argv,&quot;11&quot;,&amp;iniValue,&amp;nFig)==1) {
        mf = 0;
    } else {
        mf = GetPositiveInt(nFig);
    }
    SafeStringValue(iniValue);
    GUARD_OBJ(pv,VpNewRbClass(mf, RSTRING_PTR(iniValue),self));
    return ToValue(pv);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007440">
                    
                    <a name="M007440"></a><b>ver</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <a href="BigDecimal.html">BigDecimal</a> version number.
</p>
<p>
Ruby 1.8.0 returns 1.0.0. Ruby 1.8.1 thru 1.8.3 return 1.0.1.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007440_source')" id="l_M007440_source">show</a>
                        
                    </p>
                    <div id="M007440_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_version(VALUE self)
{
    /*
     * 1.0.0: Ruby 1.8.0
     * 1.0.1: Ruby 1.8.1
    */
    return rb_str_new2(&quot;1.0.1&quot;);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M007458">
                    
                    <a name="M007458"></a><b>a % b
a.modulo(b)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the modulus from dividing by b. See divmod.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007458_source')" id="l_M007458_source">show</a>
                        
                    </p>
                    <div id="M007458_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_mod(VALUE self, VALUE r) </pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007455">
                    
                    <a name="M007455"></a><b>mult(value, digits)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Multiply by the specified value.
</p>
<p>
e.g.
</p>
<pre>
  c = a.mult(b,n)
  c = a * b
</pre>
<table>
<tr><td valign="top">digits:</td><td>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007455_source')" id="l_M007455_source">show</a>
                        
                    </p>
                    <div id="M007455_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_mult(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    U_LONG mx;

    GUARD_OBJ(a,GetVpValue(self,1));
    b = GetVpValue(r,0);
    if(!b) return DoSomeOne(self,r);
    SAVE(b);

    mx = a-&gt;Prec + b-&gt;Prec;
    GUARD_OBJ(c,VpCreateRbObject(mx *(VpBaseFig() + 1), &quot;0&quot;));
    VpMult(c, a, b);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007472">
                    
                    <a name="M007472"></a><b>power(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the value raised to the power of n. Note that n must be an <a
href="Integer.html">Integer</a>.
</p>
<p>
Also available as the operator **
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007472_source')" id="l_M007472_source">show</a>
                        
                    </p>
                    <div id="M007472_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_power(VALUE self, VALUE p)
{
    ENTER(5);
    Real *x, *y;
    S_LONG mp, ma, n;

    Check_Type(p, T_FIXNUM);
    n = FIX2INT(p);
    ma = n;
    if(ma &lt; 0)  ma = -ma;
    if(ma == 0) ma = 1;

    GUARD_OBJ(x,GetVpValue(self,1));
    if(VpIsDef(x)) {
        mp = x-&gt;Prec *(VpBaseFig() + 1);
        GUARD_OBJ(y,VpCreateRbObject(mp *(ma + 1), &quot;0&quot;));
    } else {
        GUARD_OBJ(y,VpCreateRbObject(1, &quot;0&quot;));
    }
    VpPower(y, x, n);
    return ToValue(y);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007451">
                    
                    <a name="M007451"></a><b>add(value, digits)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Add the specified value.
</p>
<p>
e.g.
</p>
<pre>
  c = a.add(b,n)
  c = a + b
</pre>
<table>
<tr><td valign="top">digits:</td><td>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007451_source')" id="l_M007451_source">show</a>
                        
                    </p>
                    <div id="M007451_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_add(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    U_LONG mx;
    GUARD_OBJ(a,GetVpValue(self,1));
    b = GetVpValue(r,0);
    if(!b) return DoSomeOne(self,r);
    SAVE(b);
    if(VpIsNaN(b)) return b-&gt;obj;
    if(VpIsNaN(a)) return a-&gt;obj;
    mx = GetAddSubPrec(a,b);
    if(mx==(-1L)) {
        GUARD_OBJ(c,VpCreateRbObject(VpBaseFig() + 1, &quot;0&quot;));
        VpAddSub(c, a, b, 1);
    } else {
        GUARD_OBJ(c,VpCreateRbObject(mx *(VpBaseFig() + 1), &quot;0&quot;));
        if(!mx) {
            VpSetInf(c,VpGetSign(a));
        } else {
            VpAddSub(c, a, b, 1);
        }
    }
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007452">
                    
                    <a name="M007452"></a><b>sub(value, digits)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Subtract the specified value.
</p>
<p>
e.g.
</p>
<pre>
  c = a.sub(b,n)
  c = a - b
</pre>
<table>
<tr><td valign="top">digits:</td><td>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007452_source')" id="l_M007452_source">show</a>
                        
                    </p>
                    <div id="M007452_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_sub(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    U_LONG mx;

    GUARD_OBJ(a,GetVpValue(self,1));
    b = GetVpValue(r,0);
    if(!b) return DoSomeOne(self,r);
    SAVE(b);

    if(VpIsNaN(b)) return b-&gt;obj;
    if(VpIsNaN(a)) return a-&gt;obj;

    mx = GetAddSubPrec(a,b);
    if(mx==(-1L)) {
        GUARD_OBJ(c,VpCreateRbObject(VpBaseFig() + 1, &quot;0&quot;));
        VpAddSub(c, a, b, -1);
    } else {
        GUARD_OBJ(c,VpCreateRbObject(mx *(VpBaseFig() + 1), &quot;0&quot;));
        if(!mx) {
            VpSetInf(c,VpGetSign(a));
        } else {
            VpAddSub(c, a, b, -1);
        }
    }
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007456">
                    
                    <a name="M007456"></a><b>div(value, digits)
quo(value)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Divide by the specified value.
</p>
<p>
e.g.
</p>
<pre>
  c = a.div(b,n)
</pre>
<table>
<tr><td valign="top">digits:</td><td>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.

</td></tr>
</table>
<p>
If digits is 0, the result is the same as the / operator. If not, the
result is an integer <a href="BigDecimal.html">BigDecimal</a>, by analogy
with Float#div.
</p>
<p>
The alias quo is provided since div(value, 0) is the same as computing the
quotient; see divmod.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007456_source')" id="l_M007456_source">show</a>
                        
                    </p>
                    <div id="M007456_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_div(VALUE self, VALUE r)
/* For c = self/r: with round operation */
{
    ENTER(5);
    Real *c=NULL, *res=NULL, *div = NULL;
    r = BigDecimal_divide(&amp;c, &amp;res, &amp;div, self, r);
    if(r!=(VALUE)0) return r; /* coerced by other */
    SAVE(c);SAVE(res);SAVE(div);
    /* a/b = c + r/b */
    /* c xxxxx
       r 00000yyyyy  ==&gt; (y/b)*BASE &gt;= HALF_BASE
     */
    /* Round */
    if(VpHasVal(div)) { /* frac[0] must be zero for NaN,INF,Zero */
       VpInternalRound(c,0,c-&gt;frac[c-&gt;Prec-1],(VpBaseVal()*res-&gt;frac[0])/div-&gt;frac[0]);
    }
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007477">
                    
                    <a name="M007477"></a><b>a < b
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if a is less than b. Values may be coerced to perform the
comparison (see ==, coerce).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007477_source')" id="l_M007477_source">show</a>
                        
                    </p>
                    <div id="M007477_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_lt(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '&lt;');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007478">
                    
                    <a name="M007478"></a><b>a <= b
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if a is less than or equal to b. Values may be coerced to
perform the comparison (see ==, coerce).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007478_source')" id="l_M007478_source">show</a>
                        
                    </p>
                    <div id="M007478_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_le(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, 'L');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007473">
                    
                    <a name="M007473"></a><b>&lt;=&gt;</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
The comparison operator. a <=> b is 0 if a == b, 1 if a > b, -1 if a < b.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007473_source')" id="l_M007473_source">show</a>
                        
                    </p>
                    <div id="M007473_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_comp(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '*');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007474">
                    
                    <a name="M007474"></a><b>==</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Tests for value equality; returns true if the values are equal.
</p>
<p>
The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
Values may be coerced to perform the comparison:
</p>
<p>
<a href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8216;1.0&#8217;) ==
1.0 -> true
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007474_source')" id="l_M007474_source">show</a>
                        
                    </p>
                    <div id="M007474_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '=');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007475">
                    
                    <a name="M007475"></a><b>===</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Tests for value equality; returns true if the values are equal.
</p>
<p>
The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
Values may be coerced to perform the comparison:
</p>
<p>
<a href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8216;1.0&#8217;) ==
1.0 -> true
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007475_source')" id="l_M007475_source">show</a>
                        
                    </p>
                    <div id="M007475_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '=');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007479">
                    
                    <a name="M007479"></a><b>a > b
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if a is greater than b. Values may be coerced to perform the
comparison (see ==, coerce).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007479_source')" id="l_M007479_source">show</a>
                        
                    </p>
                    <div id="M007479_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_gt(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '&gt;');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007480">
                    
                    <a name="M007480"></a><b>a >= b
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if a is greater than or equal to b. Values may be coerced to
perform the comparison (see ==, coerce)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007480_source')" id="l_M007480_source">show</a>
                        
                    </p>
                    <div id="M007480_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_ge(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, 'G');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007464">
                    
                    <a name="M007464"></a><b>abs</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the absolute value.
</p>
<p>
BigDecimal(&#8216;5&#8217;).abs -> 5
</p>
<p>
BigDecimal(&#8217;-3&#8217;).abs -> 3
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007464_source')" id="l_M007464_source">show</a>
                        
                    </p>
                    <div id="M007464_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_abs(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    U_LONG mx;

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpAsgn(c, a, 1);
    VpChangeSign(c,(S_INT)1);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007470">
                    
                    <a name="M007470"></a><b>ceil(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Return the smallest integer greater than or equal to the value, as a <a
href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).ceil -> 4
</p>
<p>
BigDecimal(&#8217;-9.1&#8217;).ceil -> -9
</p>
<p>
If n is specified and positive, the fractional part of the result has no
more than that many digits.
</p>
<p>
If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).ceil(3) -> 3.142
</p>
<p>
BigDecimal(&#8216;13345.234&#8217;).ceil(-2) -> 13400.0
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007470_source')" id="l_M007470_source">show</a>
                        
                    </p>
                    <div id="M007470_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_ceil(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    U_LONG mx;
    int iLoc;
    VALUE vLoc;
    U_LONG pl = VpSetPrecLimit(0);

    if(rb_scan_args(argc,argv,&quot;01&quot;,&amp;vLoc)==0) {
        iLoc = 0;
    } else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c,a,VP_ROUND_CEIL,iLoc);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007483">
                    
                    <a name="M007483"></a><b>coerce</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
The coerce method provides support for Ruby type coercion. It is not
enabled by default.
</p>
<p>
This means that binary operations like + * / or - can often be performed on
a <a href="BigDecimal.html">BigDecimal</a> and an object of another type,
if the other object can be coerced into a <a
href="BigDecimal.html">BigDecimal</a> value.
</p>
<p>
e.g. a = <a
href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8220;1.0&#8220;) b = a
/ 2.0 -> 0.5
</p>
<p>
Note that coercing a <a href="String.html">String</a> to a <a
href="BigDecimal.html">BigDecimal</a> is not supported by default; it
requires a special compile-time option when building Ruby.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007483_source')" id="l_M007483_source">show</a>
                        
                    </p>
                    <div id="M007483_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_coerce(VALUE self, VALUE other)
{
    ENTER(2);
    VALUE obj;
    Real *b;
    if(TYPE(other) == T_FLOAT) {
       obj = rb_assoc_new(other, BigDecimal_to_f(self));
    } else {
       GUARD_OBJ(b,GetVpValue(other,1));
       obj = rb_assoc_new(b-&gt;obj, self);
    }
    return obj;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007461">
                    
                    <a name="M007461"></a><b>divmod</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Divides by the specified value, and returns the quotient and modulus as <a
href="BigDecimal.html">BigDecimal</a> numbers. The quotient is rounded
towards negative infinity.
</p>
<p>
For example:
</p>
<p>
require &#8216;bigdecimal&#8217;
</p>
<p>
a = <a href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8220;42&#8221;)
b = <a href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8220;9&#8221;)
</p>
<p>
q,m = a.divmod(b)
</p>
<p>
c = q * b + m
</p>
<p>
a == c -> true
</p>
<p>
The quotient q is (a/b).floor, and the modulus is the amount that must be
added to q * b to get a.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007461_source')" id="l_M007461_source">show</a>
                        
                    </p>
                    <div id="M007461_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_divmod(VALUE self, VALUE r)
{
    ENTER(5);
    VALUE obj;
    Real *div=NULL, *mod=NULL;

    obj = BigDecimal_DoDivmod(self,r,&amp;div,&amp;mod);
    if(obj!=(VALUE)0) return obj;
    SAVE(div);SAVE(mod);
    obj = rb_assoc_new(ToValue(div), ToValue(mod));
    return obj;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007476">
                    
                    <a name="M007476"></a><b>eql?</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Tests for value equality; returns true if the values are equal.
</p>
<p>
The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
Values may be coerced to perform the comparison:
</p>
<p>
<a href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8216;1.0&#8217;) ==
1.0 -> true
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007476_source')" id="l_M007476_source">show</a>
                        
                    </p>
                    <div id="M007476_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, '=');
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007485">
                    
                    <a name="M007485"></a><b>exponent</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the exponent of the <a href="BigDecimal.html">BigDecimal</a>
number, as an <a href="Integer.html">Integer</a>.
</p>
<p>
If the number can be represented as 0.xxxxxx*10**n where xxxxxx is a string
of digits with no leading zeros, then n is the exponent.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007485_source')" id="l_M007485_source">show</a>
                        
                    </p>
                    <div id="M007485_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_exponent(VALUE self)
{
    S_LONG e = VpExponent10(GetVpValue(self,1));
    return INT2NUM(e);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007489">
                    
                    <a name="M007489"></a><b>finite?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns True if the value is finite (not NaN or infinite)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007489_source')" id="l_M007489_source">show</a>
                        
                    </p>
                    <div id="M007489_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_IsFinite(VALUE self)
{
    Real *p = GetVpValue(self,1);
    if(VpIsNaN(p)) return Qfalse;
    if(VpIsInf(p)) return Qfalse;
    return Qtrue;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007466">
                    
                    <a name="M007466"></a><b>fix</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return the integer part of the number.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007466_source')" id="l_M007466_source">show</a>
                        
                    </p>
                    <div id="M007466_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_fix(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    U_LONG mx;

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpActiveRound(c,a,VP_ROUND_DOWN,0); /* 0: round off */
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007469">
                    
                    <a name="M007469"></a><b>floor(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Return the largest integer less than or equal to the value, as a <a
href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).floor -> 3
</p>
<p>
BigDecimal(&#8217;-9.1&#8217;).floor -> -10
</p>
<p>
If n is specified and positive, the fractional part of the result has no
more than that many digits.
</p>
<p>
If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).floor(3) -> 3.141
</p>
<p>
BigDecimal(&#8216;13345.234&#8217;).floor(-2) -> 13300.0
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007469_source')" id="l_M007469_source">show</a>
                        
                    </p>
                    <div id="M007469_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_floor(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    U_LONG mx;
    int iLoc;
    VALUE vLoc;
    U_LONG pl = VpSetPrecLimit(0);

    if(rb_scan_args(argc,argv,&quot;01&quot;,&amp;vLoc)==0) {
        iLoc = 0;
    } else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c,a,VP_ROUND_FLOOR,iLoc);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007468">
                    
                    <a name="M007468"></a><b>frac</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return the fractional part of the number.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007468_source')" id="l_M007468_source">show</a>
                        
                    </p>
                    <div id="M007468_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_frac(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    U_LONG mx;

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpFrac(c, a);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007488">
                    
                    <a name="M007488"></a><b>infinite?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns True if the value is infinite
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007488_source')" id="l_M007488_source">show</a>
                        
                    </p>
                    <div id="M007488_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_IsInfinite(VALUE self)
{
    Real *p = GetVpValue(self,1);
    if(VpIsPosInf(p)) return INT2FIX(1);
    if(VpIsNegInf(p)) return INT2FIX(-1);
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007484">
                    
                    <a name="M007484"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns debugging information about the value as a string of
comma-separated values in angle brackets with a leading #:
</p>
<p>
<a
href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8220;1234.5678&#8220;).inspect
-> &#8220;#<BigDecimal:b7ea1130,&#8217;0.12345678E4&#8217;,8(12)>&#8220;
</p>
<p>
The first part is the address, the second is the value as a string, and the
final part ss(mm) is the current number of significant digits and the
maximum number of significant digits, respectively.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007484_source')" id="l_M007484_source">show</a>
                        
                    </p>
                    <div id="M007484_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_inspect(VALUE self)
{
    ENTER(5);
    Real *vp;
    volatile VALUE obj;
    unsigned int nc;
    char *psz, *tmp;

    GUARD_OBJ(vp,GetVpValue(self,1));
    nc = VpNumOfChars(vp,&quot;E&quot;);
    nc +=(nc + 9) / 10;

    obj = rb_str_new(0, nc+256);
    psz = RSTRING_PTR(obj);
    sprintf(psz,&quot;#&lt;BigDecimal:%lx,'&quot;,self);
    tmp = psz + strlen(psz);
    VpToString(vp, tmp, 10, 0);
    tmp += strlen(tmp);
    sprintf(tmp,&quot;',%lu(%lu)&gt;&quot;,VpPrec(vp)*VpBaseFig(),VpMaxPrec(vp)*VpBaseFig());
    rb_str_resize(obj, strlen(psz));
    return obj;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007459">
                    
                    <a name="M007459"></a><b>a % b
a.modulo(b)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the modulus from dividing by b. See divmod.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007459_source')" id="l_M007459_source">show</a>
                        
                    </p>
                    <div id="M007459_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_mod(VALUE self, VALUE r) </pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007487">
                    
                    <a name="M007487"></a><b>nan?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns True if the value is Not a Number
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007487_source')" id="l_M007487_source">show</a>
                        
                    </p>
                    <div id="M007487_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_IsNaN(VALUE self)
{
    Real *p = GetVpValue(self,1);
    if(VpIsNaN(p))  return Qtrue;
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007482">
                    
                    <a name="M007482"></a><b>nonzero?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns True if the value is non-zero.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007482_source')" id="l_M007482_source">show</a>
                        
                    </p>
                    <div id="M007482_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_nonzero(VALUE self)
{
    Real *a = GetVpValue(self,1);
    return VpIsZero(a) ? Qnil : self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007471">
                    
                    <a name="M007471"></a><b>power(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the value raised to the power of n. Note that n must be an <a
href="Integer.html">Integer</a>.
</p>
<p>
Also available as the operator **
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007471_source')" id="l_M007471_source">show</a>
                        
                    </p>
                    <div id="M007471_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_power(VALUE self, VALUE p)
{
    ENTER(5);
    Real *x, *y;
    S_LONG mp, ma, n;

    Check_Type(p, T_FIXNUM);
    n = FIX2INT(p);
    ma = n;
    if(ma &lt; 0)  ma = -ma;
    if(ma == 0) ma = 1;

    GUARD_OBJ(x,GetVpValue(self,1));
    if(VpIsDef(x)) {
        mp = x-&gt;Prec *(VpBaseFig() + 1);
        GUARD_OBJ(y,VpCreateRbObject(mp *(ma + 1), &quot;0&quot;));
    } else {
        GUARD_OBJ(y,VpCreateRbObject(1, &quot;0&quot;));
    }
    VpPower(y, x, n);
    return ToValue(y);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007441">
                    
                    <a name="M007441"></a><b>precs
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a href="Array.html">Array</a> of two <a
href="Integer.html">Integer</a> values.
</p>
<p>
The first value is the current number of significant digits in the <a
href="BigDecimal.html">BigDecimal</a>. The second value is the maximum
number of significant digits for the <a
href="BigDecimal.html">BigDecimal</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007441_source')" id="l_M007441_source">show</a>
                        
                    </p>
                    <div id="M007441_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_prec(VALUE self)
{
    ENTER(1);
    Real *p;
    VALUE obj;

    GUARD_OBJ(p,GetVpValue(self,1));
    obj = rb_assoc_new(INT2NUM(p-&gt;Prec*VpBaseFig()),
                       INT2NUM(p-&gt;MaxPrec*VpBaseFig()));
    return obj;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007457">
                    
                    <a name="M007457"></a><b>div(value, digits)
quo(value)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Divide by the specified value.
</p>
<p>
e.g.
</p>
<pre>
  c = a.div(b,n)
</pre>
<table>
<tr><td valign="top">digits:</td><td>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.

</td></tr>
</table>
<p>
If digits is 0, the result is the same as the / operator. If not, the
result is an integer <a href="BigDecimal.html">BigDecimal</a>, by analogy
with Float#div.
</p>
<p>
The alias quo is provided since div(value, 0) is the same as computing the
quotient; see divmod.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007457_source')" id="l_M007457_source">show</a>
                        
                    </p>
                    <div id="M007457_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_div(VALUE self, VALUE r)
/* For c = self/r: with round operation */
{
    ENTER(5);
    Real *c=NULL, *res=NULL, *div = NULL;
    r = BigDecimal_divide(&amp;c, &amp;res, &amp;div, self, r);
    if(r!=(VALUE)0) return r; /* coerced by other */
    SAVE(c);SAVE(res);SAVE(div);
    /* a/b = c + r/b */
    /* c xxxxx
       r 00000yyyyy  ==&gt; (y/b)*BASE &gt;= HALF_BASE
     */
    /* Round */
    if(VpHasVal(div)) { /* frac[0] must be zero for NaN,INF,Zero */
       VpInternalRound(c,0,c-&gt;frac[c-&gt;Prec-1],(VpBaseVal()*res-&gt;frac[0])/div-&gt;frac[0]);
    }
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007460">
                    
                    <a name="M007460"></a><b>remainder</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the remainder from dividing by the value.
</p>
<p>
If the values divided are of the same sign, the remainder is the same as
the modulus (see divmod).
</p>
<p>
Otherwise, the remainder is the modulus minus the value divided by.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007460_source')" id="l_M007460_source">show</a>
                        
                    </p>
                    <div id="M007460_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_remainder(VALUE self, VALUE r) /* remainder */
{
    VALUE  f;
    Real  *d,*rv=0;
    f = BigDecimal_divremain(self,r,&amp;d,&amp;rv);
    if(f!=(VALUE)0) return f;
    return ToValue(rv);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007467">
                    
                    <a name="M007467"></a><b>round(n,mode)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Round to the nearest 1 (by default), returning the result as a <a
href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).round -> 3
</p>
<p>
BigDecimal(&#8216;8.7&#8217;).round -> 9
</p>
<p>
If n is specified and positive, the fractional part of the result has no
more than that many digits.
</p>
<p>
If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).round(3) -> 3.142
</p>
<p>
BigDecimal(&#8216;13345.234&#8217;).round(-2) -> 13300.0
</p>
<p>
The value of the optional mode argument can be used to determine how
rounding is performed; see <a
href="BigDecimal.html#M007435">BigDecimal.mode</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007467_source')" id="l_M007467_source">show</a>
                        
                    </p>
                    <div id="M007467_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_round(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real   *c, *a;
    int    iLoc = 0;
    U_LONG mx;
    VALUE  vLoc;
    VALUE  vRound;
    U_LONG pl;

    int    sw = VpGetRoundMode();

    int na = rb_scan_args(argc,argv,&quot;02&quot;,&amp;vLoc,&amp;vRound);
    switch(na) {
    case 0:
        iLoc = 0;
        break;
    case 1:
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
        break;
    case 2:
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
        Check_Type(vRound, T_FIXNUM);
        sw   = FIX2INT(vRound);
        if(!VpIsRoundMode(sw)) {
            rb_raise(rb_eTypeError, &quot;invalid rounding mode&quot;);
            return Qnil;
        }
        break;
    }

    pl = VpSetPrecLimit(0);
    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c,a,sw,iLoc);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007486">
                    
                    <a name="M007486"></a><b>sign</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the sign of the value.
</p>
<p>
Returns a positive value if > 0, a negative value if < 0, and a zero if ==
0.
</p>
<p>
The specific value returned indicates the type and sign of the <a
href="BigDecimal.html">BigDecimal</a>, as follows:
</p>
<table>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_NaN">SIGN_NaN</a>:</td><td>value is Not a Number

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_POSITIVE_ZERO">SIGN_POSITIVE_ZERO</a>:</td><td>value is +0

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_NEGATIVE_ZERO">SIGN_NEGATIVE_ZERO</a>:</td><td>value is -0

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_POSITIVE_INFINITE">SIGN_POSITIVE_INFINITE</a>:</td><td>value is +infinity

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_NEGATIVE_INFINITE">SIGN_NEGATIVE_INFINITE</a>:</td><td>value is -infinity

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_POSITIVE_FINITE">SIGN_POSITIVE_FINITE</a>:</td><td>value is positive

</td></tr>
<tr><td valign="top">BigDecimal::<a href="BigDecimal.html#SIGN_NEGATIVE_FINITE">SIGN_NEGATIVE_FINITE</a>:</td><td>value is negative

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007486_source')" id="l_M007486_source">show</a>
                        
                    </p>
                    <div id="M007486_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_sign(VALUE self)
{ /* sign */
    int s = GetVpValue(self,1)-&gt;sign;
    return INT2FIX(s);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007450">
                    
                    <a name="M007450"></a><b>split</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Splits a <a href="BigDecimal.html">BigDecimal</a> number into four parts,
returned as an array of values.
</p>
<p>
The first value represents the sign of the <a
href="BigDecimal.html">BigDecimal</a>, and is -1 or 1, or 0 if the <a
href="BigDecimal.html">BigDecimal</a> is Not a Number.
</p>
<p>
The second value is a string representing the significant digits of the <a
href="BigDecimal.html">BigDecimal</a>, with no leading zeros.
</p>
<p>
The third value is the base used for arithmetic (currently always 10) as an
<a href="Integer.html">Integer</a>.
</p>
<p>
The fourth value is an <a href="Integer.html">Integer</a> exponent.
</p>
<p>
If the <a href="BigDecimal.html">BigDecimal</a> can be represented as
0.xxxxxx*10**n, then xxxxxx is the string of significant digits with no
leading zeros, and n is the exponent.
</p>
<p>
From these values, you can translate a <a
href="BigDecimal.html">BigDecimal</a> to a float as follows:
</p>
<pre>
  sign, significant_digits, base, exponent = a.split
  f = sign * &quot;0.#{significant_digits}&quot;.to_f * (base ** exponent)
</pre>
<p>
(Note that the <a href="BigDecimal.html#M007463">to_f</a> method is
provided as a more convenient way to translate a <a
href="BigDecimal.html">BigDecimal</a> to a <a href="Float.html">Float</a>.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007450_source')" id="l_M007450_source">show</a>
                        
                    </p>
                    <div id="M007450_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_split(VALUE self)
{
    ENTER(5);
    Real *vp;
    VALUE obj,str;
    S_LONG e;
    S_LONG s;
    char *psz1;

    GUARD_OBJ(vp,GetVpValue(self,1));
    str = rb_str_new(0, VpNumOfChars(vp,&quot;E&quot;));
    psz1 = RSTRING_PTR(str);
    VpSzMantissa(vp,psz1);
    s = 1;
    if(psz1[0]=='-') {
        int len = strlen(psz1+1);

        memmove(psz1, psz1+1, len);
        psz1[len] = '\0';
        s = -1;
    }
    if(psz1[0]=='N') s=0; /* NaN */
    e = VpExponent10(vp);
    obj  = rb_ary_new2(4);
    rb_ary_push(obj, INT2FIX(s));
    rb_ary_push(obj, str);
    rb_str_resize(str, strlen(psz1));
    rb_ary_push(obj, INT2FIX(10));
    rb_ary_push(obj, INT2NUM(e));
    return obj;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007465">
                    
                    <a name="M007465"></a><b>sqrt(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the square root of the value.
</p>
<p>
If n is specified, returns at least that many significant digits.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007465_source')" id="l_M007465_source">show</a>
                        
                    </p>
                    <div id="M007465_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_sqrt(VALUE self, VALUE nFig)
{
    ENTER(5);
    Real *c, *a;
    S_INT mx, n;

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);

    n = GetPositiveInt(nFig) + VpDblFig() + 1;
    if(mx &lt;= n) mx = n;
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpSqrt(c, a);
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007774">
                    
                    <a name="M007774"></a><b>to_digits</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Converts a <a href="BigDecimal.html">BigDecimal</a> to a <a
href="String.html">String</a> of the form &#8220;nnnnnn.mmm&#8220;. This
method is deprecated; use <a
href="BigDecimal.html#M007447">BigDecimal#to_s</a>(&#8220;F&#8221;)
instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007774_source')" id="l_M007774_source">show</a>
                        
                    </p>
                    <div id="M007774_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/bigdecimal/lib/bigdecimal/util.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_digits</span>
34:      <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">nan?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">infinite?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">zero?</span>
35:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>
36:      <span class="ruby-keyword kw">else</span>
37:        <span class="ruby-identifier">i</span>       = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>
38:        <span class="ruby-identifier">s</span>,<span class="ruby-identifier">f</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">z</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">frac</span>.<span class="ruby-identifier">split</span>
39:        <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.&quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;0&quot;</span><span class="ruby-operator">*</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">z</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">f</span>
40:      <span class="ruby-keyword kw">end</span>
41:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007463">
                    
                    <a name="M007463"></a><b>to_f</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new <a href="Float.html">Float</a> object having approximately
the same value as the <a href="BigDecimal.html">BigDecimal</a> number.
Normal accuracy limits and built-in errors of binary <a
href="Float.html">Float</a> arithmetic apply.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007463_source')" id="l_M007463_source">show</a>
                        
                    </p>
                    <div id="M007463_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_to_f(VALUE self)
{
    ENTER(1);
    Real *p;
    double d;
    S_LONG e;
    char *buf;
    volatile VALUE str;

    GUARD_OBJ(p,GetVpValue(self,1));
    if(VpVtoD(&amp;d, &amp;e, p)!=1) return rb_float_new(d);
    if (e &gt; DBL_MAX_10_EXP) goto erange;
    str = rb_str_new(0, VpNumOfChars(p,&quot;E&quot;));
    buf = RSTRING_PTR(str);
    VpToString(p, buf, 0, 0);
    errno = 0;
    d = strtod(buf, 0);
    if(errno == ERANGE) {
      erange:
       VpException(VP_EXCEPTION_OVERFLOW,&quot;BigDecimal to Float conversion&quot;,0);
       if(d&gt;0.0) d = VpGetDoublePosInf();
       else      d = VpGetDoubleNegInf();
    }
    return rb_float_new(d);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007448">
                    
                    <a name="M007448"></a><b>to_i</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the value as an integer (<a href="Fixnum.html">Fixnum</a> or <a
href="Bignum.html">Bignum</a>).
</p>
<p>
If the BigNumber is infinity or NaN, returns nil.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007448_source')" id="l_M007448_source">show</a>
                        
                    </p>
                    <div id="M007448_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_to_i(VALUE self)
{
    ENTER(5);
    int e,n,i,nf;
    U_LONG v,b,j;
    volatile VALUE str;
    char *psz,*pch;
    Real *p;

    GUARD_OBJ(p,GetVpValue(self,1));

    /* Infinity or NaN not converted. */
    if(VpIsNaN(p)) {
       VpException(VP_EXCEPTION_NaN,&quot;Computation results to 'NaN'(Not a Number)&quot;,1);
       return Qnil;             /* not reached */
    } else if(VpIsPosInf(p)) {
       VpException(VP_EXCEPTION_INFINITY,&quot;Computation results to 'Infinity'&quot;,1);
       return Qnil;             /* not reached */
    } else if(VpIsNegInf(p)) {
       VpException(VP_EXCEPTION_INFINITY,&quot;Computation results to '-Infinity'&quot;,1);
       return Qnil;             /* not reached */
    }

    e = VpExponent10(p);
    if(e&lt;=0) return INT2FIX(0);
    nf = VpBaseFig();
    if(e&lt;=nf) {
        e = VpGetSign(p)*p-&gt;frac[0];
        return INT2FIX(e);
    }
    str = rb_str_new(0, e+nf+2);
    psz = RSTRING_PTR(str);

    n = (e+nf-1)/nf;
    pch = psz;
    if(VpGetSign(p)&lt;0) *pch++ = '-';
    for(i=0;i&lt;n;++i) {
        b = VpBaseVal()/10;
        if(i&gt;=(int)p-&gt;Prec) {
            while(b) {
                *pch++ = '0';
                b /= 10;
            }
            continue;
        }
        v = p-&gt;frac[i];
        while(b) {
            j = v/b;
            *pch++ = (char)(j + '0');
            v -= j*b;
            b /= 10;
        }
    }
    *pch++ = 0;
    return rb_cstr2inum(psz,10);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007449">
                    
                    <a name="M007449"></a><b>to_int</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the value as an integer (<a href="Fixnum.html">Fixnum</a> or <a
href="Bignum.html">Bignum</a>).
</p>
<p>
If the BigNumber is infinity or NaN, returns nil.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007449_source')" id="l_M007449_source">show</a>
                        
                    </p>
                    <div id="M007449_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_to_i(VALUE self)
{
    ENTER(5);
    int e,n,i,nf;
    U_LONG v,b,j;
    volatile VALUE str;
    char *psz,*pch;
    Real *p;

    GUARD_OBJ(p,GetVpValue(self,1));

    /* Infinity or NaN not converted. */
    if(VpIsNaN(p)) {
       VpException(VP_EXCEPTION_NaN,&quot;Computation results to 'NaN'(Not a Number)&quot;,1);
       return Qnil;             /* not reached */
    } else if(VpIsPosInf(p)) {
       VpException(VP_EXCEPTION_INFINITY,&quot;Computation results to 'Infinity'&quot;,1);
       return Qnil;             /* not reached */
    } else if(VpIsNegInf(p)) {
       VpException(VP_EXCEPTION_INFINITY,&quot;Computation results to '-Infinity'&quot;,1);
       return Qnil;             /* not reached */
    }

    e = VpExponent10(p);
    if(e&lt;=0) return INT2FIX(0);
    nf = VpBaseFig();
    if(e&lt;=nf) {
        e = VpGetSign(p)*p-&gt;frac[0];
        return INT2FIX(e);
    }
    str = rb_str_new(0, e+nf+2);
    psz = RSTRING_PTR(str);

    n = (e+nf-1)/nf;
    pch = psz;
    if(VpGetSign(p)&lt;0) *pch++ = '-';
    for(i=0;i&lt;n;++i) {
        b = VpBaseVal()/10;
        if(i&gt;=(int)p-&gt;Prec) {
            while(b) {
                *pch++ = '0';
                b /= 10;
            }
            continue;
        }
        v = p-&gt;frac[i];
        while(b) {
            j = v/b;
            *pch++ = (char)(j + '0');
            v -= j*b;
            b /= 10;
        }
    }
    *pch++ = 0;
    return rb_cstr2inum(psz,10);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007775">
                    
                    <a name="M007775"></a><b>to_r</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Converts a <a href="BigDecimal.html">BigDecimal</a> to a <a
href="Rational.html">Rational</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007775_source')" id="l_M007775_source">show</a>
                        
                    </p>
                    <div id="M007775_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File ext/bigdecimal/lib/bigdecimal/util.rb, line 44</span>
44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_r</span> 
45:      <span class="ruby-identifier">sign</span>,<span class="ruby-identifier">digits</span>,<span class="ruby-identifier">base</span>,<span class="ruby-identifier">power</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">split</span>
46:      <span class="ruby-identifier">numerator</span> = <span class="ruby-identifier">sign</span><span class="ruby-operator">*</span><span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>
47:      <span class="ruby-identifier">denomi_power</span> = <span class="ruby-identifier">power</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment cmt"># base is always 10</span>
48:      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">denomi_power</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
49:         <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">numerator</span>,<span class="ruby-identifier">base</span> <span class="ruby-operator">**</span> (<span class="ruby-operator">-</span><span class="ruby-identifier">denomi_power</span>))
50:      <span class="ruby-keyword kw">else</span>
51:         <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">numerator</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">base</span> <span class="ruby-operator">**</span> <span class="ruby-identifier">denomi_power</span>),<span class="ruby-value">1</span>)
52:      <span class="ruby-keyword kw">end</span>
53:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007447">
                    
                    <a name="M007447"></a><b>to_s(s)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Converts the value to a string.
</p>
<p>
The default format looks like 0.xxxxEnn.
</p>
<p>
The optional parameter s consists of either an integer; or an optional
&#8217;+&#8217; or &#8217; &#8217;, followed by an optional number,
followed by an optional &#8216;E&#8217; or &#8216;F&#8217;.
</p>
<p>
If there is a &#8217;+&#8217; at the start of s, positive values are
returned with a leading &#8217;+&#8217;.
</p>
<p>
A space at the start of s returns positive values with a leading space.
</p>
<p>
If s contains a number, a space is inserted after each group of that many
fractional digits.
</p>
<p>
If s ends with an &#8216;E&#8217;, engineering notation (0.xxxxEnn) is
used.
</p>
<p>
If s ends with an &#8216;F&#8217;, conventional floating point notation is
used.
</p>
<p>
Examples:
</p>
<p>
<a
href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8217;-123.45678901234567890&#8217;).<a
href="BigDecimal.html#M007447">to_s</a>(&#8216;5F&#8217;) ->
&#8217;-123.45678 90123 45678 9&#8217;
</p>
<p>
<a
href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8216;123.45678901234567890&#8217;).<a
href="BigDecimal.html#M007447">to_s</a>(&#8217;+8F&#8217;) ->
&#8217;+123.45678901 23456789&#8217;
</p>
<p>
<a
href="BigDecimal.html#M007434">BigDecimal.new</a>(&#8216;123.45678901234567890&#8217;).<a
href="BigDecimal.html#M007447">to_s</a>(&#8217; F&#8217;) -> &#8217;
123.4567890123456789&#8216;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007447_source')" id="l_M007447_source">show</a>
                        
                    </p>
                    <div id="M007447_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_to_s(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    int   fmt=0;   /* 0:E format */
    int   fPlus=0; /* =0:default,=1: set ' ' before digits ,set '+' before digits. */
    Real  *vp;
    volatile VALUE str;
    char  *psz;
    char   ch;
    U_LONG nc;
    S_INT  mc = 0;
    VALUE  f;

    GUARD_OBJ(vp,GetVpValue(self,1));
    
    if(rb_scan_args(argc,argv,&quot;01&quot;,&amp;f)==1) {
        if(TYPE(f)==T_STRING) {
            SafeStringValue(f);
            psz = RSTRING_PTR(f);
            if(*psz==' ') {
                fPlus = 1; psz++;
            } else if(*psz=='+') {
                fPlus = 2; psz++;
            }
            while((ch=*psz++)!=0) {
                if(ISSPACE(ch)) continue;
                if(!ISDIGIT(ch)) {
                    if(ch=='F' || ch=='f') fmt = 1; /* F format */
                    break;
                }
                mc = mc * 10 + ch - '0';
            }
        } else {
            mc  = GetPositiveInt(f);
        }
    }
    if(fmt) {
        nc = VpNumOfChars(vp,&quot;F&quot;);
    } else {
        nc = VpNumOfChars(vp,&quot;E&quot;);
    }
    if(mc&gt;0) nc += (nc + mc - 1) / mc + 1;

    str = rb_str_new(0, nc);
    psz = RSTRING_PTR(str);

    if(fmt) {
        VpToFString(vp, psz, mc, fPlus);
    } else {
        VpToString (vp, psz, mc, fPlus);
    }
    rb_str_resize(str, strlen(psz));
    return str;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007490">
                    
                    <a name="M007490"></a><b>truncate(n)
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Truncate to the nearest 1, returning the result as a <a
href="BigDecimal.html">BigDecimal</a>.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).truncate -> 3
</p>
<p>
BigDecimal(&#8216;8.7&#8217;).truncate -> 8
</p>
<p>
If n is specified and positive, the fractional part of the result has no
more than that many digits.
</p>
<p>
If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.
</p>
<p>
BigDecimal(&#8216;3.14159&#8217;).truncate(3) -> 3.141
</p>
<p>
BigDecimal(&#8216;13345.234&#8217;).truncate(-2) -> 13300.0
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007490_source')" id="l_M007490_source">show</a>
                        
                    </p>
                    <div id="M007490_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_truncate(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    int iLoc;
    U_LONG mx;
    VALUE vLoc;
    U_LONG pl = VpSetPrecLimit(0);

    if(rb_scan_args(argc,argv,&quot;01&quot;,&amp;vLoc)==0) {
        iLoc = 0;
    } else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a,GetVpValue(self,1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c,VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c,a,VP_ROUND_DOWN,iLoc); /* 0: truncate */
    return ToValue(c);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007481">
                    
                    <a name="M007481"></a><b>zero?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns True if the value is zero.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007481_source')" id="l_M007481_source">show</a>
                        
                    </p>
                    <div id="M007481_source" class="dyn-source">
                        <pre>static VALUE
BigDecimal_zero(VALUE self)
{
    Real *a = GetVpValue(self,1);
    return VpIsZero(a) ? Qtrue : Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    