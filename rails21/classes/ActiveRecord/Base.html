  <div id="C00000664">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Base<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/base_rb.html');">activerecord/lib/active_record/base.rb</a>
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/connection_adapters/mysql_adapter_rb.html');">activerecord/lib/active_record/connection_adapters/mysql_adapter.rb</a>
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/connection_adapters/postgresql_adapter_rb.html');">activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb</a>
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/connection_adapters/sqlite3_adapter_rb.html');">activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb</a>
<a href="#" onclick="jsHref('files/activerecord/lib/active_record/connection_adapters/sqlite_adapter_rb.html');">activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
Active Record objects don&#8217;t specify their attributes directly, but
rather infer them from the table definition with which they&#8217;re
linked. Adding, removing, and changing attributes and their type is done
directly in the database. Any change is instantly reflected in the Active
Record objects. The mapping that binds a given Active Record class to a
certain database table will happen automatically in most common cases, but
can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in <a
href="index.html?a=M001815&name=table_name">table_name</a> and the full
example in <a href="files/README.html"
target="_blank">link:files/README.html</a> for more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a hash or as a
block. The hash method is especially useful when you&#8217;re receiving the
data from somewhere else, like an HTTP request. It works like this:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;, :occupation =&gt; &quot;Code Artist&quot;)
  user.name # =&gt; &quot;David&quot;
</pre>
<p>
You can also use block initialization:
</p>
<pre>
  user = User.new do |u|
    u.name = &quot;David&quot;
    u.occupation = &quot;Code Artist&quot;
  end
</pre>
<p>
And of course you can just create a bare object and specify the attributes
after the fact:
</p>
<pre>
  user = User.new
  user.name = &quot;David&quot;
  user.occupation = &quot;Code Artist&quot;
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or hash representing
the WHERE-part of an SQL statement. The array form is to be used when the
condition input is tainted and requires sanitization. The string form can
be used for statements that don&#8217;t involve tainted data. The hash form
works much like the array form, except only equality and range is possible.
Examples:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def self.authenticate_unsafely(user_name, password)
      find(:first, :conditions =&gt; &quot;user_name = '#{user_name}' AND password = '#{password}'&quot;)
    end

    def self.authenticate_safely(user_name, password)
      find(:first, :conditions =&gt; [ &quot;user_name = ? AND password = ?&quot;, user_name, password ])
    end

    def self.authenticate_safely_simply(user_name, password)
      find(:first, :conditions =&gt; { :user_name =&gt; user_name, :password =&gt; password })
    end
  end
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from an
HTTP request. The <tt>authenticate_safely</tt> and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8217;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8217;s done by replacing the question marks with symbols and
supplying a hash with values for the matching symbol keys:
</p>
<pre>
  Company.find(:first, :conditions =&gt; [
    &quot;id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date&quot;,
    { :id =&gt; 3, :name =&gt; &quot;37signals&quot;, :division =&gt; &quot;First&quot;, :accounting_date =&gt; '2005-01-01' }
  ])
</pre>
<p>
Similarly, a simple hash without a statement will generate conditions based
on equality with the SQL AND operator. For instance:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :first_name =&gt; &quot;Harvey&quot;, :status =&gt; 1 })
  Student.find(:all, :conditions =&gt; params[:student])
</pre>
<p>
A range may be used in the hash to use the SQL BETWEEN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; 9..12 })
</pre>
<p>
An array may be used in the hash to use the SQL IN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; [9,11,12] })
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but sometimes you want to specialize this
behavior. This can be done by overwriting the default accessors (using the
same name as the attribute) and calling <tt>read_attribute(attr_name)</tt>
and <tt>write_attribute(attr_name, value)</tt> to actually change things.
Example:
</p>
<pre>
  class Song &lt; ActiveRecord::Base
    # Uses an integer of seconds to hold the length of the song

    def length=(minutes)
      write_attribute(:length, minutes.to_i * 60)
    end

    def length
      read_attribute(:length) / 60
    end
  end
</pre>
<p>
You can alternatively use <tt>self[:attribute]=(value)</tt> and
<tt>self[:attribute]</tt> instead of <tt>write_attribute(:attribute,
value)</tt> and <tt>read_attribute(:attribute)</tt> as a shorter form.
</p>
<h2>Attribute query methods</h2>
<p>
In addition to the basic accessors, query methods are also automatically
available on the Active Record object. Query methods allow you to test
whether an attribute value is present.
</p>
<p>
For example, an Active Record User with the <tt>name</tt> attribute has a
<tt>name?</tt> method that you can call to determine whether the user has a
name:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;)
  user.name? # =&gt; true

  anonymous = User.new(:name =&gt; &quot;&quot;)
  anonymous.name? # =&gt; false
</pre>
<h2>Accessing attributes before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course first. That can be done by
using the <tt>&lt;attribute&gt;_before_type_cast</tt> accessors that all
attributes have. For example, if your Account model has a <tt>balance</tt>
attribute, you can call <tt>account.balance_before_type_cast</tt> or
<tt>account.id_before_type_cast</tt>.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8217;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt> or
<tt>find_all_by_</tt>, so you get finders like
<tt>Person.find_by_user_name</tt>, <tt>Person.find_all_by_last_name</tt>,
and <tt>Payment.find_by_transaction_id</tt>. So instead of writing
<tt>Person.find(:first, :conditions =&gt; [&quot;user_name = ?&quot;,
user_name])</tt>, you just do <tt>Person.find_by_user_name(user_name)</tt>.
And instead of writing <tt>Person.find(:all, :conditions =&gt;
[&quot;last_name = ?&quot;, last_name])</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8217;s also possible to use multiple attributes in the same find by
separating them with &quot;<em>and</em>&quot;, so you get finders like
<tt>Person.find_by_user_name_and_password</tt> or even
<tt>Payment.find_by_purchaser_and_state_and_country</tt>. So instead of
writing <tt>Person.find(:first, :conditions =&gt; [&quot;user_name = ? AND
password = ?&quot;, user_name, password])</tt>, you just do
<tt>Person.find_by_user_name_and_password(user_name, password)</tt>.
</p>
<p>
It&#8217;s even possible to use all the additional parameters to find. For
example, the full interface for <tt>Payment.find_all_by_amount</tt> is
actually <tt>Payment.find_all_by_amount(amount, options)</tt>. And the full
interface to <tt>Person.find_by_user_name</tt> is actually
<tt>Person.find_by_user_name(user_name, options)</tt>. So you could call
<tt>Payment.find_all_by_amount(50, :order =&gt;
&quot;created_on&quot;)</tt>.
</p>
<p>
The same dynamic finder style can be used to create the object if it
doesn&#8217;t already exist. This dynamic finder is called with
<tt>find_or_create_by_</tt> and will return the object if it already exists
and otherwise creates it, then returns it. Protected attributes won&#8217;t
be set unless they are given in a block. For example:
</p>
<pre>
  # No 'Summer' tag exists
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.create(:name =&gt; &quot;Summer&quot;)

  # Now the 'Summer' tag does exist
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.find_by_name(&quot;Summer&quot;)

  # Now 'Bob' exist and is an 'admin'
  User.find_or_create_by_name('Bob', :age =&gt; 40) { |u| u.admin = true }
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a new
record without saving it first. Protected attributes won&#8217;t be setted
unless they are given in a block. For example:
</p>
<pre>
  # No 'Winter' tag exists
  winter = Tag.find_or_initialize_by_name(&quot;Winter&quot;)
  winter.new_record? # true
</pre>
<p>
To find by a subset of the attributes to be used for instantiating a new
object, pass a hash instead of a list of parameters. For example:
</p>
<pre>
  Tag.find_or_create_by_name(:name =&gt; &quot;rails&quot;, :creator =&gt; current_user)
</pre>
<p>
That will either find an existing tag named &quot;rails&quot;, or create a
new one while setting the user that created it.
</p>
<h2>Saving arrays, hashes, and other non-mappable objects in text columns</h2>
<p>
Active Record can serialize any object in text columns using YAML. To do
so, you must specify this with a call to the class method
<tt>serialize</tt>. This makes it possible to store arrays, hashes, and
other non-mappable objects without doing any additional work. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large })
  User.find(user.id).preferences # =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</pre>
<p>
You can also specify a class option as the second parameter that&#8217;ll
raise an exception if a serialized object is retrieved as a descendent of a
class not in the hierarchy. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch
</pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is named &quot;type&quot; (can be changed by
overwriting <tt><a
href="index.html?a=M001817&name=Base.inheritance_column">Base.inheritance_column</a></tt>).
This means that an inheritance looking like this:
</p>
<pre>
  class Company &lt; ActiveRecord::Base; end
  class Firm &lt; Company; end
  class Client &lt; Company; end
  class PriorityClient &lt; Client; end
</pre>
<p>
When you do <tt>Firm.create(:name =&gt; &quot;37signals&quot;)</tt>, this
record will be saved in the companies table with type = &quot;Firm&quot;.
You can then fetch this row again using <tt>Company.find(:first, &quot;name
= &#8216;37signals&#8217;&quot;)</tt> and it will return a Firm object.
</p>
<p>
If you don&#8217;t have a type column defined in your table, single-table
inheritance won&#8217;t be triggered. In that case, it&#8217;ll work just
like normal subclasses with no special magic for differentiating between
them or reloading the right type with find.
</p>
<p>
Note, all the attributes for all the cases are kept in the same table. Read
more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html"
target="_blank">http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through
ActiveRecord::Base.establish_connection and retrieved by
ActiveRecord::Base.connection. All classes inheriting from <a
href="index.html?a=C00000664&name=ActiveRecord::Base">ActiveRecord::Base</a>
will use this connection. But you can also set a class-specific connection.
For example, if Course is an <a
href="index.html?a=C00000664&name=ActiveRecord::Base">ActiveRecord::Base</a>,
but resides in a different database, you can just say
<tt>Course.establish_connection</tt> and Course and all of its subclasses
will use this connection instead.
</p>
<p>
This feature is implemented by keeping a connection pool in <a
href="index.html?a=C00000664&name=ActiveRecord::Base">ActiveRecord::Base</a>
that is a Hash indexed by the class. If a connection is requested, the
retrieve_connection method will go up the class-hierarchy until a
connection is found in the connection pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><a
href="index.html?a=C00000666&name=ActiveRecordError">ActiveRecordError</a>
- Generic error class and superclass of all other errors raised by Active
Record.

</li>
<li><a
href="index.html?a=C00000646&name=AdapterNotSpecified">AdapterNotSpecified</a>
- The configuration hash used in <tt>establish_connection</tt> didn&#8217;t
include an <tt>:adapter</tt> key.

</li>
<li><a href="index.html?a=C00000674&name=AdapterNotFound">AdapterNotFound</a> -
The <tt>:adapter</tt> key used in <tt>establish_connection</tt> specified a
non-existent adapter (or a bad spelling of an existing one).

</li>
<li><a
href="index.html?a=C00000652&name=AssociationTypeMismatch">AssociationTypeMismatch</a>
- The object assigned to the association wasn&#8217;t of the type specified
in the association definition.

</li>
<li><a
href="index.html?a=C00000665&name=SerializationTypeMismatch">SerializationTypeMismatch</a>
- The serialized object wasn&#8217;t of the class specified as the second
parameter.

</li>
<li><a
href="index.html?a=C00000669&name=ConnectionNotEstablished">ConnectionNotEstablished</a>+
- No connection has been established. Use <tt>establish_connection</tt>
before querying.

</li>
<li><a href="index.html?a=C00000659&name=RecordNotFound">RecordNotFound</a> -
No record responded to the <tt>find</tt> method. Either the row with the
given ID doesn&#8217;t exist or the row didn&#8217;t meet the additional
restrictions. Some <tt>find</tt> calls do not raise this exception to
signal nothing was found, please check its documentation for further
details.

</li>
<li><a href="index.html?a=C00000645&name=StatementInvalid">StatementInvalid</a>
- The database server rejected the SQL statement. The precise error is
added in the message.

</li>
<li><a
href="index.html?a=C00000673&name=MultiparameterAssignmentErrors">MultiparameterAssignmentErrors</a>
- Collection of errors that occurred during a mass assignment using the
<tt>attributes=</tt> method. The <tt>errors</tt> property of this exception
contains an array of <a
href="index.html?a=C00000651&name=AttributeAssignmentError">AttributeAssignmentError</a>
objects that should be inspected to determine which attributes triggered
the errors.

</li>
<li><a
href="index.html?a=C00000651&name=AttributeAssignmentError">AttributeAssignmentError</a>
- An error occurred while doing a mass assignment through the
<tt>attributes=</tt> method. You can inspect the <tt>attribute</tt>
property of the exception object to determine which attribute triggered the
error.

</li>
</ul>
<p>
<b>Note</b>: The attributes listed are class-level attributes (accessible
from both the class and instance level). So it&#8217;s possible to assign a
logger to the class through <tt>Base.logger=</tt> which will then be used
by all instances in the current object space.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001879&name===" >==</a></li>
  <li><a href="index.html?a=M001832&name====" >===</a></li>
  <li><a href="index.html?a=M001869&name=[]" >[]</a></li>
  <li><a href="index.html?a=M001870&name=[]=" >[]=</a></li>
  <li><a href="index.html?a=M001834&name=abstract_class?" >abstract_class?</a></li>
  <li><a href="index.html?a=M001843&name=aggregate_mapping" >aggregate_mapping</a></li>
  <li><a href="index.html?a=M001795&name=all" >all</a></li>
  <li><a href="index.html?a=M001810&name=attr_accessible" >attr_accessible</a></li>
  <li><a href="index.html?a=M001809&name=attr_protected" >attr_protected</a></li>
  <li><a href="index.html?a=M001811&name=attr_readonly" >attr_readonly</a></li>
  <li><a href="index.html?a=M001874&name=attribute_for_inspect" >attribute_for_inspect</a></li>
  <li><a href="index.html?a=M001877&name=attribute_names" >attribute_names</a></li>
  <li><a href="index.html?a=M001875&name=attribute_present?" >attribute_present?</a></li>
  <li><a href="index.html?a=M001872&name=attributes" >attributes</a></li>
  <li><a href="index.html?a=M001871&name=attributes=" >attributes=</a></li>
  <li><a href="index.html?a=M001873&name=attributes_before_type_cast" >attributes_before_type_cast</a></li>
  <li><a href="index.html?a=M001833&name=base_class" >base_class</a></li>
  <li><a href="index.html?a=M001858&name=becomes" >becomes</a></li>
  <li><a href="index.html?a=M001830&name=benchmark" >benchmark</a></li>
  <li><a href="index.html?a=M001851&name=cache_key" >cache_key</a></li>
  <li><a href="index.html?a=M001840&name=class_of_active_record_descendant" >class_of_active_record_descendant</a></li>
  <li><a href="index.html?a=M001857&name=clone" >clone</a></li>
  <li><a href="index.html?a=M001878&name=column_for_attribute" >column_for_attribute</a></li>
  <li><a href="index.html?a=M001825&name=column_names" >column_names</a></li>
  <li><a href="index.html?a=M001823&name=columns" >columns</a></li>
  <li><a href="index.html?a=M001824&name=columns_hash" >columns_hash</a></li>
  <li><a href="index.html?a=M001839&name=compute_type" >compute_type</a></li>
  <li><a href="index.html?a=M001826&name=content_columns" >content_columns</a></li>
  <li><a href="index.html?a=M001805&name=count_by_sql" >count_by_sql</a></li>
  <li><a href="index.html?a=M001798&name=create" >create</a></li>
  <li><a href="index.html?a=M001864&name=decrement" >decrement</a></li>
  <li><a href="index.html?a=M001865&name=decrement!" >decrement!</a></li>
  <li><a href="index.html?a=M001808&name=decrement_counter" >decrement_counter</a></li>
  <li><a href="index.html?a=M001800&name=delete" >delete</a></li>
  <li><a href="index.html?a=M001804&name=delete_all" >delete_all</a></li>
  <li><a href="index.html?a=M001828&name=descends_from_active_record?" >descends_from_active_record?</a></li>
  <li><a href="index.html?a=M001856&name=destroy" >destroy</a></li>
  <li><a href="index.html?a=M001801&name=destroy" >destroy</a></li>
  <li><a href="index.html?a=M001803&name=destroy_all" >destroy_all</a></li>
  <li><a href="index.html?a=M001880&name=eql?" >eql?</a></li>
  <li><a href="index.html?a=M001797&name=exists?" >exists?</a></li>
  <li><a href="index.html?a=M001844&name=expand_hash_conditions_for_aggregates" >expand_hash_conditions_for_aggregates</a></li>
  <li><a href="index.html?a=M001792&name=find" >find</a></li>
  <li><a href="index.html?a=M001796&name=find_by_sql" >find_by_sql</a></li>
  <li><a href="index.html?a=M001793&name=first" >first</a></li>
  <li><a href="index.html?a=M001882&name=freeze" >freeze</a></li>
  <li><a href="index.html?a=M001883&name=frozen?" >frozen?</a></li>
  <li><a href="index.html?a=M001876&name=has_attribute?" >has_attribute?</a></li>
  <li><a href="index.html?a=M001881&name=hash" >hash</a></li>
  <li><a href="index.html?a=M001849&name=id" >id</a></li>
  <li><a href="index.html?a=M001852&name=id=" >id=</a></li>
  <li><a href="index.html?a=M001862&name=increment" >increment</a></li>
  <li><a href="index.html?a=M001863&name=increment!" >increment!</a></li>
  <li><a href="index.html?a=M001807&name=increment_counter" >increment_counter</a></li>
  <li><a href="index.html?a=M001817&name=inheritance_column" >inheritance_column</a></li>
  <li><a href="index.html?a=M001829&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M001886&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M001794&name=last" >last</a></li>
  <li><a href="index.html?a=M001848&name=new" >new</a></li>
  <li><a href="index.html?a=M001853&name=new_record?" >new_record?</a></li>
  <li><a href="index.html?a=M001816&name=primary_key" >primary_key</a></li>
  <li><a href="index.html?a=M001885&name=readonly!" >readonly!</a></li>
  <li><a href="index.html?a=M001884&name=readonly?" >readonly?</a></li>
  <li><a href="index.html?a=M001812&name=readonly_attributes" >readonly_attributes</a></li>
  <li><a href="index.html?a=M001868&name=reload" >reload</a></li>
  <li><a href="index.html?a=M001887&name=require_mysql" >require_mysql</a></li>
  <li><a href="index.html?a=M001827&name=reset_column_information" >reset_column_information</a></li>
  <li><a href="index.html?a=M001835&name=respond_to?" >respond_to?</a></li>
  <li><a href="index.html?a=M001847&name=sanitize_sql_array" >sanitize_sql_array</a></li>
  <li><a href="index.html?a=M001842&name=sanitize_sql_for_assignment" >sanitize_sql_for_assignment</a></li>
  <li><a href="index.html?a=M001841&name=sanitize_sql_for_conditions" >sanitize_sql_for_conditions</a></li>
  <li><a href="index.html?a=M001846&name=sanitize_sql_hash_for_assignment" >sanitize_sql_hash_for_assignment</a></li>
  <li><a href="index.html?a=M001845&name=sanitize_sql_hash_for_conditions" >sanitize_sql_hash_for_conditions</a></li>
  <li><a href="index.html?a=M001854&name=save" >save</a></li>
  <li><a href="index.html?a=M001855&name=save!" >save!</a></li>
  <li><a href="index.html?a=M001813&name=serialize" >serialize</a></li>
  <li><a href="index.html?a=M001814&name=serialized_attributes" >serialized_attributes</a></li>
  <li><a href="index.html?a=M001820&name=set_inheritance_column" >set_inheritance_column</a></li>
  <li><a href="index.html?a=M001819&name=set_primary_key" >set_primary_key</a></li>
  <li><a href="index.html?a=M001821&name=set_sequence_name" >set_sequence_name</a></li>
  <li><a href="index.html?a=M001818&name=set_table_name" >set_table_name</a></li>
  <li><a href="index.html?a=M001831&name=silence" >silence</a></li>
  <li><a href="index.html?a=M001836&name=sti_name" >sti_name</a></li>
  <li><a href="index.html?a=M001822&name=table_exists?" >table_exists?</a></li>
  <li><a href="index.html?a=M001815&name=table_name" >table_name</a></li>
  <li><a href="index.html?a=M001850&name=to_param" >to_param</a></li>
  <li><a href="index.html?a=M001866&name=toggle" >toggle</a></li>
  <li><a href="index.html?a=M001867&name=toggle!" >toggle!</a></li>
  <li><a href="index.html?a=M001799&name=update" >update</a></li>
  <li><a href="index.html?a=M001802&name=update_all" >update_all</a></li>
  <li><a href="index.html?a=M001859&name=update_attribute" >update_attribute</a></li>
  <li><a href="index.html?a=M001860&name=update_attributes" >update_attributes</a></li>
  <li><a href="index.html?a=M001861&name=update_attributes!" >update_attributes!</a></li>
  <li><a href="index.html?a=M001806&name=update_counters" >update_counters</a></li>
  <li><a href="index.html?a=M001838&name=with_exclusive_scope" >with_exclusive_scope</a></li>
  <li><a href="index.html?a=M001837&name=with_scope" >with_scope</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">VALID_FIND_OPTIONS</td>
    <td>=</td>
    <td class="attr-value">[ :conditions, :include, :joins, :limit, :offset,                                :order, :select, :readonly, :group, :from, :lock ]</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>abstract_class</td>
    <td class='attr-desc'>
Set this to true if this is an abstract class (see <tt><a
href="index.html?a=M001834&name=abstract_class?">abstract_class?</a></tt>).

</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M001832" class="method">
  <div id="M001832_title" class="title">
    <b>===</b>(object)
  </div>
  <div class="description">
  <p>
Overwrite the default class equality method to provide support for
association proxies.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001832_source')" id="l_M001832_source">show source</a> ]</p>
  <div id="M001832_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1273</span>
1273:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">object</span>)
1274:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword kw">self</span>)
1275:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001834" class="method">
  <div id="M001834_title" class="title">
    <b>abstract_class?</b>()
  </div>
  <div class="description">
  <p>
Returns whether this class is a base AR class. If A is a base class and B
descends from A, then B.base_class will return B.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001834_source')" id="l_M001834_source">show source</a> ]</p>
  <div id="M001834_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1289</span>
1289:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abstract_class?</span>
1290:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@abstract_class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@abstract_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1291:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001795" class="method">
  <div id="M001795_title" class="title">
    <b>all</b>(*args)
  </div>
  <div class="description">
  <p>
This is an alias for find(:all). You can pass in all the same arguments to
this method as you can to find(:all)
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001795_source')" id="l_M001795_source">show source</a> ]</p>
  <div id="M001795_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 559</span>
559:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
560:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
561:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001810" class="method">
  <div id="M001810_title" class="title">
    <b>attr_accessible</b>(*attributes)
  </div>
  <div class="description">
  <p>
Specifies a white list of model attributes that can be set via
mass-assignment, such as <tt>new(attributes)</tt>, <tt><a
href="index.html?a=M001860&name=update_attributes">update_attributes</a>(attributes)</tt>,
or <tt>attributes=(attributes)</tt>
</p>
<p>
This is the opposite of the <tt><a
href="index.html?a=M001809&name=attr_protected">attr_protected</a></tt>
macro: Mass-assignment will only set attributes in this list, to assign to
the rest of attributes you can use direct writer methods. This is meant to
protect sensitive attributes from being overwritten by malicious users
tampering with URLs or forms. If you&#8217;d rather start from an all-open
default and restrict attributes as needed, have a look at <tt><a
href="index.html?a=M001809&name=attr_protected">attr_protected</a></tt>.
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_accessible :name, :nickname
  end

  customer = Customer.new(:name =&gt; &quot;David&quot;, :nickname =&gt; &quot;Dave&quot;, :credit_rating =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { :name =&gt; &quot;Jolly fellow&quot;, :credit_rating =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001810_source')" id="l_M001810_source">show source</a> ]</p>
  <div id="M001810_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 934</span>
934:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_accessible</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
935:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_accessible&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">accessible_attributes</span> <span class="ruby-operator">||</span> []))
936:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001809" class="method">
  <div id="M001809_title" class="title">
    <b>attr_protected</b>(*attributes)
  </div>
  <div class="description">
  <p>
Attributes named in this macro are protected from mass-assignment, such as
<tt>new(attributes)</tt>, <tt><a
href="index.html?a=M001860&name=update_attributes">update_attributes</a>(attributes)</tt>,
or <tt>attributes=(attributes)</tt>.
</p>
<p>
Mass-assignment to these attributes will simply be ignored, to assign to
them you can use direct writer methods. This is meant to protect sensitive
attributes from being overwritten by malicious users tampering with URLs or
forms.
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_protected :credit_rating
  end

  customer = Customer.new(&quot;name&quot; =&gt; David, &quot;credit_rating&quot; =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { &quot;description&quot; =&gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
<p>
To start from an all-closed default and enable attributes as needed, have a
look at <tt><a
href="index.html?a=M001810&name=attr_accessible">attr_accessible</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001809_source')" id="l_M001809_source">show source</a> ]</p>
  <div id="M001809_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 901</span>
901:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_protected</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
902:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_protected&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">protected_attributes</span> <span class="ruby-operator">||</span> []))
903:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001811" class="method">
  <div id="M001811_title" class="title">
    <b>attr_readonly</b>(*attributes)
  </div>
  <div class="description">
  <p>
Attributes listed as readonly can be set for a new record, but will be
ignored in database updates afterwards.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001811_source')" id="l_M001811_source">show source</a> ]</p>
  <div id="M001811_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 944</span>
944:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_readonly</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
945:          <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_readonly&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">readonly_attributes</span> <span class="ruby-operator">||</span> []))
946:        <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001833" class="method">
  <div id="M001833_title" class="title">
    <b>base_class</b>()
  </div>
  <div class="description">
  <p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001833_source')" id="l_M001833_source">show source</a> ]</p>
  <div id="M001833_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1280</span>
1280:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base_class</span>
1281:         <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-keyword kw">self</span>)
1282:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001830" class="method">
  <div id="M001830_title" class="title">
    <b>benchmark</b>(title, log_level = Logger::DEBUG, use_silence = true) {|| ...}
  </div>
  <div class="description">
  <p>
Log and benchmark multiple statements in a single block. Example:
</p>
<pre>
  Project.benchmark(&quot;Creating project&quot;) do
    project = Project.create(&quot;name&quot; =&gt; &quot;stuff&quot;)
    project.create_manager(&quot;name&quot; =&gt; &quot;David&quot;)
    project.milestones &lt;&lt; Milestone.find(:all)
  end
</pre>
<p>
The benchmark is only recorded if the current level of the logger is less
than or equal to the <tt>log_level</tt>, which makes it easy to include
benchmarking statements in production software that will remain inexpensive
because the benchmark will only be conducted if the log level is low
enough.
</p>
<p>
The logging of the multiple statements is turned off unless
<tt>use_silence</tt> is set to false.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001830_source')" id="l_M001830_source">show source</a> ]</p>
  <div id="M001830_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1253</span>
1253:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">benchmark</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">log_level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-identifier">use_silence</span> = <span class="ruby-keyword kw">true</span>)
1254:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">log_level</span>
1255:           <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
1256:           <span class="ruby-identifier">seconds</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> { <span class="ruby-identifier">result</span> = <span class="ruby-identifier">use_silence</span> <span class="ruby-value">? </span><span class="ruby-identifier">silence</span> { <span class="ruby-keyword kw">yield</span> } <span class="ruby-operator">:</span> <span class="ruby-keyword kw">yield</span> }
1257:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">log_level</span>, <span class="ruby-node">&quot;#{title} (#{'%.5f' % seconds})&quot;</span>)
1258:           <span class="ruby-identifier">result</span>
1259:         <span class="ruby-keyword kw">else</span>
1260:           <span class="ruby-keyword kw">yield</span>
1261:         <span class="ruby-keyword kw">end</span>
1262:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001825" class="method">
  <div id="M001825_title" class="title">
    <b>column_names</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column names as strings.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001825_source')" id="l_M001825_source">show source</a> ]</p>
  <div id="M001825_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1161</span>
1161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_names</span>
1162:         <span class="ruby-ivar">@column_names</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> }
1163:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001823" class="method">
  <div id="M001823_title" class="title">
    <b>columns</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column objects for the table associated with this
class.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001823_source')" id="l_M001823_source">show source</a> ]</p>
  <div id="M001823_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1147</span>
1147:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>
1148:         <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@columns</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@columns</span>
1149:           <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{name} Columns&quot;</span>)
1150:           <span class="ruby-ivar">@columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">primary</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span> }
1151:         <span class="ruby-keyword kw">end</span>
1152:         <span class="ruby-ivar">@columns</span>
1153:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001824" class="method">
  <div id="M001824_title" class="title">
    <b>columns_hash</b>()
  </div>
  <div class="description">
  <p>
Returns a hash of column objects for the table associated with this class.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001824_source')" id="l_M001824_source">show source</a> ]</p>
  <div id="M001824_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1156</span>
1156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns_hash</span>
1157:         <span class="ruby-ivar">@columns_hash</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">column</span>; <span class="ruby-identifier">hash</span> }
1158:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001826" class="method">
  <div id="M001826_title" class="title">
    <b>content_columns</b>()
  </div>
  <div class="description">
  <p>
Returns an array of column objects where the primary id, all columns ending
in &quot;_id&quot; or &quot;_count&quot;, and columns used for single table
inheritance have been removed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001826_source')" id="l_M001826_source">show source</a> ]</p>
  <div id="M001826_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1167</span>
1167:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_columns</span>
1168:         <span class="ruby-ivar">@content_columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">primary</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(_id|_count)$/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">inheritance_column</span> }
1169:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001805" class="method">
  <div id="M001805_title" class="title">
    <b>count_by_sql</b>(sql)
  </div>
  <div class="description">
  <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part. The use of this method should be restricted to
complicated SQL queries that can&#8217;t be executed using the
ActiveRecord::Calculations class methods. Look into those before using
this.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>sql</tt> - An SQL statement which should return a count query from the
database, see the example below.

</li>
</ul>
<h4>Examples</h4>
<pre>
  Product.count_by_sql &quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001805_source')" id="l_M001805_source">show source</a> ]</p>
  <div id="M001805_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 805</span>
805:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_by_sql</span>(<span class="ruby-identifier">sql</span>)
806:         <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sanitize_conditions</span>(<span class="ruby-identifier">sql</span>)
807:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Count&quot;</span>).<span class="ruby-identifier">to_i</span>
808:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001798" class="method">
  <div id="M001798_title" class="title">
    <b>create</b>(attributes = nil) {|object| ...}
  </div>
  <div class="description">
  <p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<p>
The <tt>attributes</tt> parameter can be either be a Hash or an Array of
Hashes. These Hashes describe the attributes on the objects that are to be
created.
</p>
<h4>Examples</h4>
<pre>
  # Create a single new object
  User.create(:first_name =&gt; 'Jamie')

  # Create an Array of new objects
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }])

  # Create a single object and pass it into a block to set other attributes.
  User.create(:first_name =&gt; 'Jamie') do |u|
    u.is_admin = false
  end

  # Creating an Array of new objects using a block, where the block is executed for each object:
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }]) do |u|
    u.is_admin = false
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001798_source')" id="l_M001798_source">show source</a> ]</p>
  <div id="M001798_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 638</span>
638:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
639:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
640:           <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
641:         <span class="ruby-keyword kw">else</span>
642:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
643:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">object</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
644:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
645:           <span class="ruby-identifier">object</span>
646:         <span class="ruby-keyword kw">end</span>
647:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001808" class="method">
  <div id="M001808_title" class="title">
    <b>decrement_counter</b>(counter_name, id)
  </div>
  <div class="description">
  <p>
Decrement a number field by one, usually representing a count.
</p>
<p>
This works the same as <a
href="index.html?a=M001807&name=increment_counter">increment_counter</a>
but reduces the column value by 1 instead of increasing it.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>counter_name</tt> - The name of the field that should be decremented.

</li>
<li><tt>id</tt> - The id of the object that should be decremented.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Decrement the post_count column for the record with an id of 5
  DiscussionBoard.decrement_counter(:post_count, 5)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001808_source')" id="l_M001808_source">show source</a> ]</p>
  <div id="M001808_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 872</span>
872:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
873:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>)
874:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001800" class="method">
  <div id="M001800_title" class="title">
    <b>delete</b>(id)
  </div>
  <div class="description">
  <p>
Delete an object (or multiple objects) where the <tt>id</tt> given matches
the <a href="index.html?a=M001816&name=primary_key">primary_key</a>. A SQL
<tt>DELETE</tt> command is executed on the database which means that no
callbacks are fired off running this. This is an efficient method of
deleting records that don&#8217;t need cleaning up after or other actions
to be taken.
</p>
<p>
Objects are <em>not</em> instantiated with this method.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>id</tt> - Can be either an Integer or an Array of Integers.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Delete a single object
  Todo.delete(1)

  # Delete multiple objects
  todos = [1,2,3]
  Todo.delete(todos)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001800_source')" id="l_M001800_source">show source</a> ]</p>
  <div id="M001800_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 694</span>
694:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>)
695:         <span class="ruby-identifier">delete_all</span>([ <span class="ruby-node">&quot;#{connection.quote_column_name(primary_key)} IN (?)&quot;</span>, <span class="ruby-identifier">id</span> ])
696:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001804" class="method">
  <div id="M001804_title" class="title">
    <b>delete_all</b>(conditions = nil)
  </div>
  <div class="description">
  <p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the destroy method and invoking
callbacks. This is a single SQL query, much more efficient than <a
href="index.html?a=M001803&name=destroy_all">destroy_all</a>.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>conditions</tt> - Conditions are specified the same way as with
<tt>find</tt> method.

</li>
</ul>
<h4>Example</h4>
<pre>
  Post.delete_all &quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;
</pre>
<p>
This deletes the affected posts all at once with a single DELETE query. If
you need to destroy dependent associations or call your before_ or
after_destroy callbacks, use the <tt><a
href="index.html?a=M001803&name=destroy_all">destroy_all</a></tt> method
instead.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001804_source')" id="l_M001804_source">show source</a> ]</p>
  <div id="M001804_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 788</span>
788:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
789:         <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;DELETE FROM #{quoted_table_name} &quot;</span>
790:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>))
791:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Delete all&quot;</span>)
792:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001828" class="method">
  <div id="M001828_title" class="title">
    <b>descends_from_active_record?</b>()
  </div>
  <div class="description">
  <p>
True if this isn&#8217;t a concrete subclass needing a STI type condition.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001828_source')" id="l_M001828_source">show source</a> ]</p>
  <div id="M001828_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1203</span>
1203:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descends_from_active_record?</span>
1204:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1205:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1206:         <span class="ruby-keyword kw">else</span>
1207:           <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
1208:         <span class="ruby-keyword kw">end</span>
1209:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001801" class="method">
  <div id="M001801_title" class="title">
    <b>destroy</b>(id)
  </div>
  <div class="description">
  <p>
Destroy an object (or multiple objects) that has the given id, the object
is instantiated first, therefore all callbacks and filters are fired off
before the object is deleted. This method is less efficient than
ActiveRecord#delete but allows cleanup methods and other actions to be run.
</p>
<p>
This essentially finds the object (or multiple objects) with the given id,
creates a new object from the attributes, and then calls destroy on it.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>id</tt> - Can be either an Integer or an Array of Integers.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Destroy a single object
  Todo.destroy(1)

  # Destroy multiple objects
  todos = [1,2,3]
  Todo.destroy(todos)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001801_source')" id="l_M001801_source">show source</a> ]</p>
  <div id="M001801_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 717</span>
717:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">id</span>)
718:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
719:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">one_id</span>) }
720:         <span class="ruby-keyword kw">else</span>
721:           <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
722:         <span class="ruby-keyword kw">end</span>
723:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001803" class="method">
  <div id="M001803_title" class="title">
    <b>destroy_all</b>(conditions = nil)
  </div>
  <div class="description">
  <p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling the destroy method. This means at least 2*N database
queries to destroy N records, so avoid <a
href="index.html?a=M001803&name=destroy_all">destroy_all</a> if you are
deleting many records. If you want to simply delete records without
worrying about dependent associations or callbacks, use the much faster
<tt><a href="index.html?a=M001804&name=delete_all">delete_all</a></tt>
method instead.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>conditions</tt> - Conditions are specified the same way as with
<tt>find</tt> method.

</li>
</ul>
<h4>Example</h4>
<pre>
  Person.destroy_all &quot;last_login &lt; '2004-04-04'&quot;
</pre>
<p>
This loads and destroys each person one by one, including its dependent
associations and before_ and after_destroy callbacks.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001803_source')" id="l_M001803_source">show source</a> ]</p>
  <div id="M001803_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 770</span>
770:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
771:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">destroy</span> }
772:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001797" class="method">
  <div id="M001797_title" class="title">
    <b>exists?</b>(id_or_conditions)
  </div>
  <div class="description">
  <p>
Checks whether a record exists in the database that matches conditions
given. These conditions can either be a single integer representing a
primary key id to be found, or a condition to be matched like using
ActiveRecord#find.
</p>
<p>
The <tt>id_or_conditions</tt> parameter can be an Integer or a String if
you want to search the primary key column of the table for a matching id,
or if you&#8217;re looking to match against a condition you can use an
Array or a Hash.
</p>
<p>
Possible gotcha: You can&#8217;t pass in a condition as a string e.g.
&quot;name = &#8216;Jamie&#8217;&quot;, this would be sanitized and then
queried against the primary key column as &quot;id = &#8216;name =
\&#8217;Jamie&quot;
</p>
<h4>Examples</h4>
<pre>
  Person.exists?(5)
  Person.exists?('5')
  Person.exists?(:name =&gt; &quot;David&quot;)
  Person.exists?(['name LIKE ?', &quot;%#{query}%&quot;])
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001797_source')" id="l_M001797_source">show source</a> ]</p>
  <div id="M001797_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 605</span>
605:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">id_or_conditions</span>)
606:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(
607:           <span class="ruby-identifier">construct_finder_sql</span>(
608:             <span class="ruby-identifier">:select</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{quoted_table_name}.#{primary_key}&quot;</span>,
609:             <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">expand_id_conditions</span>(<span class="ruby-identifier">id_or_conditions</span>),
610:             <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
611:           ),
612:           <span class="ruby-node">&quot;#{name} Exists&quot;</span>
613:         ).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
614:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001792" class="method">
  <div id="M001792_title" class="title">
    <b>find</b>(*args)
  </div>
  <div class="description">
  <p>
Find operates with four different retrieval approaches:
</p>
<ul>
<li>Find by id - This can either be a specific id (1), a list of ids (1, 5, 6),
or an array of ids ([5, 6, 10]). If no record can be found for all of the
listed ids, then <a
href="index.html?a=C00000659&name=RecordNotFound">RecordNotFound</a> will
be raised.

</li>
<li>Find first - This will return the first record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:first,
*args)</tt> or its shortcut <tt>Model.first(*args)</tt>.

</li>
<li>Find last - This will return the last record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:last,
*args)</tt> or its shortcut <tt>Model.last(*args)</tt>.

</li>
<li>Find all - This will return all the records matched by the options used. If
no records are found, an empty array is returned. Use <tt>Model.find(:all,
*args)</tt> or its shortcut <tt>Model.all(*args)</tt>.

</li>
</ul>
<p>
All approaches accept an options hash as their last parameter.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>:conditions</tt> - An SQL fragment like &quot;administrator = 1&quot;
or <tt>[ &quot;user_name = ?&quot;, username ]</tt>. See conditions in the
intro.

</li>
<li><tt>:order</tt> - An SQL fragment like &quot;created_at DESC, name&quot;.

</li>
<li><tt>:group</tt> - An attribute name by which the result should be grouped.
Uses the <tt>GROUP BY</tt> SQL-clause.

</li>
<li><tt>:limit</tt> - An integer determining the limit on the number of rows
that should be returned.

</li>
<li><tt>:offset</tt> - An integer determining the offset from where the rows
should be fetched. So at 5, it would skip rows 0 through 4.

</li>
<li><tt>:joins</tt> - Either an SQL fragment for additional joins like
&quot;LEFT JOIN comments ON comments.post_id = id&quot; (rarely needed) or
named associations in the same form used for the <tt>:include</tt> option,
which will perform an <tt>INNER JOIN</tt> on the associated table(s). If
the value is a string, then the records will be returned read-only since
they will have attributes that do not correspond to the table&#8217;s
columns. Pass <tt>:readonly =&gt; false</tt> to override.

</li>
<li><tt>:include</tt> - Names associations that should be loaded alongside. The
symbols named refer to already defined associations. See eager loading
under Associations.

</li>
<li><tt>:select</tt> - By default, this is &quot;*&quot; as in &quot;SELECT *
FROM&quot;, but can be changed if you, for example, want to do a join but
not include the joined columns.

</li>
<li><tt>:from</tt> - By default, this is the table name of the class, but can
be changed to an alternate table name (or even the name of a database
view).

</li>
<li><tt>:readonly</tt> - Mark the returned records read-only so they cannot be
saved or updated.

</li>
<li><tt>:lock</tt> - An SQL fragment like &quot;FOR UPDATE&quot; or &quot;LOCK
IN SHARE MODE&quot;. <tt>:lock =&gt; true</tt> gives connection&#8217;s
default exclusive lock, usually &quot;FOR UPDATE&quot;.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # find by id
  Person.find(1)       # returns the object for ID = 1
  Person.find(1, 2, 6) # returns an array for objects with IDs in (1, 2, 6)
  Person.find([7, 17]) # returns an array for objects with IDs in (7, 17)
  Person.find([1])     # returns an array for the object with ID = 1
  Person.find(1, :conditions =&gt; &quot;administrator = 1&quot;, :order =&gt; &quot;created_on DESC&quot;)
</pre>
<p>
Note that returned records may not be in the same order as the ids you
provide since database rows are unordered. Give an explicit <tt>:order</tt>
to ensure the results are sorted.
</p>
<h4>Examples</h4>
<pre>
  # find first
  Person.find(:first) # returns the first object fetched by SELECT * FROM people
  Person.find(:first, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:first, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)

  # find last
  Person.find(:last) # returns the last object fetched by SELECT * FROM people
  Person.find(:last, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:last, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)

  # find all
  Person.find(:all) # returns an array of objects for all the rows fetched by SELECT * FROM people
  Person.find(:all, :conditions =&gt; [ &quot;category IN (?)&quot;, categories], :limit =&gt; 50)
  Person.find(:all, :conditions =&gt; { :friends =&gt; [&quot;Bob&quot;, &quot;Steve&quot;, &quot;Fred&quot;] }
  Person.find(:all, :offset =&gt; 10, :limit =&gt; 10)
  Person.find(:all, :include =&gt; [ :account, :friends ])
  Person.find(:all, :group =&gt; &quot;category&quot;)
</pre>
<p>
Example for find with a lock: Imagine two concurrent transactions: each
will read <tt>person.visits == 2</tt>, add 1 to it, and save, resulting in
two saves of <tt>person.visits = 3</tt>. By locking the row, the second
transaction has to wait until the first is finished; we get the expected
<tt>person.visits == 4</tt>.
</p>
<pre>
  Person.transaction do
    person = Person.find(1, :lock =&gt; true)
    person.visits += 1
    person.save!
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001792_source')" id="l_M001792_source">show source</a> ]</p>
  <div id="M001792_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 532</span>
532:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
533:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
534:         <span class="ruby-identifier">validate_find_options</span>(<span class="ruby-identifier">options</span>)
535:         <span class="ruby-identifier">set_readonly_option!</span>(<span class="ruby-identifier">options</span>)
536: 
537:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
538:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:first</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_initial</span>(<span class="ruby-identifier">options</span>)
539:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:last</span>  <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_last</span>(<span class="ruby-identifier">options</span>)
540:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:all</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_every</span>(<span class="ruby-identifier">options</span>)
541:           <span class="ruby-keyword kw">else</span>             <span class="ruby-identifier">find_from_ids</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">options</span>)
542:         <span class="ruby-keyword kw">end</span>
543:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001796" class="method">
  <div id="M001796_title" class="title">
    <b>find_by_sql</b>(sql)
  </div>
  <div class="description">
  <p>
Executes a custom SQL query against your database and returns all the
results. The results will be returned as an array with columns requested
encapsulated as attributes of the model you call this method from. If you
call +Product.find_by_sql+ then the results will be returned in a Product
object with the attributes you specified in the SQL query.
</p>
<p>
If you call a complicated SQL query which spans multiple tables the columns
specified by the SELECT will be attributes of the model, whether or not
they are columns of the corresponding table.
</p>
<p>
The <tt>sql</tt> parameter is a full SQL query as a string. It will be
called as is, there will be no database agnostic conversions performed.
This should be a last resort because using, for example, MySQL specific
terms will lock you to using that particular database engine or require you
to change your call if you switch engines
</p>
<h4>Examples</h4>
<pre>
  # A simple SQL query spanning multiple tables
  Post.find_by_sql &quot;SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;title&quot;=&gt;&quot;Ruby Meetup&quot;, &quot;first_name&quot;=&gt;&quot;Quentin&quot;}&gt;, ...]

  # You can use the same string replacement techniques as you can with ActiveRecord#find
  Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;first_name&quot;=&gt;&quot;The Cheap Man Buys Twice&quot;}&gt;, ...]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001796_source')" id="l_M001796_source">show source</a> ]</p>
  <div id="M001796_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 585</span>
585:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">sql</span>)
586:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">sql</span>), <span class="ruby-node">&quot;#{name} Load&quot;</span>).<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instantiate</span>(<span class="ruby-identifier">record</span>) }
587:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001793" class="method">
  <div id="M001793_title" class="title">
    <b>first</b>(*args)
  </div>
  <div class="description">
  <p>
A convenience wrapper for <tt>find(:first, *args)</tt>. You can pass in all
the same arguments to this method as you can to <tt>find(:first)</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001793_source')" id="l_M001793_source">show source</a> ]</p>
  <div id="M001793_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 547</span>
547:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">first</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
548:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
549:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001807" class="method">
  <div id="M001807_title" class="title">
    <b>increment_counter</b>(counter_name, id)
  </div>
  <div class="description">
  <p>
Increment a number field by one, usually representing a count.
</p>
<p>
This is used for caching aggregate values, so that they don&#8217;t need to
be computed every time. For example, a DiscussionBoard may cache post_count
and comment_count otherwise every time the board is shown it would have to
run an SQL query to find how many posts and comments there are.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>counter_name</tt> - The name of the field that should be incremented.

</li>
<li><tt>id</tt> - The id of the object that should be incremented.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Increment the post_count column for the record with an id of 5
  DiscussionBoard.increment_counter(:post_count, 5)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001807_source')" id="l_M001807_source">show source</a> ]</p>
  <div id="M001807_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 855</span>
855:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
856:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
857:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001817" class="method">
  <div id="M001817_title" class="title">
    <b>inheritance_column</b>()
  </div>
  <div class="description">
  <p>
Defines the column name for use with single table inheritance &#8212; can
be set in subclasses like so: self.inheritance_column = &quot;type_id&quot;
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001817_source')" id="l_M001817_source">show source</a> ]</p>
  <div id="M001817_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1061</span>
1061:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inheritance_column</span>
1062:         <span class="ruby-ivar">@inheritance_column</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;type&quot;</span>.<span class="ruby-identifier">freeze</span>
1063:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001829" class="method">
  <div id="M001829_title" class="title">
    <b>inspect</b>()
  </div>
  <div class="description">
  <p>
Returns a string like &#8216;Post id:integer, title:string,
body:text&#8217;
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001829_source')" id="l_M001829_source">show source</a> ]</p>
  <div id="M001829_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1217</span>
1217:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
1218:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
1219:           <span class="ruby-keyword kw">super</span>
1220:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">abstract_class?</span>
1221:           <span class="ruby-node">&quot;#{super}(abstract)&quot;</span>
1222:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">table_exists?</span>
1223:           <span class="ruby-identifier">attr_list</span> = <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.name}: #{c.type}&quot;</span> } <span class="ruby-operator">*</span> <span class="ruby-value str">', '</span>
1224:           <span class="ruby-node">&quot;#{super}(#{attr_list})&quot;</span>
1225:         <span class="ruby-keyword kw">else</span>
1226:           <span class="ruby-node">&quot;#{super}(Table doesn't exist)&quot;</span>
1227:         <span class="ruby-keyword kw">end</span>
1228:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001794" class="method">
  <div id="M001794_title" class="title">
    <b>last</b>(*args)
  </div>
  <div class="description">
  <p>
A convenience wrapper for <tt>find(:last, *args)</tt>. You can pass in all
the same arguments to this method as you can to <tt>find(:last)</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001794_source')" id="l_M001794_source">show source</a> ]</p>
  <div id="M001794_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 553</span>
553:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">last</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
554:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:last</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
555:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001848" class="method">
  <div id="M001848_title" class="title">
    <b>new</b>(attributes = nil) {|self if block_given?| ...}
  </div>
  <div class="description">
  <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names). In both instances,
valid attribute keys are determined by the column names of the associated
table &#8212; hence you can&#8217;t have attributes that aren&#8217;t part
of the table columns.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001848_source')" id="l_M001848_source">show source</a> ]</p>
  <div id="M001848_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2136</span>
2136:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>)
2137:         <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">attributes_from_column_definition</span>
2138:         <span class="ruby-ivar">@attributes_cache</span> = {}
2139:         <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">true</span>
2140:         <span class="ruby-identifier">ensure_proper_type</span>
2141:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">nil?</span>
2142:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scope</span>, <span class="ruby-identifier">:create</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">att</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{att}=&quot;</span>, <span class="ruby-identifier">value</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scoped?</span>, <span class="ruby-identifier">:create</span>)
2143:         <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
2144:         <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_initialize</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to_without_attributes?</span>(<span class="ruby-identifier">:after_initialize</span>)
2145:         <span class="ruby-identifier">result</span>
2146:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001816" class="method">
  <div id="M001816_title" class="title">
    <b>primary_key</b>()
  </div>
  <div class="description">
  <p>
Defines the primary key field &#8212; can be overridden in subclasses.
Overwriting will negate any effect of the primary_key_prefix_type setting,
though.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001816_source')" id="l_M001816_source">show source</a> ]</p>
  <div id="M001816_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1038</span>
1038:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>
1039:         <span class="ruby-identifier">reset_primary_key</span>
1040:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001812" class="method">
  <div id="M001812_title" class="title">
    <b>readonly_attributes</b>()
  </div>
  <div class="description">
  <p>
Returns an array of all the attributes that have been specified as
readonly.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001812_source')" id="l_M001812_source">show source</a> ]</p>
  <div id="M001812_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 949</span>
949:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly_attributes</span>
950:          <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_readonly&quot;</span>)
951:        <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001887" class="method">
  <div id="M001887_title" class="title">
    <b>require_mysql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001887_source')" id="l_M001887_source">show source</a> ]</p>
  <div id="M001887_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 47</span>
47:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">require_mysql</span>
48:       <span class="ruby-comment cmt"># Include the MySQL driver if one hasn't already been loaded</span>
49:       <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">Mysql</span>
50:         <span class="ruby-keyword kw">begin</span>
51:           <span class="ruby-identifier">require_library_or_gem</span> <span class="ruby-value str">'mysql'</span>
52:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cannot_require_mysql</span>
53:           <span class="ruby-comment cmt"># Use the bundled Ruby/MySQL driver if no driver is already in place</span>
54:           <span class="ruby-keyword kw">begin</span>
55:             <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;You're using the Ruby-based MySQL library that ships with Rails. This library will be REMOVED FROM RAILS 2.2. Please switch to the offical mysql gem: `gem install mysql`&quot;</span>, <span class="ruby-identifier">caller</span>
56: 
57:             <span class="ruby-identifier">require</span> <span class="ruby-value str">'active_record/vendor/mysql'</span>
58:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
59:             <span class="ruby-identifier">raise</span> <span class="ruby-identifier">cannot_require_mysql</span>
60:           <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-keyword kw">end</span>
62:       <span class="ruby-keyword kw">end</span>
63: 
64:       <span class="ruby-comment cmt"># Define Mysql::Result.all_hashes</span>
65:       <span class="ruby-constant">MysqlCompat</span>.<span class="ruby-identifier">define_all_hashes_method!</span>
66:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001827" class="method">
  <div id="M001827_title" class="title">
    <b>reset_column_information</b>()
  </div>
  <div class="description">
  <p>
Resets all the cached information about columns, which will cause them to
be reloaded on the next request.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001827_source')" id="l_M001827_source">show source</a> ]</p>
  <div id="M001827_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1186</span>
1186:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_column_information</span>
1187:         <span class="ruby-identifier">generated_methods</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">name</span>) }
1188:         <span class="ruby-ivar">@column_names</span> = <span class="ruby-ivar">@columns</span> = <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-ivar">@content_columns</span> = <span class="ruby-ivar">@dynamic_methods_hash</span> = <span class="ruby-ivar">@generated_methods</span> = <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-keyword kw">nil</span>
1189:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001835" class="method">
  <div id="M001835_title" class="title">
    <b>respond_to?</b>(method_id, include_private = false)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001835_source')" id="l_M001835_source">show source</a> ]</p>
  <div id="M001835_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1293</span>
1293:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_id</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword kw">false</span>)
1294:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> = <span class="ruby-identifier">matches_dynamic_finder?</span>(<span class="ruby-identifier">method_id</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">matches_dynamic_finder_with_initialize_or_create?</span>(<span class="ruby-identifier">method_id</span>)
1295:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_attributes_exists?</span>(<span class="ruby-identifier">extract_attribute_names_from_match</span>(<span class="ruby-identifier">match</span>))
1296:         <span class="ruby-keyword kw">end</span>
1297:         <span class="ruby-keyword kw">super</span>
1298:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001813" class="method">
  <div id="M001813_title" class="title">
    <b>serialize</b>(attr_name, class_name = Object)
  </div>
  <div class="description">
  <p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically. The
serialization is done through YAML. If <tt>class_name</tt> is specified,
the serialized object must be of that class on retrieval or <a
href="index.html?a=C00000665&name=SerializationTypeMismatch">SerializationTypeMismatch</a>
will be raised.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>attr_name</tt> - The field name that should be serialized.

</li>
<li><tt>class_name</tt> - Optional, class name that the object type should be
equal to.

</li>
</ul>
<h4>Example</h4>
<pre>
  # Serialize a preferences attribute
  class User
    serialize :preferences
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001813_source')" id="l_M001813_source">show source</a> ]</p>
  <div id="M001813_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 968</span>
968:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">class_name</span> = <span class="ruby-constant">Object</span>)
969:         <span class="ruby-identifier">serialized_attributes</span>[<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">class_name</span>
970:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001814" class="method">
  <div id="M001814_title" class="title">
    <b>serialized_attributes</b>()
  </div>
  <div class="description">
  <p>
Returns a hash of all the attributes that have been specified for
serialization as keys and their class restriction as values.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001814_source')" id="l_M001814_source">show source</a> ]</p>
  <div id="M001814_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 973</span>
973:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialized_attributes</span>
974:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_serialized&quot;</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_serialized&quot;</span>, {})
975:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001820" class="method">
  <div id="M001820_title" class="title">
    <b>set_inheritance_column</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_inheritance_column do
      original_inheritance_column + &quot;_id&quot;
    end
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001820_source')" id="l_M001820_source">show source</a> ]</p>
  <div id="M001820_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1109</span>
1109:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_inheritance_column</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1110:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:inheritance_column</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1111:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001819" class="method">
  <div id="M001819_title" class="title">
    <b>set_primary_key</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the primary key column to use to the given value, or (if
the value is nil or false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_primary_key &quot;sysid&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001819_source')" id="l_M001819_source">show source</a> ]</p>
  <div id="M001819_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1095</span>
1095:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_primary_key</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1096:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:primary_key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1097:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001821" class="method">
  <div id="M001821_title" class="title">
    <b>set_sequence_name</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{<a
href="index.html?a=M001815&name=table_name">table_name</a>}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_sequence_name &quot;projectseq&quot;   # default would have been &quot;project_seq&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001821_source')" id="l_M001821_source">show source</a> ]</p>
  <div id="M001821_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1128</span>
1128:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sequence_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1129:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:sequence_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1130:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001818" class="method">
  <div id="M001818_title" class="title">
    <b>set_table_name</b>(value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Sets the table name to use to the given value, or (if the value is nil or
false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_table_name &quot;project&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001818_source')" id="l_M001818_source">show source</a> ]</p>
  <div id="M001818_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1083</span>
1083:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_table_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1084:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:table_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1085:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001831" class="method">
  <div id="M001831_title" class="title">
    <b>silence</b>() {|| ...}
  </div>
  <div class="description">
  <p>
Silences the logger for the duration of the block.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001831_source')" id="l_M001831_source">show source</a> ]</p>
  <div id="M001831_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1265</span>
1265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">silence</span>
1266:         <span class="ruby-identifier">old_logger_level</span>, <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1267:         <span class="ruby-keyword kw">yield</span>
1268:       <span class="ruby-keyword kw">ensure</span>
1269:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">old_logger_level</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1270:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001836" class="method">
  <div id="M001836_title" class="title">
    <b>sti_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001836_source')" id="l_M001836_source">show source</a> ]</p>
  <div id="M001836_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1300</span>
1300:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sti_name</span>
1301:         <span class="ruby-identifier">store_full_sti_class</span> <span class="ruby-value">? </span><span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>
1302:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001822" class="method">
  <div id="M001822_title" class="title">
    <b>table_exists?</b>()
  </div>
  <div class="description">
  <p>
Indicates whether the table associated with this class exists
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001822_source')" id="l_M001822_source">show source</a> ]</p>
  <div id="M001822_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1142</span>
1142:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>
1143:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
1144:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001815" class="method">
  <div id="M001815_title" class="title">
    <b>table_name</b>()
  </div>
  <div class="description">
  <p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from <a
href="index.html?a=C00000664&name=ActiveRecord::Base">ActiveRecord::Base</a>.
So if the hierarchy looks like: Reply &lt; Message &lt; <a
href="index.html?a=C00000664&name=ActiveRecord::Base">ActiveRecord::Base</a>,
then Message is used to guess the table name even when called on Reply. The
rules used to do the guess are handled by the Inflector class in Active
Support, which knows almost all common English inflections. You can add new
inflections in config/initializers/inflections.rb.
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8217;s table name. Enclosing modules are not considered.
</p>
<h4>Examples</h4>
<pre>
  class Invoice &lt; ActiveRecord::Base; end;
  file                  class               table_name
  invoice.rb            Invoice             invoices

  class Invoice &lt; ActiveRecord::Base; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice.rb            Invoice::Lineitem   invoice_lineitems

  module Invoice; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice/lineitem.rb   Invoice::Lineitem   lineitems
</pre>
<p>
Additionally, the class-level <tt>table_name_prefix</tt> is prepended and
the <tt>table_name_suffix</tt> is appended. So if you have
&quot;myapp_&quot; as a prefix, the table name guess for an Invoice class
becomes &quot;myapp_invoices&quot;. Invoice::Lineitem becomes
&quot;myapp_invoice_lineitems&quot;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &quot;mice&quot; table. Example:
</p>
<pre>
  class Mouse &lt; ActiveRecord::Base
    set_table_name &quot;mice&quot;
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001815_source')" id="l_M001815_source">show source</a> ]</p>
  <div id="M001815_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1011</span>
1011:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_name</span>
1012:         <span class="ruby-identifier">reset_table_name</span>
1013:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001799" class="method">
  <div id="M001799_title" class="title">
    <b>update</b>(id, attributes)
  </div>
  <div class="description">
  <p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>id</tt> - This should be the id or an array of ids to be updated.

</li>
<li><tt>attributes</tt> - This should be a Hash of attributes to be set on the
object, or an array of Hashes.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Updating one record:
  Person.update(15, { :user_name =&gt; 'Samuel', :group =&gt; 'expert' })

  # Updating multiple records:
  people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot; } }
  Person.update(people.keys, people.values)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001799_source')" id="l_M001799_source">show source</a> ]</p>
  <div id="M001799_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 665</span>
665:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">attributes</span>)
666:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
667:           <span class="ruby-identifier">idx</span> = <span class="ruby-value">-1</span>
668:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">idx</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">update</span>(<span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">idx</span>]) }
669:         <span class="ruby-keyword kw">else</span>
670:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
671:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
672:           <span class="ruby-identifier">object</span>
673:         <span class="ruby-keyword kw">end</span>
674:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001802" class="method">
  <div id="M001802_title" class="title">
    <b>update_all</b>(updates, conditions = nil, options = {})
  </div>
  <div class="description">
  <p>
Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied.
</p>
<h4>Attributes</h4>
<ul>
<li><tt>updates</tt> - A String of column and value pairs that will be set on
any records that match conditions.

</li>
<li><tt>conditions</tt> - An SQL fragment like &quot;administrator = 1&quot; or
[ &quot;user_name = ?&quot;, username ]. See conditions in the intro for
more info.

</li>
<li><tt>options</tt> - Additional options are <tt>:limit</tt> and/or
<tt>:order</tt>, see the examples for usage.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Update all billing objects with the 3 different attributes given
  Billing.update_all( &quot;category = 'authorized', approved = 1, author = 'David'&quot; )

  # Update records that match our conditions
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot; )

  # Update records that match our conditions but limit it to 5 ordered by date
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;,
                        :order =&gt; 'created_at', :limit =&gt; 5 )
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001802_source')" id="l_M001802_source">show source</a> ]</p>
  <div id="M001802_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 746</span>
746:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {})
747:         <span class="ruby-identifier">sql</span>  = <span class="ruby-node">&quot;UPDATE #{quoted_table_name} SET #{sanitize_sql_for_assignment(updates)} &quot;</span>
748:         <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>)
749:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>)
750:         <span class="ruby-identifier">add_order!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:order</span>], <span class="ruby-keyword kw">nil</span>)
751:         <span class="ruby-identifier">add_limit!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>, <span class="ruby-keyword kw">nil</span>)
752:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Update&quot;</span>)
753:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001806" class="method">
  <div id="M001806_title" class="title">
    <b>update_counters</b>(id, counters)
  </div>
  <div class="description">
  <p>
A generic &quot;counter updater&quot; implementation, intended primarily to
be used by <a
href="index.html?a=M001807&name=increment_counter">increment_counter</a>
and <a
href="index.html?a=M001808&name=decrement_counter">decrement_counter</a>,
but which may also be useful on its own. It simply does a direct SQL update
for the record with the given ID, altering the given hash of counters by
the amount given by the corresponding value:
</p>
<h4>Attributes</h4>
<ul>
<li><tt>id</tt> - The id of the object you wish to update a counter on.

</li>
<li><tt>counters</tt> - An Array of Hashes containing the names of the fields
to update as keys and the amount to update the field by as values.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # For the Post with id of 5, decrement the comment_count by 1, and
  # increment the action_count by 1
  Post.update_counters 5, :comment_count =&gt; -1, :action_count =&gt; 1
  # Executes the following SQL:
  # UPDATE posts
  #    SET comment_count = comment_count - 1,
  #        action_count = action_count + 1
  #  WHERE id = 5
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001806_source')" id="l_M001806_source">show source</a> ]</p>
  <div id="M001806_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 832</span>
832:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counters</span>)
833:         <span class="ruby-identifier">updates</span> = <span class="ruby-identifier">counters</span>.<span class="ruby-identifier">inject</span>([]) { <span class="ruby-operator">|</span><span class="ruby-identifier">list</span>, (<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">increment</span>)<span class="ruby-operator">|</span>
834:           <span class="ruby-identifier">sign</span> = <span class="ruby-identifier">increment</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;+&quot;</span>
835:           <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{connection.quote_column_name(counter_name)} = COALESCE(#{connection.quote_column_name(counter_name)}, 0) #{sign} #{increment.abs}&quot;</span>
836:         }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
837:         <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-node">&quot;#{connection.quote_column_name(primary_key)} = #{quote_value(id)}&quot;</span>)
838:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Class methods</div>
<div id="M001843" class="method">
  <div id="M001843_title" class="title">
    <b>aggregate_mapping</b>(reflection)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001843_source')" id="l_M001843_source">show source</a> ]</p>
  <div id="M001843_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1961</span>
1961:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">reflection</span>)
1962:           <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mapping</span>] <span class="ruby-operator">||</span> [<span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>]
1963:           <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">mapping</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">mapping</span>]
1964:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001840" class="method">
  <div id="M001840_title" class="title">
    <b>class_of_active_record_descendant</b>(klass)
  </div>
  <div class="description">
  <p>
Returns the class descending directly from Active Record in the inheritance
hierarchy.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001840_source')" id="l_M001840_source">show source</a> ]</p>
  <div id="M001840_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1919</span>
1919:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>)
1920:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1921:             <span class="ruby-identifier">klass</span>
1922:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">nil?</span>
1923:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} doesn't belong in a hierarchy descending from ActiveRecord&quot;</span>
1924:           <span class="ruby-keyword kw">else</span>
1925:             <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>)
1926:           <span class="ruby-keyword kw">end</span>
1927:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001839" class="method">
  <div id="M001839_title" class="title">
    <b>compute_type</b>(type_name)
  </div>
  <div class="description">
  <p>
Returns the class type of the record using the current module as a prefix.
So descendents of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001839_source')" id="l_M001839_source">show source</a> ]</p>
  <div id="M001839_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1909</span>
1909:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compute_type</span>(<span class="ruby-identifier">type_name</span>)
1910:           <span class="ruby-identifier">modularized_name</span> = <span class="ruby-identifier">type_name_with_module</span>(<span class="ruby-identifier">type_name</span>)
1911:           <span class="ruby-keyword kw">begin</span>
1912:             <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">modularized_name</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
1913:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
1914:             <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">type_name</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
1915:           <span class="ruby-keyword kw">end</span>
1916:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001844" class="method">
  <div id="M001844_title" class="title">
    <b>expand_hash_conditions_for_aggregates</b>(attrs)
  </div>
  <div class="description">
  <p>
Accepts a hash of SQL conditions and replaces those attributes that
correspond to a <tt>composed_of</tt> relationship with their expanded
aggregate attribute values. Given:
</p>
<pre>
    class Person &lt; ActiveRecord::Base
      composed_of :address, :class_name =&gt; &quot;Address&quot;,
        :mapping =&gt; [%w(address_street street), %w(address_city city)]
    end
</pre>
<p>
Then:
</p>
<pre>
    { :address =&gt; Address.new(&quot;813 abc st.&quot;, &quot;chicago&quot;) }
      # =&gt; { :address_street =&gt; &quot;813 abc st.&quot;, :address_city =&gt; &quot;chicago&quot; }
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001844_source')" id="l_M001844_source">show source</a> ]</p>
  <div id="M001844_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1977</span>
1977:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
1978:           <span class="ruby-identifier">expanded_attrs</span> = {}
1979:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1980:             <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">aggregation</span> = <span class="ruby-identifier">reflect_on_aggregation</span>(<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_sym</span>)).<span class="ruby-identifier">nil?</span>
1981:               <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">aggregation</span>)
1982:               <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_attr</span>, <span class="ruby-identifier">aggregate_attr</span><span class="ruby-operator">|</span>
1983:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">aggregate_attr</span>)
1984:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>
1985:                 <span class="ruby-keyword kw">else</span>
1986:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">aggregate_attr</span>)
1987:                 <span class="ruby-keyword kw">end</span>
1988:               <span class="ruby-keyword kw">end</span>
1989:             <span class="ruby-keyword kw">else</span>
1990:               <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">value</span>
1991:             <span class="ruby-keyword kw">end</span>
1992:           <span class="ruby-keyword kw">end</span>
1993:           <span class="ruby-identifier">expanded_attrs</span>
1994:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001847" class="method">
  <div id="M001847_title" class="title">
    <b>sanitize_sql_array</b>(ary)
  </div>
  <div class="description">
  <p>
Accepts an array of conditions. The array has each value sanitized and
interpolated into the SQL statement.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001847_source')" id="l_M001847_source">show source</a> ]</p>
  <div id="M001847_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2041</span>
2041:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">ary</span>)
2042:           <span class="ruby-identifier">statement</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span> = <span class="ruby-identifier">ary</span>
2043:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">statement</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/:\w+/</span>
2044:             <span class="ruby-identifier">replace_named_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>)
2045:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'?'</span>)
2046:             <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>)
2047:           <span class="ruby-keyword kw">else</span>
2048:             <span class="ruby-identifier">statement</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>) }
2049:           <span class="ruby-keyword kw">end</span>
2050:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001842" class="method">
  <div id="M001842_title" class="title">
    <b>sanitize_sql_for_assignment</b>(assignments)
  </div>
  <div class="description">
  <p>
Accepts an array, hash, or string of SQL conditions and sanitizes them into
a valid SQL fragment for a SET clause.
</p>
<pre>
  { :name =&gt; nil, :group_id =&gt; 4 }  returns &quot;name = NULL , group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001842_source')" id="l_M001842_source">show source</a> ]</p>
  <div id="M001842_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1953</span>
1953:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1954:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">assignments</span>
1955:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">assignments</span>)
1956:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1957:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">assignments</span>
1958:           <span class="ruby-keyword kw">end</span>
1959:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001841" class="method">
  <div id="M001841_title" class="title">
    <b>sanitize_sql_for_conditions</b>(condition)
  </div>
  <div class="description">
  <p>
Accepts an array, hash, or string of SQL conditions and sanitizes them into
a valid SQL fragment for a WHERE clause.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }  returns &quot;name='foo''bar' and group_id='4'&quot;
  &quot;name='foo''bar' and group_id='4'&quot; returns &quot;name='foo''bar' and group_id='4'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001841_source')" id="l_M001841_source">show source</a> ]</p>
  <div id="M001841_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1939</span>
1939:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_conditions</span>(<span class="ruby-identifier">condition</span>)
1940:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">blank?</span>
1941: 
1942:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">condition</span>
1943:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">condition</span>)
1944:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">condition</span>)
1945:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">condition</span>
1946:           <span class="ruby-keyword kw">end</span>
1947:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001846" class="method">
  <div id="M001846_title" class="title">
    <b>sanitize_sql_hash_for_assignment</b>(attrs)
  </div>
  <div class="description">
  <p>
Sanitizes a hash of attribute/value pairs into SQL conditions for a SET
clause.
</p>
<pre>
  { :status =&gt; nil, :group_id =&gt; 1 }
    # =&gt; &quot;status = NULL , group_id = 1&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001846_source')" id="l_M001846_source">show source</a> ]</p>
  <div id="M001846_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2032</span>
2032:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">attrs</span>)
2033:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
2034:             <span class="ruby-node">&quot;#{connection.quote_column_name(attr)} = #{quote_bound_value(value)}&quot;</span>
2035:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
2036:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001845" class="method">
  <div id="M001845_title" class="title">
    <b>sanitize_sql_hash_for_conditions</b>(attrs)
  </div>
  <div class="description">
  <p>
Sanitizes a hash of attribute/value pairs into SQL conditions for a WHERE
clause.
</p>
<pre>
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }
    # =&gt; &quot;name='foo''bar' and group_id= 4&quot;
  { :status =&gt; nil, :group_id =&gt; [1,2,3] }
    # =&gt; &quot;status IS NULL and group_id IN (1,2,3)&quot;
  { :age =&gt; 13..18 }
    # =&gt; &quot;age BETWEEN 13 AND 18&quot;
  { 'other_records.id' =&gt; 7 }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
</pre>
<p>
And for value objects on a composed_of relationship:
</p>
<pre>
  { :address =&gt; Address.new(&quot;123 abc st.&quot;, &quot;chicago&quot;) }
    # =&gt; &quot;address_street='123 abc st.' and address_city='chicago'&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001845_source')" id="l_M001845_source">show source</a> ]</p>
  <div id="M001845_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2008</span>
2008:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">attrs</span>)
2009:           <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
2010: 
2011:           <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
2012:             <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_s</span>
2013: 
2014:             <span class="ruby-comment cmt"># Extract table name from qualified attribute names.</span>
2015:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>)
2016:               <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>)
2017:               <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">table_name</span>)
2018:             <span class="ruby-keyword kw">else</span>
2019:               <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">quoted_table_name</span>
2020:             <span class="ruby-keyword kw">end</span>
2021: 
2022:             <span class="ruby-node">&quot;#{table_name}.#{connection.quote_column_name(attr)} #{attribute_condition(value)}&quot;</span>
2023:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' AND '</span>)
2024: 
2025:           <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">expand_range_bind_variables</span>(<span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">values</span>))
2026:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001838" class="method">
  <div id="M001838_title" class="title">
    <b>with_exclusive_scope</b>(method_scoping = {}, &amp;block)
  </div>
  <div class="description">
  <p>
Works like <a href="index.html?a=M001837&name=with_scope">with_scope</a>,
but discards any nested properties.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001838_source')" id="l_M001838_source">show source</a> ]</p>
  <div id="M001838_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1864</span>
1864:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_exclusive_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1865:           <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span>, <span class="ruby-identifier">:overwrite</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1866:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001837" class="method">
  <div id="M001837_title" class="title">
    <b>with_scope</b>(method_scoping = {}, action = :merge) {|| ...}
  </div>
  <div class="description">
  <p>
Scope parameters to method calls within the block. Takes a hash of
method_name =&gt; parameters hash. method_name may be <tt>:find</tt> or
<tt>:create</tt>. <tt>:find</tt> parameters may include the
<tt>:conditions</tt>, <tt>:joins</tt>, <tt>:include</tt>, <tt>:offset</tt>,
<tt>:limit</tt>, and <tt>:readonly</tt> options. <tt>:create</tt>
parameters are an attributes hash.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.create_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot; }, :create =&gt; { :blog_id =&gt; 1 }) do
        find(1) # =&gt; SELECT * from articles WHERE blog_id = 1 AND id = 1
        a = create(1)
        a.blog_id # =&gt; 1
      end
    end
  end
</pre>
<p>
In nested scopings, all previous parameters are overwritten by the
innermost rule, with the exception of <tt>:conditions</tt> and
<tt>:include</tt> options in <tt>:find</tt>, which are merged.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }, :create =&gt; { :blog_id =&gt; 1 }) do
        with_scope(:find =&gt; { :limit =&gt; 10 })
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 LIMIT 10
        end
        with_scope(:find =&gt; { :conditions =&gt; &quot;author_id = 3&quot; })
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 AND author_id = 3 LIMIT 1
        end
      end
    end
  end
</pre>
<p>
You can ignore any previous scopings by using the <tt><a
href="index.html?a=M001838&name=with_exclusive_scope">with_exclusive_scope</a></tt>
method.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_exclusive_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }) do
        with_exclusive_scope(:find =&gt; { :limit =&gt; 10 })
          find(:all) # =&gt; SELECT * from articles LIMIT 10
        end
      end
    end
  end
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001837_source')" id="l_M001837_source">show source</a> ]</p>
  <div id="M001837_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 1812</span>
1812:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-identifier">action</span> = <span class="ruby-identifier">:merge</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1813:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">method_scoping</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:method_scoping</span>)
1814: 
1815:           <span class="ruby-comment cmt"># Dup first and second level of hash (method and params).</span>
1816:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
1817:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = (<span class="ruby-identifier">params</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">params</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">dup</span>
1818:             <span class="ruby-identifier">hash</span>
1819:           <span class="ruby-keyword kw">end</span>
1820: 
1821:           <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">assert_valid_keys</span>([ <span class="ruby-identifier">:find</span>, <span class="ruby-identifier">:create</span> ])
1822: 
1823:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span> = <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:find</span>]
1824:             <span class="ruby-identifier">f</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-constant">VALID_FIND_OPTIONS</span>)
1825:             <span class="ruby-identifier">set_readonly_option!</span> <span class="ruby-identifier">f</span>
1826:           <span class="ruby-keyword kw">end</span>
1827: 
1828:           <span class="ruby-comment cmt"># Merge scopings</span>
1829:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:merge</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_scoped_methods</span>
1830:             <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">method_scoping</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
1831:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>]
1832:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
1833:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:find</span>
1834:                     (<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>].<span class="ruby-identifier">keys</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">keys</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
1835:                       <span class="ruby-identifier">merge</span> = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] <span class="ruby-comment cmt"># merge if both scopes have the same key</span>
1836:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:conditions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
1837:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_conditions</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>])
1838:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:include</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
1839:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_includes</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>], <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]).<span class="ruby-identifier">uniq</span>
1840:                       <span class="ruby-keyword kw">else</span>
1841:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]
1842:                       <span class="ruby-keyword kw">end</span>
1843:                     <span class="ruby-keyword kw">end</span>
1844:                   <span class="ruby-keyword kw">else</span>
1845:                     <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>])
1846:                   <span class="ruby-keyword kw">end</span>
1847:                 <span class="ruby-keyword kw">else</span>
1848:                   <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>
1849:               <span class="ruby-keyword kw">end</span>
1850:               <span class="ruby-identifier">hash</span>
1851:             <span class="ruby-keyword kw">end</span>
1852:           <span class="ruby-keyword kw">end</span>
1853: 
1854:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_scoping</span>
1855: 
1856:           <span class="ruby-keyword kw">begin</span>
1857:             <span class="ruby-keyword kw">yield</span>
1858:           <span class="ruby-keyword kw">ensure</span>
1859:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span>.<span class="ruby-identifier">pop</span>
1860:           <span class="ruby-keyword kw">end</span>
1861:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M001879" class="method">
  <div id="M001879_title" class="title">
    <b>==</b>(comparison_object)
  </div>
  <div class="description">
  <p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same id.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001879_source')" id="l_M001879_source">show source</a> ]</p>
  <div id="M001879_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2432</span>
2432:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">comparison_object</span>)
2433:         <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">||</span>
2434:           (<span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
2435:             <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span>
2436:             <span class="ruby-operator">!</span><span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">new_record?</span>)
2437:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001869" class="method">
  <div id="M001869_title" class="title">
    <b>[]</b>(attr_name)
  </div>
  <div class="description">
  <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001869_source')" id="l_M001869_source">show source</a> ]</p>
  <div id="M001869_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2349</span>
2349:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attr_name</span>)
2350:         <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2351:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001870" class="method">
  <div id="M001870_title" class="title">
    <b>[]=</b>(attr_name, value)
  </div>
  <div class="description">
  <p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001870_source')" id="l_M001870_source">show source</a> ]</p>
  <div id="M001870_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2355</span>
2355:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2356:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2357:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001874" class="method">
  <div id="M001874_title" class="title">
    <b>attribute_for_inspect</b>(attr_name)
  </div>
  <div class="description">
  <p>
Format attributes nicely for inspect.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001874_source')" id="l_M001874_source">show source</a> ]</p>
  <div id="M001874_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2397</span>
2397:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
2398:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2399: 
2400:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>
2401:           <span class="ruby-node">&quot;#{value[0..50]}...&quot;</span>.<span class="ruby-identifier">inspect</span>
2402:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Date</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
2403:           <span class="ruby-node">%(&quot;#{value.to_s(:db)}&quot;)</span>
2404:         <span class="ruby-keyword kw">else</span>
2405:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inspect</span>
2406:         <span class="ruby-keyword kw">end</span>
2407:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001877" class="method">
  <div id="M001877_title" class="title">
    <b>attribute_names</b>()
  </div>
  <div class="description">
  <p>
Returns an array of names for the attributes available on this object
sorted alphabetically.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001877_source')" id="l_M001877_source">show source</a> ]</p>
  <div id="M001877_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2422</span>
2422:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_names</span>
2423:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
2424:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001875" class="method">
  <div id="M001875_title" class="title">
    <b>attribute_present?</b>(attribute)
  </div>
  <div class="description">
  <p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001875_source')" id="l_M001875_source">show source</a> ]</p>
  <div id="M001875_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2411</span>
2411:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attribute</span>)
2412:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attribute</span>)
2413:         <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
2414:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001872" class="method">
  <div id="M001872_title" class="title">
    <b>attributes</b>()
  </div>
  <div class="description">
  <p>
Returns a hash of all the attributes with their names as keys and the
values of the attributes as values.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001872_source')" id="l_M001872_source">show source</a> ]</p>
  <div id="M001872_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2381</span>
2381:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>
2382:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2383:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">name</span>)
2384:           <span class="ruby-identifier">attrs</span>
2385:         <span class="ruby-keyword kw">end</span>
2386:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001871" class="method">
  <div id="M001871_title" class="title">
    <b>attributes=</b>(new_attributes, guard_protected_attributes = true)
  </div>
  <div class="description">
  <p>
Allows you to set all the attributes at once by passing in a hash with keys
matching the attribute names (which again matches the column names).
Sensitive attributes can be protected from this form of mass-assignment by
using the <tt><a
href="index.html?a=M001809&name=attr_protected">attr_protected</a></tt>
macro. Or you can alternatively specify which attributes <b>can</b> be
accessed with the <tt><a
href="index.html?a=M001810&name=attr_accessible">attr_accessible</a></tt>
macro. Then all the attributes not included in that won&#8217;t be allowed
to be mass-assigned.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001871_source')" id="l_M001871_source">show source</a> ]</p>
  <div id="M001871_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2364</span>
2364:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">new_attributes</span>, <span class="ruby-identifier">guard_protected_attributes</span> = <span class="ruby-keyword kw">true</span>)
2365:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">nil?</span>
2366:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">dup</span>
2367:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">stringify_keys!</span>
2368: 
2369:         <span class="ruby-identifier">multi_parameter_attributes</span> = []
2370:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">remove_attributes_protected_from_mass_assignment</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">guard_protected_attributes</span>
2371: 
2372:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
2373:           <span class="ruby-identifier">k</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;(&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">multi_parameter_attributes</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ] <span class="ruby-operator">:</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">k</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-identifier">v</span>)
2374:         <span class="ruby-keyword kw">end</span>
2375: 
2376:         <span class="ruby-identifier">assign_multiparameter_attributes</span>(<span class="ruby-identifier">multi_parameter_attributes</span>)
2377:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001873" class="method">
  <div id="M001873_title" class="title">
    <b>attributes_before_type_cast</b>()
  </div>
  <div class="description">
  <p>
Returns a hash of attributes before typecasting and deserialization.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001873_source')" id="l_M001873_source">show source</a> ]</p>
  <div id="M001873_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2389</span>
2389:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes_before_type_cast</span>
2390:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2391:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute_before_type_cast</span>(<span class="ruby-identifier">name</span>)
2392:           <span class="ruby-identifier">attrs</span>
2393:         <span class="ruby-keyword kw">end</span>
2394:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001858" class="method">
  <div id="M001858_title" class="title">
    <b>becomes</b>(klass)
  </div>
  <div class="description">
  <p>
Returns an instance of the specified <tt>klass</tt> with the attributes of
the current record. This is mostly useful in relation to single-table
inheritance structures where you want a subclass to appear as the
superclass. This can be used along with record identification in Action
Pack to allow, say, <tt>Client &lt; Company</tt> to do something like
render <tt>:partial =&gt; @client.becomes(Company)</tt> to render that
instance using the companies/company partial instead of clients/client.
</p>
<p>
Note: The new instance will share a link to the same attributes as the
original class. So any change to the attributes in either instance will
affect the other.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001858_source')" id="l_M001858_source">show source</a> ]</p>
  <div id="M001858_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2254</span>
2254:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">becomes</span>(<span class="ruby-identifier">klass</span>)
2255:         <span class="ruby-identifier">returning</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">became</span><span class="ruby-operator">|</span>
2256:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes&quot;</span>, <span class="ruby-ivar">@attributes</span>)
2257:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes_cache&quot;</span>, <span class="ruby-ivar">@attributes_cache</span>)
2258:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@new_record&quot;</span>, <span class="ruby-identifier">new_record?</span>)
2259:         <span class="ruby-keyword kw">end</span>
2260:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001851" class="method">
  <div id="M001851_title" class="title">
    <b>cache_key</b>()
  </div>
  <div class="description">
  <p>
Returns a cache key that can be used to identify this record.
</p>
<h4>Examples</h4>
<pre>
  Product.new.cache_key     # =&gt; &quot;products/new&quot;
  Product.find(5).cache_key # =&gt; &quot;products/5&quot; (updated_at not available)
  Person.find(5).cache_key  # =&gt; &quot;people/5-20071224150000&quot; (updated_at available)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001851_source')" id="l_M001851_source">show source</a> ]</p>
  <div id="M001851_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2173</span>
2173:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_key</span>
2174:         <span class="ruby-keyword kw">case</span>
2175:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">new_record?</span>
2176:           <span class="ruby-node">&quot;#{self.class.name.tableize}/new&quot;</span>
2177:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:updated_at</span>]
2178:           <span class="ruby-node">&quot;#{self.class.name.tableize}/#{id}-#{updated_at.to_s(:number)}&quot;</span>
2179:         <span class="ruby-keyword kw">else</span>
2180:           <span class="ruby-node">&quot;#{self.class.name.tableize}/#{id}&quot;</span>
2181:         <span class="ruby-keyword kw">end</span>
2182:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001857" class="method">
  <div id="M001857_title" class="title">
    <b>clone</b>()
  </div>
  <div class="description">
  <p>
Returns a clone of the record that hasn&#8217;t been assigned an id yet and
is treated as a new record. Note that this is a &quot;shallow&quot; clone:
it copies the object&#8217;s attributes only, not its associations. The
extent of a &quot;deep&quot; clone is application-specific and is therefore
left to the application to implement according to its need.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001857_source')" id="l_M001857_source">show source</a> ]</p>
  <div id="M001857_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2239</span>
2239:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clone</span>
2240:         <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">clone_attributes</span>(<span class="ruby-identifier">:read_attribute_before_type_cast</span>)
2241:         <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>)
2242:         <span class="ruby-identifier">record</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
2243:         <span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:instance_variable_set</span>, <span class="ruby-value str">'@attributes'</span>, <span class="ruby-identifier">attrs</span>
2244:         <span class="ruby-identifier">record</span>
2245:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001878" class="method">
  <div id="M001878_title" class="title">
    <b>column_for_attribute</b>(name)
  </div>
  <div class="description">
  <p>
Returns the column object for the named attribute.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001878_source')" id="l_M001878_source">show source</a> ]</p>
  <div id="M001878_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2427</span>
2427:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>)
2428:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>]
2429:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001864" class="method">
  <div id="M001864_title" class="title">
    <b>decrement</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and subtracts the
value passed as <tt>by</tt> (default is 1). The decrement is performed
directly on the underlying attribute, no setter is invoked. Only makes
sense for number-based attributes. Returns <tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001864_source')" id="l_M001864_source">show source</a> ]</p>
  <div id="M001864_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2303</span>
2303:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2304:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2305:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">by</span>
2306:         <span class="ruby-keyword kw">self</span>
2307:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001865" class="method">
  <div id="M001865_title" class="title">
    <b>decrement!</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Wrapper around <tt>decrement</tt> that saves the record. This method
differs from its non-bang version in that it passes through the attribute
setter. Saving is not subjected to validation checks. Returns <tt>true</tt>
if the record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001865_source')" id="l_M001865_source">show source</a> ]</p>
  <div id="M001865_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2313</span>
2313:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2314:         <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2315:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001856" class="method">
  <div id="M001856_title" class="title">
    <b>destroy</b>()
  </div>
  <div class="description">
  <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001856_source')" id="l_M001856_source">show source</a> ]</p>
  <div id="M001856_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2222</span>
2222:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
2223:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
2224:           <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;DELETE FROM \#{self.class.quoted_table_name}\nWHERE \#{connection.quote_column_name(self.class.primary_key)} = \#{quoted_id}\n&quot;</span>, <span class="ruby-node">&quot;#{self.class.name} Destroy&quot;</span>
2225:         <span class="ruby-keyword kw">end</span>
2226: 
2227:         <span class="ruby-identifier">freeze</span>
2228:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001880" class="method">
  <div id="M001880_title" class="title">
    <b>eql?</b>(comparison_object)
  </div>
  <div class="description">
  <p>
Delegates to ==
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001880_source')" id="l_M001880_source">show source</a> ]</p>
  <div id="M001880_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2440</span>
2440:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">comparison_object</span>)
2441:         <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">comparison_object</span>)
2442:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001882" class="method">
  <div id="M001882_title" class="title">
    <b>freeze</b>()
  </div>
  <div class="description">
  <p>
Freeze the attributes hash such that associations are still accessible,
even on destroyed records.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001882_source')" id="l_M001882_source">show source</a> ]</p>
  <div id="M001882_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2451</span>
2451:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
2452:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">freeze</span>; <span class="ruby-keyword kw">self</span>
2453:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001883" class="method">
  <div id="M001883_title" class="title">
    <b>frozen?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the attributes hash has been frozen.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001883_source')" id="l_M001883_source">show source</a> ]</p>
  <div id="M001883_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2456</span>
2456:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frozen?</span>
2457:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
2458:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001876" class="method">
  <div id="M001876_title" class="title">
    <b>has_attribute?</b>(attr_name)
  </div>
  <div class="description">
  <p>
Returns true if the given attribute is in the attributes hash
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001876_source')" id="l_M001876_source">show source</a> ]</p>
  <div id="M001876_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2417</span>
2417:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
2418:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>)
2419:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001881" class="method">
  <div id="M001881_title" class="title">
    <b>hash</b>()
  </div>
  <div class="description">
  <p>
Delegates to id in order to allow two records of the same type and id to
work with something like:
</p>
<pre>
  [ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001881_source')" id="l_M001881_source">show source</a> ]</p>
  <div id="M001881_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2446</span>
2446:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
2447:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
2448:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001849" class="method">
  <div id="M001849_title" class="title">
    <b>id</b>()
  </div>
  <div class="description">
  <p>
A model instance&#8217;s primary key is always available as model.id
whether you name it the default &#8216;id&#8217; or set it to something
else.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001849_source')" id="l_M001849_source">show source</a> ]</p>
  <div id="M001849_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2150</span>
2150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span>
2151:         <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>
2152:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2153: 
2154:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_read_method</span>, <span class="ruby-identifier">:id</span>, <span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">column</span>)
2155:         <span class="ruby-comment cmt"># now that the method exists, call it</span>
2156:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_sym</span>
2157: 
2158:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001852" class="method">
  <div id="M001852_title" class="title">
    <b>id=</b>(value)
  </div>
  <div class="description">
  <p>
Sets the primary ID.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001852_source')" id="l_M001852_source">show source</a> ]</p>
  <div id="M001852_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2193</span>
2193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id=</span>(<span class="ruby-identifier">value</span>)
2194:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>, <span class="ruby-identifier">value</span>)
2195:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001862" class="method">
  <div id="M001862_title" class="title">
    <b>increment</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and adds the value
passed as <tt>by</tt> (default is 1). The increment is performed directly
on the underlying attribute, no setter is invoked. Only makes sense for
number-based attributes. Returns <tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001862_source')" id="l_M001862_source">show source</a> ]</p>
  <div id="M001862_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2286</span>
2286:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2287:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2288:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">by</span>
2289:         <span class="ruby-keyword kw">self</span>
2290:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001863" class="method">
  <div id="M001863_title" class="title">
    <b>increment!</b>(attribute, by = 1)
  </div>
  <div class="description">
  <p>
Wrapper around <tt>increment</tt> that saves the record. This method
differs from its non-bang version in that it passes through the attribute
setter. Saving is not subjected to validation checks. Returns <tt>true</tt>
if the record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001863_source')" id="l_M001863_source">show source</a> ]</p>
  <div id="M001863_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2296</span>
2296:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2297:         <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2298:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001886" class="method">
  <div id="M001886_title" class="title">
    <b>inspect</b>()
  </div>
  <div class="description">
  <p>
Returns the contents of the record as a nicely formatted string.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001886_source')" id="l_M001886_source">show source</a> ]</p>
  <div id="M001886_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2472</span>
2472:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2473:         <span class="ruby-identifier">attributes_as_nice_string</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2474:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">new_record?</span>
2475:             <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
2476:           <span class="ruby-keyword kw">end</span>
2477:         }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
2478:         <span class="ruby-node">&quot;#&lt;#{self.class} #{attributes_as_nice_string}&gt;&quot;</span>
2479:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001853" class="method">
  <div id="M001853_title" class="title">
    <b>new_record?</b>()
  </div>
  <div class="description">
  <p>
Returns true if this object hasn&#8217;t been saved yet &#8212; that is, a
record for the object doesn&#8217;t exist yet.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001853_source')" id="l_M001853_source">show source</a> ]</p>
  <div id="M001853_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2198</span>
2198:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_record?</span>
2199:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@new_record</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@new_record</span>
2200:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001885" class="method">
  <div id="M001885_title" class="title">
    <b>readonly!</b>()
  </div>
  <div class="description">
  <p>
Marks this record as read only.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001885_source')" id="l_M001885_source">show source</a> ]</p>
  <div id="M001885_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2467</span>
2467:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly!</span>
2468:         <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword kw">true</span>
2469:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001884" class="method">
  <div id="M001884_title" class="title">
    <b>readonly?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the record is read only. Records loaded through
joins with piggy-back attributes will be marked as read only since they
cannot be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001884_source')" id="l_M001884_source">show source</a> ]</p>
  <div id="M001884_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2462</span>
2462:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly?</span>
2463:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@readonly</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@readonly</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
2464:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001868" class="method">
  <div id="M001868_title" class="title">
    <b>reload</b>(options = nil)
  </div>
  <div class="description">
  <p>
Reloads the attributes of this object from the database. The optional
options argument is passed to find when reloading so you may do e.g.
record.reload(:lock =&gt; true) to reload the same record with an exclusive
row lock.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001868_source')" id="l_M001868_source">show source</a> ]</p>
  <div id="M001868_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2338</span>
2338:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
2339:         <span class="ruby-identifier">clear_aggregation_cache</span>
2340:         <span class="ruby-identifier">clear_association_cache</span>
2341:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">update</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">'@attributes'</span>))
2342:         <span class="ruby-ivar">@attributes_cache</span> = {}
2343:         <span class="ruby-keyword kw">self</span>
2344:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001854" class="method">
  <div id="M001854_title" class="title">
    <b>save</b>()
  </div>
  <div class="description">
  <ul>
<li>No record exists: Creates a new record with values matching those of the
object attributes.

</li>
<li>A record does exist: Updates the record with values matching those of the
object attributes.

</li>
</ul>
<p>
Note: If your model specifies any validations then the method declaration
dynamically changes to:
</p>
<pre>
  save(perform_validation=true)
</pre>
<p>
Calling save(false) saves the model without running validations. See <a
href="index.html?a=C00000628&name=ActiveRecord::Validations">ActiveRecord::Validations</a>
for more information.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001854_source')" id="l_M001854_source">show source</a> ]</p>
  <div id="M001854_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2210</span>
2210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
2211:         <span class="ruby-identifier">create_or_update</span>
2212:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001855" class="method">
  <div id="M001855_title" class="title">
    <b>save!</b>()
  </div>
  <div class="description">
  <p>
Attempts to save the record, but instead of just returning false if it
couldn&#8217;t happen, it raises a <a
href="index.html?a=C00000678&name=RecordNotSaved">RecordNotSaved</a>
exception
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001855_source')" id="l_M001855_source">show source</a> ]</p>
  <div id="M001855_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2216</span>
2216:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save!</span>
2217:         <span class="ruby-identifier">create_or_update</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">RecordNotSaved</span>)
2218:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001850" class="method">
  <div id="M001850_title" class="title">
    <b>to_param</b>()
  </div>
  <div class="description">
  <p>
Enables Active Record objects to be used as URL parameters in Action Pack
automatically.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001850_source')" id="l_M001850_source">show source</a> ]</p>
  <div id="M001850_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2161</span>
2161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>
2162:         <span class="ruby-comment cmt"># We can't use alias_method here, because method 'id' optimizes itself on the fly.</span>
2163:         (<span class="ruby-identifier">id</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># Be sure to stringify the id for routes</span>
2164:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001866" class="method">
  <div id="M001866_title" class="title">
    <b>toggle</b>(attribute)
  </div>
  <div class="description">
  <p>
Assigns to <tt>attribute</tt> the boolean opposite of <tt>attribute?</tt>.
So if the predicate returns <tt>true</tt> the attribute will become
<tt>false</tt>. This method toggles directly the underlying value without
calling any setter. Returns <tt>self</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001866_source')" id="l_M001866_source">show source</a> ]</p>
  <div id="M001866_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2321</span>
2321:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>)
2322:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attribute}?&quot;</span>)
2323:         <span class="ruby-keyword kw">self</span>
2324:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001867" class="method">
  <div id="M001867_title" class="title">
    <b>toggle!</b>(attribute)
  </div>
  <div class="description">
  <p>
Wrapper around <tt>toggle</tt> that saves the record. This method differs
from its non-bang version in that it passes through the attribute setter.
Saving is not subjected to validation checks. Returns <tt>true</tt> if the
record could be saved.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001867_source')" id="l_M001867_source">show source</a> ]</p>
  <div id="M001867_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2330</span>
2330:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">attribute</span>)
2331:         <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2332:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001859" class="method">
  <div id="M001859_title" class="title">
    <b>update_attribute</b>(name, value)
  </div>
  <div class="description">
  <p>
Updates a single attribute and saves the record. This is especially useful
for boolean flags on existing records. Note: This method is overwritten by
the Validation module that&#8217;ll make sure that updates made with this
method aren&#8217;t subjected to validation checks. Hence, attributes can
be updated even if the full object isn&#8217;t valid.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001859_source')" id="l_M001859_source">show source</a> ]</p>
  <div id="M001859_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2265</span>
2265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
2266:         <span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'='</span>, <span class="ruby-identifier">value</span>)
2267:         <span class="ruby-identifier">save</span>
2268:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001860" class="method">
  <div id="M001860_title" class="title">
    <b>update_attributes</b>(attributes)
  </div>
  <div class="description">
  <p>
Updates all the attributes from the passed-in Hash and saves the record. If
the object is invalid, the saving will fail and false will be returned.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001860_source')" id="l_M001860_source">show source</a> ]</p>
  <div id="M001860_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2272</span>
2272:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
2273:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
2274:         <span class="ruby-identifier">save</span>
2275:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001861" class="method">
  <div id="M001861_title" class="title">
    <b>update_attributes!</b>(attributes)
  </div>
  <div class="description">
  <p>
Updates an object just like <a
href="index.html?a=M001860&name=Base.update_attributes">Base.update_attributes</a>
but calls save! instead of save so an exception is raised if the record is
invalid.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001861_source')" id="l_M001861_source">show source</a> ]</p>
  <div id="M001861_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/lib/active_record/base.rb, line 2278</span>
2278:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">attributes</span>)
2279:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
2280:         <span class="ruby-identifier">save!</span>
2281:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>